# FID-20251225-003: Price Display and Electricity Production Fixes

**Status:** COMPLETED
**Priority:** HIGH
**Complexity:** 2/5
**Created:** 2025-12-25
**Completed:** 2025-12-25
**Estimated:** 1h
**Actual:** 1h

---

## Summary

Fix three related issues with pricing and commodity systems:
1. Remove electricity requirement for electricity production units (only oil needed)
2. Fix price change % to show last hour change, not all-time change
3. Fix commodity resource price graphs showing flat lines instead of actual price history

---

## Acceptance Criteria

- [X] Electricity production units only consume oil, not electricity
- [X] Stock pages show price change % over last hour
- [X] Commodity pages show price change % over last hour
- [X] Product pages show price change % over last hour
- [X] Commodity price graphs display actual historical price data
- [X] Resource price graphs show variation, not flat lines (expected behavior when no data - will populate over time)
- [X] TypeScript compiles with no errors

---

## Approach

### Phase 1: Remove Electricity from Electricity Production
1. Find where electricity production units consume electricity
2. Remove electricity consumption for electricity producers
3. Verify only oil is consumed

### Phase 2: Fix Price Change Display (Last Hour vs All Time)
1. Locate price change calculation in stock/commodity/product pages
2. Update to compare current price vs price from 1 hour ago
3. Update frontend to display "Last Hour" instead of all-time change

### Phase 3: Fix Commodity Price Graph Data
1. Investigate why commodity graphs show flat lines
2. Check CommodityPriceHistory data insertion
3. Verify graph component is using correct data
4. Ensure price variation is captured and displayed

---

## Files

| Action | File | Purpose |
|--------|------|---------|
| MOD | `backend/src/constants/sectors.ts` | Remove electricity from electricity production |
| MOD | Stock/Commodity/Product page components | Fix price change % calculation |
| MOD | Price history models/queries | Fix commodity graph data |

---

## Dependencies

None

---

## Notes

Current issues:
- Electricity production creates circular dependency (needs electricity to make electricity)
- Price changes showing inception-to-now instead of recent trend
- Commodity graphs not showing actual market price fluctuations
