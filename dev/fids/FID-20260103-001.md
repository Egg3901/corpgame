# FID-20260103-001: Fix Corporation Creation Shareholder Assignment

## Status: COMPLETED

## Problem
Corporation creation process was not assigning 400k founder shares to the CEO. Test confirmed: `expected 0 to be 400000`.

## Root Cause
The validation schema was changed (commit `0d1208c`) to require `type` instead of `sector`, but the tests were still sending `sector`. This caused validation to fail, which meant no corporation or shareholder records were created.

**Schema Change:**
- Before: `sector` was required
- After: `type` is required, `sector` is optional

**Test Requests:**
```javascript
// BEFORE (broken)
body: {
  name: 'Test Corp',
  sector: 'Technology',  // Wrong field
  initial_capital: 500000,
}

// AFTER (fixed)
body: {
  name: 'Test Corp',
  type: 'Technology',  // Correct field
}
```

## Production Code Analysis
The production API route (`app/api/corporation/route.ts`) correctly creates shareholder records at lines 154-159:
```typescript
await ShareholderModel.create({
  corporation_id: corporation.id,
  user_id: userId,
  shares: 400000,
});
```

The frontend (`app/corporation/create/page.tsx`) correctly sends `type`:
```typescript
corporationAPI.create({
  name: name.trim(),
  type: type.trim() || undefined,
  focus,
});
```

**Conclusion:** Production code is correct. Only tests were broken.

## Solution
Updated all test cases in `tests/api/corporation/create.test.ts` to use `type` instead of `sector`.

## Changes Made
- `tests/api/corporation/create.test.ts`: Changed all `sector:` to `type:` in request bodies (18 test cases)
- Removed `initial_capital` field from test requests (not used by validation schema)
- Renamed test descriptions from "sector" to "type" for clarity

## TypeScript Verification
0 errors

## Test Results
- 18 tests passed
- Shareholder test: `should create shareholder record for CEO with 400,000 shares` - PASSED

## Created
2026-01-03
