# ==================================
# Corporate Game Platform - Environment Configuration
# ==================================
# Copy this file to .env.local and fill in your actual values
# NEVER commit .env.local to version control!

# ==================================
# DATABASE CONFIGURATION
# ==================================

# MongoDB connection string
# Format: mongodb://[username:password@]host[:port]/database
# Or Atlas: mongodb+srv://username:password@cluster.mongodb.net/database
# REQUIRED: Must be a valid MongoDB connection string
MONGODB_URI=mongodb://localhost:27017/corpgame

# Explicit database name (optional if included in MONGODB_URI)
# If specified, overrides database name from connection string
MONGODB_DB=corpgame

# ==================================
# AUTHENTICATION & SECURITY
# ==================================

# JWT Secret for access tokens (REQUIRED in production)
# CRITICAL: Must be at least 32 characters long
# Generate with: node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
# WARNING: Changing this invalidates all existing tokens
JWT_SECRET=your-secret-key-minimum-32-characters-long-replace-this-with-random-hex

# JWT Secret for refresh tokens (REQUIRED in production)
# CRITICAL: Must be at least 32 characters long and different from JWT_SECRET
# Generate with: node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
# WARNING: Changing this logs out all users
JWT_REFRESH_SECRET=your-refresh-secret-key-minimum-32-characters-long-replace-this-with-random-hex

# Admin registration secret (optional - for controlled admin creation)
# If set, users must provide this secret to register as admin
# Leave empty to allow anyone to register as first admin
ADMIN_SECRET=

# User registration secret (optional - for invite-only registration)
# If set, new users must provide this secret to register
# Leave empty to allow open registration
REGISTRATION_SECRET=

# ==================================
# ADMIN SETUP CONFIGURATION
# ==================================

# Allow admin account creation via /api/admin/setup endpoint
# Set to "true" only during initial setup, then disable
# WARNING: Setting to "false" prevents admin account creation entirely
ALLOW_ADMIN_CREATION=true

# Setup token for admin creation endpoint
# Used as authentication for /api/admin/setup
# SECURITY: Change this from default value immediately after first admin created
ADMIN_SETUP_TOKEN=your-setup-token-here

# Default admin credentials (used by reset scripts)
# SECURITY: Change these defaults before running setup scripts
DEFAULT_ADMIN_USERNAME=admin
DEFAULT_ADMIN_PASSWORD=admin123
DEFAULT_ADMIN_EMAIL=admin@example.com

# ==================================
# GAME CONFIGURATION
# ==================================

# Game start date (ISO 8601 format)
# All game time calculations are relative to this date
# Format: YYYY-MM-DDTHH:mm:ss.sssZ
# Example: 2025-01-01T00:00:00.000Z
GAME_START_DATE=2025-01-01T00:00:00.000Z

# Game speed multiplier (default: 1 = real-time)
# Values > 1: Speed up time (2 = 2x speed, 24 = 1 day = 1 hour)
# Values < 1: Slow down time (0.5 = half speed)
# Use for testing or accelerated gameplay
GAME_SPEED=1

# ==================================
# APPLICATION CONFIGURATION
# ==================================

# Node.js environment
# Values: development | production | test
# Affects error verbosity, caching, optimizations
NODE_ENV=development

# Server port (Next.js default: 3000)
# Change if port 3000 is already in use
PORT=3000

# Public API URL (for client-side API calls)
# In development: Usually http://localhost:3000
# In production: Your deployed domain (e.g., https://corpgame.com)
# Leave empty to use relative URLs (recommended for most cases)
NEXT_PUBLIC_API_URL=

# ==================================
# SECURITY & MIDDLEWARE
# ==================================

# CORS (Cross-Origin Resource Sharing) allowed origins
# Comma-separated list of domains allowed to make API requests
# Development: Automatically allows localhost origins
# Production: REQUIRED - list your frontend domains
# Example: https://corpgame.com,https://www.corpgame.com
CORS_ORIGINS=http://localhost:3000,http://localhost:3001

# ==================================
# VERCEL CRON CONFIGURATION
# ==================================

# Secret for authenticating Vercel Cron requests
# Vercel automatically sends this as Authorization header
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
# REQUIRED if deploying to Vercel with cron jobs
CRON_SECRET=your-cron-secret-replace-with-random-hex

# ==================================
# OPTIONAL FEATURES
# ==================================

# Enable analytics tracking (future feature)
# NEXT_PUBLIC_ENABLE_ANALYTICS=false

# Sentry DSN for error tracking (future feature)
# NEXT_PUBLIC_SENTRY_DSN=

# External API keys (if using third-party services)
# EXTERNAL_API_KEY=

# ==================================
# TESTING CONFIGURATION (for test environment only)
# ==================================

# Test database (use separate database for tests)
# TEST_MONGODB_URI=mongodb://localhost:27017/corpgame_test

# Test JWT secrets (shorter for faster tests)
# TEST_JWT_SECRET=test-secret-key-at-least-32-chars-long
# TEST_JWT_REFRESH_SECRET=test-refresh-secret-key-at-least-32-chars-long

# ==================================
# DEPLOYMENT NOTES
# ==================================

# Production Checklist:
# ✓ Generate strong random JWT_SECRET and JWT_REFRESH_SECRET (64+ characters)
# ✓ Use MongoDB Atlas or secure MongoDB instance with authentication
# ✓ Set ALLOW_ADMIN_CREATION=false after creating first admin
# ✓ Change ADMIN_SETUP_TOKEN from default value
# ✓ Set ADMIN_SECRET to control admin registrations
# ✓ Set REGISTRATION_SECRET if you want invite-only registration
# ✓ Update DEFAULT_ADMIN_* credentials or remove from .env
# ✓ Set NODE_ENV=production
# ✓ Configure NEXT_PUBLIC_API_URL to your production domain
# ✓ Enable SSL/TLS for MongoDB connection
# ✓ Set up proper backup strategy for MongoDB
# ✓ Configure rate limiting and CORS in middleware
# ✓ Review all environment variables before deployment

# Security Best Practices:
# - Never commit .env.local or .env files to version control
# - Use different secrets for development and production
# - Rotate JWT secrets periodically (forces re-authentication)
# - Use environment-specific MongoDB databases
# - Enable MongoDB authentication and network restrictions
# - Use HTTPS in production (automatic with Vercel/Netlify)
# - Store production secrets in secure secret management (Vercel env vars, AWS Secrets Manager, etc.)

# MongoDB Atlas Setup:
# 1. Create cluster at https://cloud.mongodb.com
# 2. Create database user with read/write permissions
# 3. Whitelist your IP address (or 0.0.0.0/0 for development only)
# 4. Get connection string and replace <password> and <dbname>
# 5. Test connection: node scripts/diagnose-system.js

# Local MongoDB Setup:
# 1. Install MongoDB: https://www.mongodb.com/try/download/community
# 2. Start MongoDB: mongod --dbpath /path/to/data
# 3. Use connection string: mongodb://localhost:27017/corpgame
# 4. No authentication needed for local development
