(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6495],{51035:function(e,r,t){Promise.resolve().then(t.bind(t,91811))},91811:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return I}});var a=t(37821),s=t(58078),l=t(58504),o=t(74542),d=t(39447),i=t(34621),n=t(47315),c=t(91366),x=t(79775),m=t(19781),g=t(37828),b=t(17329),h=t(91671),u=t(82819),p=t(49198),y=t(82255),f=t(16922),j=t(12758),k=t(54592),v=t(43336),w=t(26200),N=t(64790),_=t(3116),S=t(69086);function C(e){let{isOpen:r,onClose:l,recipientId:o,recipientName:d,onSuccess:i}=e,[n,x]=(0,s.useState)(""),[g,b]=(0,s.useState)(""),[h,u]=(0,s.useState)(!1),[p,y]=(0,s.useState)(""),[f,j]=(0,s.useState)(!1),[k,v]=(0,s.useState)(0),[w,C]=(0,s.useState)(null);(0,s.useEffect)(()=>{r&&null===w&&(async()=>{try{let e=await N.kv.getMe();if(e.profile_id)try{let{profileAPI:r}=await Promise.resolve().then(t.bind(t,64790)),a=await r.getById(e.profile_id.toString());void 0!==a.cash&&C(a.cash)}catch(e){console.warn("Could not fetch cash from profile, using placeholder"),C(1e4)}}catch(e){console.error("Failed to fetch cash:",e)}})()},[r,w]),(0,s.useEffect)(()=>{r||(x(""),b(""),y(""),j(!1),u(!1),v(0))},[r]);let Z=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(e),F=async e=>{e.preventDefault(),y(""),u(!0);let r=parseFloat(n);if(isNaN(r)||r<=0){y("Please enter a valid amount greater than 0"),u(!1);return}if(null!==w&&r>w){y("Insufficient funds. You have ".concat(Z(w))),u(!1);return}try{let e=await N.aZ.transfer({recipient_id:o,amount:r,note:g.trim()||void 0});v(r),void 0!==e.sender_new_balance&&C(e.sender_new_balance),j(!0),y(""),i&&void 0!==e.sender_new_balance&&i(e.sender_new_balance),setTimeout(()=>{x(""),b(""),j(!1),v(0),l()},2e3)}catch(e){var t,a;y((null===(a=e.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.error)||"Failed to send cash. Please try again."),j(!1)}finally{u(!1)}};return r?(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:(0,a.jsxs)("div",{className:"relative w-full max-w-md rounded-2xl border shadow-2xl dark:border-gray-700/50 bloomberg:border-bloomberg-green max-h-[90vh] overflow-y-auto",style:{backgroundColor:"rgb(var(--background-start-rgb))",borderColor:"rgba(var(--foreground-rgb), 0.2)"},children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-corporate-blue/5 via-transparent to-corporate-blue-light/5 dark:from-corporate-blue/10 dark:via-transparent dark:to-corporate-blue-dark/10 bloomberg:from-bloomberg-green/5 bloomberg:via-transparent bloomberg:to-bloomberg-green/5 pointer-events-none rounded-2xl"}),(0,a.jsxs)("div",{className:"relative p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Send Cash"}),(0,a.jsx)("button",{onClick:l,className:"rounded-lg p-1 text-gray-500 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-800 transition-colors",children:(0,a.jsx)(_.Z,{className:"w-5 h-5"})})]}),(0,a.jsxs)("div",{className:"mb-4 rounded-lg bg-gray-50 dark:bg-gray-800/50 p-3",children:[(0,a.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Sending to: ",(0,a.jsx)("span",{className:"font-semibold text-gray-900 dark:text-white",children:d})]}),null!==w&&(0,a.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:["Your balance: ",(0,a.jsx)("span",{className:"font-semibold",children:Z(w)})]})]}),(0,a.jsxs)("form",{onSubmit:F,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"amount",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Amount"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,a.jsx)(m.Z,{className:"h-5 w-5 text-gray-400"})}),(0,a.jsx)("input",{type:"number",id:"amount",min:"0.01",step:"0.01",value:n,onChange:e=>x(e.target.value),placeholder:"0.00",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm focus:ring-2 focus:ring-corporate-blue focus:border-transparent",required:!0,disabled:h})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"note",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Note (optional)"}),(0,a.jsx)("textarea",{id:"note",rows:3,value:g,onChange:e=>b(e.target.value),placeholder:"Add a note for this transfer...",className:"block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm focus:ring-2 focus:ring-corporate-blue focus:border-transparent resize-none",disabled:h,maxLength:500}),(0,a.jsxs)("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:[g.length,"/500"]})]}),f&&(0,a.jsxs)("div",{className:"flex items-center gap-2 rounded-lg bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 p-3",children:[(0,a.jsx)(c.Z,{className:"w-5 h-5 text-green-600 dark:text-green-400 flex-shrink-0"}),(0,a.jsxs)("p",{className:"text-sm text-green-600 dark:text-green-400",children:["Successfully sent ",Z(k)," to ",d,"!"]})]}),p&&(0,a.jsxs)("div",{className:"flex items-center gap-2 rounded-lg bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 p-3",children:[(0,a.jsx)(S.Z,{className:"w-5 h-5 text-red-600 dark:text-red-400 flex-shrink-0"}),(0,a.jsx)("p",{className:"text-sm text-red-600 dark:text-red-400",children:p})]}),(0,a.jsxs)("div",{className:"flex flex-col-reverse sm:flex-row gap-3 pt-2",children:[(0,a.jsx)("button",{type:"button",onClick:l,disabled:h,className:"flex-1 px-4 py-3 sm:py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-semibold",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",disabled:h||f||!n||0>=parseFloat(n),className:"flex-1 px-4 py-3 sm:py-2 bg-corporate-blue text-white rounded-lg hover:bg-corporate-blue-dark disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-semibold flex items-center justify-center gap-2",children:h?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Sending..."]}):f?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.Z,{className:"w-4 h-4"}),"Sent!"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(m.Z,{className:"w-4 h-4"}),"Send Cash"]})})]})]})]})]})}):null}var Z=t(14628),F=t(48908);function E(e){var r,t,_,S;let{profileId:E}=e,I=(0,l.useRouter)(),[P,D]=(0,s.useState)(null),[M,A]=(0,s.useState)(null),[T,O]=(0,s.useState)(!1),[U,L]=(0,s.useState)(null),[B,$]=(0,s.useState)(null),[R,z]=(0,s.useState)(null),[Y,q]=(0,s.useState)(0),[H,J]=(0,s.useState)(0),[Q,V]=(0,s.useState)(null),[G,K]=(0,s.useState)(null),[W,X]=(0,s.useState)(!0),[ee,er]=(0,s.useState)(""),[et,ea]=(0,s.useState)(!1),[es,el]=(0,s.useState)(!1),[eo,ed]=(0,s.useState)(!1),[ei,en]=(0,s.useState)([]),[ec,ex]=(0,s.useState)(null);if((0,s.useEffect)(()=>{(async()=>{X(!0),er("");try{let e=await N.profileAPI.getById(E);D(e),void 0!==e.cash&&q(e.cash),void 0!==e.actions&&J(e.actions);try{let r=(await N.y7.getAll()).filter(r=>{var t;return(null===(t=r.ceo)||void 0===t?void 0:t.profile_id)===e.profile_id});if(r.length>0){$(r[0]);try{let e=await N.QT.getCorporationFinances(r[0].id);ex(e.finances)}catch(e){console.warn("Failed to fetch corporation finances:",e)}}}catch(e){console.warn("Failed to fetch corporations:",e)}try{let r=await N.kv.getMe().catch(()=>null),t=null;if(t=r&&r.profile_id===e.profile_id?r.id:e.id){try{let e=await N.bf.getByUserId(t);z(e)}catch(e){console.warn("Portfolio not found for user:",e)}try{let e=await N.profileAPI.getHistory(t);en(e.history)}catch(e){console.warn("Failed to fetch corporate history:",e)}}}catch(e){console.warn("Failed to fetch portfolio:",e)}V(null),K(null)}catch(e){console.error("Profile load error:",e),er("Unable to load this profile.")}finally{X(!1)}})()},[E]),(0,s.useEffect)(()=>{(async()=>{if(localStorage.getItem("token"))try{let e=await N.kv.getMe();if(A(e.profile_id),O(!!e.is_admin),e.profile_id){let r=await N.profileAPI.getById(e.profile_id.toString());L(r)}}catch(e){console.warn("Viewer not authenticated:",e)}})()},[]),W)return(0,a.jsx)(d.Z,{children:(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)("div",{className:"text-lg text-gray-600 dark:text-gray-200",children:"Loading profile..."})})});if(ee||!P)return(0,a.jsx)(d.Z,{children:(0,a.jsxs)("div",{className:"min-h-screen flex flex-col items-center justify-center space-y-4 text-center",children:[(0,a.jsx)("p",{className:"text-xl text-gray-700 dark:text-gray-200",children:ee||"Profile not found."}),(0,a.jsx)("button",{onClick:()=>I.push("/"),className:"px-4 py-2 bg-corporate-blue text-white rounded-md",children:"Return Home"})]})});let em=P.player_name||P.username||"Executive";P.starting_state;let eg=M===P.profile_id,eb="".concat(P.profile_id),eh="".concat(window.location.origin,"/profile/").concat(eb),eu=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(e),ep=B?{name:B.name,revenue:ec?eu(ec.display_revenue):"$0",profit:ec?eu(ec.display_profit):"$0",ownership:(null===(r=B.ceo)||void 0===r?void 0:r.profile_id)===(null==P?void 0:P.profile_id)?"80%":"0%",marketCap:eu(B.shares*B.share_price),id:B.id}:{name:"No Corporation",revenue:"$0",profit:"$0",ownership:"0%",marketCap:"$0",id:null},ey=(null==R?void 0:R.total_value)||0,ef=P.is_admin?"Administrator":"Executive",ej=P.created_at?new Date(P.created_at).toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"}):"Date unavailable",ek=async()=>{if(eh&&"undefined"!=typeof navigator)try{if(navigator.clipboard&&navigator.clipboard.writeText)await navigator.clipboard.writeText(eh);else{let e=document.createElement("textarea");e.value=eh,e.style.position="fixed",e.style.left="-999999px",e.style.top="-999999px",document.body.appendChild(e),e.focus(),e.select();try{if(!document.execCommand("copy"))throw Error("Fallback copy method failed")}finally{document.body.removeChild(e)}}ea(!0),setTimeout(()=>ea(!1),1800)}catch(e){console.error("Copy link failed:",e),alert("Unable to copy link. Please copy manually: "+eh)}};return(0,a.jsx)(d.Z,{children:(0,a.jsxs)("div",{className:"relative mx-auto max-w-[90rem] px-4 py-10 sm:px-6 lg:px-8 space-y-8",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[(0,a.jsx)("div",{children:(0,a.jsx)("h1",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:em})}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,a.jsxs)("button",{onClick:ek,className:"inline-flex items-center gap-2 rounded-full border border-gray-200 bg-white/80 px-4 py-2 text-sm font-semibold text-gray-800 shadow-sm transition hover:-translate-y-0.5 hover:border-corporate-blue hover:shadow-md dark:border-gray-700 dark:bg-gray-900/80 dark:text-gray-100",children:[(0,a.jsx)(i.Z,{className:"w-4 h-4"}),et?"Copied profile link":"Copy profile link",!et&&(0,a.jsx)(n.Z,{className:"w-4 h-4 text-gray-400"}),et&&(0,a.jsx)(c.Z,{className:"w-4 h-4 text-corporate-blue"})]}),(0,a.jsxs)("button",{onClick:()=>I.push("/settings"),className:"inline-flex items-center gap-2 rounded-full bg-gradient-to-r from-corporate-blue to-corporate-blue-light px-4 py-2 text-sm font-semibold text-white shadow-md transition hover:-translate-y-0.5 hover:shadow-lg dark:from-corporate-blue/90 dark:to-corporate-blue-light/90",children:[(0,a.jsx)(x.Z,{className:"w-4 h-4"}),"Settings"]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-[1fr_0.85fr] xl:grid-cols-[1.1fr_0.9fr] 2xl:grid-cols-[1.2fr_1fr]",children:[(0,a.jsxs)("section",{className:"space-y-6 min-w-0",children:[(0,a.jsxs)("div",{className:"relative overflow-hidden rounded-2xl border border-white/60 bg-white/80 shadow-2xl backdrop-blur dark:border-gray-800/60 dark:bg-gray-900/70",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-corporate-blue/12 via-transparent to-corporate-blue-light/20 dark:from-corporate-blue/18 dark:via-transparent dark:to-corporate-blue-dark/30"}),(0,a.jsxs)("div",{className:"relative p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col items-center text-center",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:em}),(0,a.jsx)("div",{className:"flex flex-wrap items-center justify-center gap-2 mb-4",children:(0,a.jsx)("span",{className:"rounded-full bg-corporate-blue/10 px-3 py-1 text-xs font-semibold text-corporate-blue dark:bg-corporate-blue/20",children:ef})}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute -inset-1 rounded-2xl bg-gradient-to-br from-corporate-blue/30 to-corporate-blue-light/40 blur-xl dark:from-corporate-blue/40 dark:to-corporate-blue-dark/40"}),(0,a.jsx)("div",{className:"relative flex h-32 w-32 items-center justify-center overflow-hidden rounded-2xl border border-white/60 bg-white/70 shadow-lg dark:border-gray-800/80 dark:bg-gray-800/70",children:(0,a.jsx)("img",{src:P.profile_image_url||"/defaultpfp.jpg",alt:"Profile",className:"h-full w-full object-cover",onError:e=>{e.currentTarget.src="/defaultpfp.jpg"}})})]})]}),(0,a.jsxs)("div",{className:"grid gap-4 sm:grid-cols-3",children:[(0,a.jsxs)("div",{className:"rounded-xl border border-white/60 bg-white/70 p-4 shadow-sm dark:border-gray-800/70 dark:bg-gray-800/70",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xs font-bold uppercase tracking-[0.1em] text-gray-500 dark:text-gray-400",children:[(0,a.jsx)(m.Z,{className:"h-4 w-4"}),"Portfolio Value"]}),null!==Q&&(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 text-xs font-semibold text-corporate-blue dark:text-corporate-blue-light",children:[(0,a.jsx)(g.Z,{className:"h-3 w-3"}),"#",Q]})]}),(0,a.jsx)("p",{className:"text-xl font-bold text-gray-900 dark:text-white",children:(0,F.E)(ey)})]}),(0,a.jsxs)("div",{className:"rounded-xl border border-white/60 bg-white/70 p-4 shadow-sm dark:border-gray-800/70 dark:bg-gray-800/70 group relative",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xs font-bold uppercase tracking-[0.1em] text-gray-500 dark:text-gray-400",children:[(0,a.jsx)(m.Z,{className:"h-4 w-4"}),"Cash"]}),null!==G&&(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 text-xs font-semibold text-corporate-blue dark:text-corporate-blue-light",children:[(0,a.jsx)(g.Z,{className:"h-3 w-3"}),"#",G]})]}),(0,a.jsx)("p",{className:"text-xl font-bold text-gray-900 dark:text-white",children:(0,F.E)(Y)}),B&&(null!==(t=B.ceo_salary)&&void 0!==t?t:1e5)>0&&(0,a.jsxs)("div",{className:"mt-2 flex items-center gap-1",children:[(0,a.jsxs)("span",{className:"px-2 py-0.5 text-xs font-semibold bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300 rounded-full",title:"CEO salary: $".concat((null!==(_=B.ceo_salary)&&void 0!==_?_:1e5).toLocaleString()," per 96 hours from ").concat(B.name),children:["+$",((null!==(S=B.ceo_salary)&&void 0!==S?S:1e5)/96).toLocaleString(void 0,{maximumFractionDigits:2}),"/hr"]}),(0,a.jsx)("span",{className:"text-xs text-gray-400 dark:text-gray-500",children:"CEO"})]})]}),(0,a.jsxs)("div",{className:"rounded-xl border border-amber-200/60 bg-amber-50/70 p-4 shadow-sm dark:border-amber-800/70 dark:bg-amber-900/30",children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-2",children:(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xs font-bold uppercase tracking-[0.1em] text-amber-600 dark:text-amber-400",children:[(0,a.jsx)(b.Z,{className:"h-4 w-4"}),"Actions"]})}),(0,a.jsx)("p",{className:"text-xl font-bold text-amber-700 dark:text-amber-300",children:H})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-300 text-center",children:["Executive at"," ",ep.id?(0,a.jsx)(o.default,{href:"/corporation/".concat(ep.id),className:"font-semibold text-gray-900 dark:text-white hover:text-corporate-blue transition-colors",children:ep.name}):(0,a.jsx)("span",{className:"font-semibold text-gray-900 dark:text-white",children:ep.name})]}),(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2 text-xs text-gray-500 dark:text-gray-400",children:[(0,a.jsx)(h.Z,{className:"h-3 w-3"}),(0,a.jsxs)("span",{children:["Joined ",ej]})]}),void 0!==P.last_seen_at&&(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2 text-xs ".concat(P.is_online?"text-green-600 dark:text-green-400":"text-gray-500 dark:text-gray-400"),children:[(0,a.jsx)(u.Z,{className:"h-2 w-2 ".concat(P.is_online?"fill-green-500":"fill-gray-400")}),(0,a.jsx)("span",{children:((e,r)=>{if(r)return"Online now";if(!e)return"Never seen";let t=new Date(e),a=new Date,s=a.getTime()-t.getTime(),l=Math.floor(s/6e4),o=Math.floor(s/36e5),d=Math.floor(s/864e5),i=Math.floor(d/7),n=Math.floor(d/30);return l<1?"Just now":l<60?"".concat(l,"m ago"):o<24?"".concat(o,"h ago"):d<7?"".concat(d,"d ago"):i<4?"".concat(i,"w ago"):n<12?"".concat(n,"mo ago"):t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:t.getFullYear()!==a.getFullYear()?"numeric":void 0})})(P.last_seen_at,P.is_online)})]})]})]}),P.bio&&(0,a.jsxs)("div",{className:"mt-4 rounded-xl border border-white/60 bg-white/70 p-4 shadow-sm dark:border-gray-800/70 dark:bg-gray-800/70",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xs font-semibold uppercase text-gray-500 dark:text-gray-400 mb-2",children:[(0,a.jsx)(p.Z,{className:"h-4 w-4"}),"Bio"]}),(0,a.jsx)("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:P.bio})]}),(0,a.jsx)("div",{className:"relative border-t border-gray-200/70 px-6 py-4 dark:border-gray-800",children:(0,a.jsx)("div",{className:"flex flex-wrap items-center gap-3",children:(0,a.jsxs)("span",{className:"inline-flex items-center gap-2 rounded-full bg-corporate-blue/10 px-3 py-1 text-xs font-semibold text-corporate-blue dark:bg-corporate-blue/20",children:[(0,a.jsx)(i.Z,{className:"h-4 w-4"}),"Profile ID #",eb]})})})]}),(0,a.jsxs)("div",{className:"rounded-2xl border border-white/60 bg-white/80 p-6 shadow-xl backdrop-blur dark:border-gray-800/60 dark:bg-gray-900/70",children:[(0,a.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs font-semibold uppercase tracking-wide text-gray-500 dark:text-gray-400",children:"Corporate history"}),(0,a.jsx)("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Timeline"})]}),(0,a.jsx)(y.Z,{className:"h-5 w-5 text-corporate-blue"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[ei.map((e,r)=>{let t=new Date(e.date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),s=(()=>{switch(e.type){case"founded":return{bgClass:"bg-gradient-to-br from-emerald-500 to-emerald-600 text-white",icon:(0,a.jsx)(f.Z,{className:"h-4 w-4"}),label:"Founded ".concat(e.corporation_name)};case"elected_ceo":return{bgClass:"bg-gradient-to-br from-corporate-blue to-corporate-blue-light text-white",icon:(0,a.jsx)(g.Z,{className:"h-4 w-4"}),label:"Elected CEO of ".concat(e.corporation_name)};case"lost_ceo":return{bgClass:"bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-300",icon:(0,a.jsx)(f.Z,{className:"h-4 w-4"}),label:"Left CEO position at ".concat(e.corporation_name)};case"ceo_resigned":return{bgClass:"bg-amber-100 text-amber-600 dark:bg-amber-900/50 dark:text-amber-400",icon:(0,a.jsx)(h.Z,{className:"h-4 w-4"}),label:"Resigned as CEO of ".concat(e.corporation_name)};default:return{bgClass:"bg-gray-100 text-gray-600 dark:bg-gray-800 dark:text-gray-300",icon:(0,a.jsx)(f.Z,{className:"h-4 w-4"}),label:e.details||"Corporate event"}}})(),l=r===ei.length-1;return(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsxs)("div",{className:"relative",children:[!l&&(0,a.jsx)("div",{className:"absolute inset-x-1/2 top-8 h-full w-px -translate-x-1/2 bg-gray-200 dark:bg-gray-700"}),(0,a.jsx)("div",{className:"relative flex h-8 w-8 items-center justify-center rounded-full shadow-sm ".concat(s.bgClass),children:s.icon})]}),(0,a.jsxs)(o.default,{href:"/corporation/".concat(e.corporation_id),className:"flex-1 rounded-xl border border-white/60 bg-white/70 p-4 shadow-sm transition hover:-translate-y-0.5 hover:shadow-md hover:border-corporate-blue/30 dark:border-gray-800/70 dark:bg-gray-800/60",children:[(0,a.jsx)("p",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:s.label}),(0,a.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:t}),e.details&&"founded"!==e.type&&(0,a.jsx)("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1",children:e.details})]})]},"".concat(e.type,"-").concat(e.corporation_id,"-").concat(e.date))}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("div",{className:"relative",children:(0,a.jsx)("div",{className:"relative flex h-8 w-8 items-center justify-center rounded-full bg-gray-100 text-gray-500 shadow-sm dark:bg-gray-800 dark:text-gray-400",children:(0,a.jsx)(p.Z,{className:"h-4 w-4"})})}),(0,a.jsxs)("div",{className:"flex-1 rounded-xl border border-white/60 bg-white/70 p-4 shadow-sm dark:border-gray-800/70 dark:bg-gray-800/60",children:[(0,a.jsx)("p",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:"Profile created"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:ej})]})]}),0===ei.length&&(0,a.jsx)("div",{className:"text-center py-4",children:(0,a.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No corporate positions yet"})})]})]})]}),(0,a.jsxs)("aside",{className:"space-y-6 min-w-0",children:[(0,a.jsxs)("div",{className:"rounded-2xl border border-white/60 bg-white/80 p-6 shadow-xl backdrop-blur dark:border-gray-800/60 dark:bg-gray-900/70",children:[(0,a.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs font-semibold uppercase tracking-wide text-gray-500 dark:text-gray-400",children:"Quick Actions"}),(0,a.jsx)("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:eg?"Corporate Management":"User Actions"})]}),(0,a.jsx)(x.Z,{className:"h-5 w-5 text-corporate-blue"})]}),eg?(0,a.jsxs)("div",{className:"space-y-4 text-sm text-gray-700 dark:text-gray-300",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between rounded-xl border border-white/60 bg-white/70 p-3 shadow-sm dark:border-gray-800/70 dark:bg-gray-800/60",children:[(0,a.jsx)("span",{children:"Buy/Sell Investments"}),(0,a.jsx)("button",{className:"px-3 py-1 text-xs font-medium rounded-md border border-gray-200 text-gray-700 hover:bg-gray-100 dark:border-gray-700 dark:text-gray-200 dark:hover:bg-gray-800",children:"Manage"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between rounded-xl border border-white/60 bg-white/70 p-3 shadow-sm dark:border-gray-800/70 dark:bg-gray-800/60",children:[(0,a.jsx)("span",{children:"Build Production Units"}),(0,a.jsx)("button",{className:"px-3 py-1 text-xs font-medium rounded-md border border-gray-200 text-gray-700 hover:bg-gray-100 dark:border-gray-700 dark:text-gray-200 dark:hover:bg-gray-800",children:"Build"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between rounded-xl border border-white/60 bg-white/70 p-3 shadow-sm dark:border-gray-800/70 dark:bg-gray-800/60",children:[(0,a.jsx)("span",{children:"Set Corporate Policy"}),(0,a.jsx)("button",{className:"px-3 py-1 text-xs font-medium rounded-md border border-gray-200 text-gray-700 hover:bg-gray-100 dark:border-gray-700 dark:text-gray-200 dark:hover:bg-gray-800",children:"Configure"})]})]}):(0,a.jsxs)("div",{className:"space-y-4 text-sm text-gray-700 dark:text-gray-300",children:[(0,a.jsxs)("button",{onClick:()=>el(!0),className:"w-full flex items-center justify-between rounded-xl border border-white/60 bg-white/70 p-3 shadow-sm hover:bg-gray-50 dark:border-gray-800/70 dark:bg-gray-800/60 dark:hover:bg-gray-700 transition-colors",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(m.Z,{className:"h-4 w-4 text-corporate-blue"}),(0,a.jsx)("span",{children:"Send Cash"})]}),(0,a.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Transfer money"})]}),(0,a.jsxs)("button",{onClick:()=>ed(!0),className:"w-full flex items-center justify-between rounded-xl border border-white/60 bg-white/70 p-3 shadow-sm hover:bg-gray-50 dark:border-gray-800/70 dark:bg-gray-800/60 dark:hover:bg-gray-700 transition-colors",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(p.Z,{className:"h-4 w-4 text-corporate-blue"}),(0,a.jsx)("span",{children:"Send Message"})]}),(0,a.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Start conversation"})]})]})]}),(0,a.jsxs)("div",{className:"rounded-2xl border border-white/60 bg-white/80 p-6 shadow-xl backdrop-blur dark:border-gray-800/60 dark:bg-gray-900/70",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs font-semibold uppercase tracking-wide text-gray-500 dark:text-gray-400",children:"Primary corporation"}),ep.id?(0,a.jsx)(o.default,{href:"/corporation/".concat(ep.id),className:"text-lg font-semibold text-gray-900 dark:text-white hover:text-corporate-blue transition-colors",children:ep.name}):(0,a.jsx)("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:ep.name})]}),(0,a.jsx)("span",{className:"rounded-full bg-corporate-blue/10 px-3 py-1 text-xs font-semibold text-corporate-blue dark:bg-corporate-blue/20",children:"Stable"})]}),(0,a.jsxs)("div",{className:"mt-4 grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[(0,a.jsxs)("div",{className:"rounded-xl border border-white/60 bg-white/70 p-4 shadow-sm dark:border-gray-800/70 dark:bg-gray-800/60",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700 dark:text-gray-200",children:[(0,a.jsx)(m.Z,{className:"h-4 w-4 text-corporate-blue"}),"Revenue"]}),(0,a.jsx)("p",{className:"mt-2 text-gray-600 dark:text-gray-300",children:ep.revenue})]}),(0,a.jsxs)("div",{className:"rounded-xl border border-white/60 bg-white/70 p-4 shadow-sm dark:border-gray-800/70 dark:bg-gray-800/60",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700 dark:text-gray-200",children:[(0,a.jsx)(j.Z,{className:"h-4 w-4 text-corporate-blue"}),"Profit"]}),(0,a.jsx)("p",{className:"mt-2 text-gray-600 dark:text-gray-300",children:ep.profit})]}),(0,a.jsxs)("div",{className:"rounded-xl border border-white/60 bg-white/70 p-4 shadow-sm dark:border-gray-800/70 dark:bg-gray-800/60",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700 dark:text-gray-200",children:[(0,a.jsx)(k.Z,{className:"h-4 w-4 text-corporate-blue"}),"Ownership"]}),(0,a.jsx)("p",{className:"mt-2 text-gray-600 dark:text-gray-300",children:ep.ownership})]}),(0,a.jsxs)("div",{className:"rounded-xl border border-white/60 bg-white/70 p-4 shadow-sm dark:border-gray-800/70 dark:bg-gray-800/60",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700 dark:text-gray-200",children:[(0,a.jsx)(v.Z,{className:"h-4 w-4 text-corporate-blue"}),"Market cap"]}),(0,a.jsx)("p",{className:"mt-2 text-gray-600 dark:text-gray-300",children:ep.marketCap})]})]}),ec&&ec.markets_count>0?(0,a.jsx)("div",{className:"mt-5 rounded-xl border border-emerald-200/50 bg-emerald-50/50 p-4 text-sm text-emerald-700 dark:border-emerald-800/50 dark:bg-emerald-900/20 dark:text-emerald-300",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(w.Z,{className:"h-4 w-4"}),"Active in ",ec.markets_count," market",1!==ec.markets_count?"s":""," with ",ec.total_retail_units+ec.total_production_units+ec.total_service_units," total units. Revenue figures are 96-hour projections."]})}):(0,a.jsx)("div",{className:"mt-5 rounded-xl border border-dashed border-corporate-blue/30 bg-corporate-blue/5 p-4 text-sm text-corporate-blue dark:border-corporate-blue/30 dark:bg-corporate-blue/10",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(w.Z,{className:"h-4 w-4"}),"No market operations yet. Enter markets via the States page to generate revenue."]})})]})]})]}),P&&!eg&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(C,{isOpen:es,onClose:()=>el(!1),recipientId:P.id,recipientName:em,onSuccess:e=>{q(e),eg&&U&&L({...U,cash:e}),(async()=>{try{let e=await N.profileAPI.getById(E);D(e),void 0!==e.cash&&q(e.cash)}catch(e){console.warn("Failed to refresh profile after cash transfer:",e)}})()}}),(0,a.jsx)(Z.Z,{isOpen:eo,onClose:()=>ed(!1),recipientId:P.id,recipientName:em})]})]})})}function I(e){let{params:r}=e;return(0,a.jsx)(E,{profileId:r.id})}},14628:function(e,r,t){"use strict";t.d(r,{Z:function(){return n}});var a=t(37821),s=t(58078),l=t(3116),o=t(69086),d=t(17737),i=t(64790);function n(e){let{isOpen:r,onClose:t,recipientId:n,recipientName:c,onSuccess:x}=e,[m,g]=(0,s.useState)((null==n?void 0:n.toString())||""),[b,h]=(0,s.useState)(c||""),[u,p]=(0,s.useState)(""),[y,f]=(0,s.useState)(""),[j,k]=(0,s.useState)(!1),[v,w]=(0,s.useState)("");(0,s.useEffect)(()=>{r&&(g((null==n?void 0:n.toString())||""),h(c||""),p(""),f(""),w(""))},[r,n,c]);let N=async e=>{e.preventDefault(),w(""),k(!0);let r=parseInt(m,10);if(isNaN(r)){w("Please enter a valid recipient ID"),k(!1);return}if(!y.trim()){w("Message body cannot be empty"),k(!1);return}if(y.length>1e4){w("Message body cannot exceed 10000 characters"),k(!1);return}try{await i.Il.send({recipient_id:r,subject:u.trim()||void 0,body:y.trim()}),g(""),h(""),p(""),f(""),w(""),x&&x(),t()}catch(e){var a,s;w((null===(s=e.response)||void 0===s?void 0:null===(a=s.data)||void 0===a?void 0:a.error)||"Failed to send message. Please try again.")}finally{k(!1)}};return r?(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:(0,a.jsxs)("div",{className:"relative w-full max-w-2xl rounded-2xl border border-gray-200/50 bg-white shadow-2xl dark:border-gray-700/50 dark:bg-gray-900 max-h-[90vh] overflow-y-auto",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-corporate-blue/5 via-transparent to-corporate-blue-light/5 dark:from-corporate-blue/10 dark:via-transparent dark:to-corporate-blue-dark/10 pointer-events-none"}),(0,a.jsxs)("div",{className:"relative p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Compose Message"}),(0,a.jsx)("button",{onClick:t,className:"rounded-lg p-1 text-gray-500 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-800 transition-colors",children:(0,a.jsx)(l.Z,{className:"w-5 h-5"})})]}),(0,a.jsxs)("form",{onSubmit:N,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{htmlFor:"recipient",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Recipient ",n?"(pre-filled)":"ID"]}),(0,a.jsx)("input",{type:"number",id:"recipient",value:m,onChange:e=>g(e.target.value),placeholder:"Enter recipient profile ID",className:"block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm focus:ring-2 focus:ring-corporate-blue focus:border-transparent",required:!0,disabled:j||!!n}),b&&(0,a.jsxs)("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:["To: ",(0,a.jsx)("span",{className:"font-semibold",children:b})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"subject",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Subject (optional)"}),(0,a.jsx)("input",{type:"text",id:"subject",value:u,onChange:e=>p(e.target.value),placeholder:"Message subject",className:"block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm focus:ring-2 focus:ring-corporate-blue focus:border-transparent",disabled:j,maxLength:255}),(0,a.jsxs)("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:[u.length,"/255"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"body",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Message"}),(0,a.jsx)("textarea",{id:"body",rows:5,value:y,onChange:e=>f(e.target.value),placeholder:"Type your message here...",className:"block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm focus:ring-2 focus:ring-corporate-blue focus:border-transparent resize-none sm:min-h-[200px]",required:!0,disabled:j,maxLength:1e4}),(0,a.jsxs)("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:[y.length,"/10000"]})]}),v&&(0,a.jsxs)("div",{className:"flex items-center gap-2 rounded-lg bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 p-3",children:[(0,a.jsx)(o.Z,{className:"w-5 h-5 text-red-600 dark:text-red-400 flex-shrink-0"}),(0,a.jsx)("p",{className:"text-sm text-red-600 dark:text-red-400",children:v})]}),(0,a.jsxs)("div",{className:"flex flex-col-reverse sm:flex-row gap-3 pt-2",children:[(0,a.jsx)("button",{type:"button",onClick:t,disabled:j,className:"flex-1 px-4 py-3 sm:py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-semibold",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",disabled:j||!y.trim()||!m,className:"flex-1 px-4 py-3 sm:py-2 bg-corporate-blue text-white rounded-lg hover:bg-corporate-blue-dark disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-semibold flex items-center justify-center gap-2",children:j?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Sending..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.Z,{className:"w-4 h-4"}),"Send Message"]})})]})]})]})]})}):null}}},function(e){e.O(0,[4568,4542,763,4790,9447,7115,2364,1744],function(){return e(e.s=51035)}),_N_E=e.O()}]);