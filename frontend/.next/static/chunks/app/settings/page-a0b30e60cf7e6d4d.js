(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6938],{65438:function(e,r,t){Promise.resolve().then(t.bind(t,68946))},68946:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return b}});var a=t(37821),o=t(58078),l=t(58504),s=t(70534),g=t(42348);let i=(0,t(76576).Z)("monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);var d=t(64790),n=t(37092);function b(){let e=(0,l.useRouter)(),{theme:r,setTheme:t}=(0,n.F)(),[b,c]=(0,o.useState)(null),[m,x]=(0,o.useState)(!0),[u,h]=(0,o.useState)(!1),[y,p]=(0,o.useState)(!1),[f,k]=(0,o.useState)(null),[v,j]=(0,o.useState)(""),[N,w]=(0,o.useState)(!1),[C,S]=(0,o.useState)(!1),[P,_]=(0,o.useState)(!1);(0,o.useEffect)(()=>{(async()=>{if(!localStorage.getItem("token")){e.push("/login");return}try{let e=await d.kv.getMe();c(e),j(e.bio||"I'm a new user, say hi!")}catch(r){localStorage.removeItem("token"),localStorage.removeItem("user"),e.push("/login")}finally{x(!1)}})()},[e]);let E=e=>{e!==r&&t(e)},M=async()=>{if(b){w(!0);try{await d.profileAPI.updateProfile({bio:v}),c(e=>e?{...e,bio:v}:null)}catch(e){console.error("Bio update failed:",e),j(b.bio||"I'm a new user, say hi!")}finally{w(!1)}}},I=async e=>{var r,t,a,o;let l=null===(r=e.target.files)||void 0===r?void 0:r[0];if(!l){console.log("No file selected");return}if(console.log("File selected:",{name:l.name,type:l.type,size:l.size}),!["image/jpeg","image/png","image/webp"].includes(l.type)){k("Please upload a JPG, PNG, or WEBP image.");return}if(l.size>2097152){k("Max file size is 2MB.");return}k(null),p(!0),console.log("Starting avatar upload...");try{let e=await d.profileAPI.uploadAvatar(l);console.log("Avatar upload result:",e),c(r=>r?{...r,profile_image_url:e.profile_image_url}:r),console.log("User state updated with new profile_image_url")}catch(e){console.error("Avatar upload failed:",e),console.error("Error response:",null==e?void 0:null===(t=e.response)||void 0===t?void 0:t.data),k((null==e?void 0:null===(o=e.response)||void 0===o?void 0:null===(a=o.data)||void 0===a?void 0:a.error)||"Upload failed. Please try again.")}finally{p(!1),e.target.value=""}};return m?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 text-gray-600 dark:text-gray-300",children:"Loading your settings..."}):(0,a.jsx)("div",{className:"min-h-screen text-[rgb(var(--foreground-rgb))] py-10 px-4 bloomberg:bg-black bloomberg:text-[#00ff41]",style:{background:"linear-gradient(to bottom, transparent, rgb(var(--background-end-rgb))) rgb(var(--background-start-rgb))"},children:(0,a.jsxs)("div",{className:"max-w-3xl mx-auto space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm uppercase tracking-wide text-gray-500 dark:text-gray-400 bloomberg:text-bloomberg-green-dim",children:"Account"}),(0,a.jsx)("h1",{className:"text-3xl font-semibold text-gray-900 dark:text-white bloomberg:text-bloomberg-green",children:"Settings"})]}),(0,a.jsx)("button",{onClick:()=>e.back(),className:"px-4 py-2 text-sm font-medium rounded-md border text-gray-700 hover:bg-gray-100 dark:border-gray-700 dark:text-gray-200 dark:hover:bg-gray-800 bloomberg:border-bloomberg-green bloomberg:text-bloomberg-green bloomberg:hover:bg-bloomberg-green/10",style:{borderColor:"rgba(var(--foreground-rgb), 0.2)"},children:"Go Back"})]}),(0,a.jsxs)("section",{className:"rounded-xl shadow-sm border",style:{backgroundColor:"rgb(var(--background-start-rgb))",borderColor:"rgba(var(--foreground-rgb), 0.15)"},children:[(0,a.jsxs)("div",{className:"px-6 py-4 border-b border-gray-100 dark:border-gray-700/60",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold",children:"Account Details"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"This information comes from your profile."})]}),(0,a.jsxs)("div",{className:"px-6 py-6 space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"w-16 h-16 rounded-full overflow-hidden bg-gray-100 dark:bg-gray-700 flex items-center justify-center",children:(0,a.jsx)("img",{src:(0,d.V7)(null==b?void 0:b.profile_image_url),alt:"Profile",className:"w-full h-full object-cover",onError:e=>{console.error("Profile image failed to load:",e.currentTarget.src),e.currentTarget.src="/defaultpfp.jpg"},onLoad:()=>console.log("Profile image loaded successfully:",(0,d.V7)(null==b?void 0:b.profile_image_url))})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-200",children:"Profile image"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:"JPG, PNG, or WEBP. Max 2MB."}),(0,a.jsx)("input",{type:"file",accept:"image/png,image/jpeg,image/webp",onChange:I,disabled:y,className:"block w-full text-sm text-gray-700 dark:text-gray-200 file:mr-3 file:py-1.5 file:px-3 file:rounded-md file:border file:border-gray-200 file:bg-gray-50 file:text-sm file:font-medium file:text-gray-700 hover:file:bg-gray-100 dark:file:border-gray-700 dark:file:bg-gray-800 dark:file:text-gray-200"}),f&&(0,a.jsx)("p",{className:"text-sm text-red-500 mt-1",children:f}),y&&(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Uploading..."})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs uppercase text-gray-500 dark:text-gray-400 font-semibold",children:"Username"}),(0,a.jsx)("button",{onClick:()=>S(!C),className:"flex items-center gap-2 mt-1 text-lg font-medium text-gray-900 dark:text-gray-100 hover:text-gray-700 dark:hover:text-gray-300 transition-colors group",children:C?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{children:null==b?void 0:b.username}),(0,a.jsx)(s.Z,{className:"w-4 h-4 opacity-60 group-hover:opacity-100"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:"••••••••"}),(0,a.jsx)(g.Z,{className:"w-4 h-4 opacity-60 group-hover:opacity-100"})]})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs uppercase text-gray-500 dark:text-gray-400 font-semibold",children:"Email"}),(0,a.jsx)("button",{onClick:()=>_(!P),className:"flex items-center gap-2 mt-1 text-lg font-medium text-gray-900 dark:text-gray-100 hover:text-gray-700 dark:hover:text-gray-300 transition-colors group",children:P?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{children:null==b?void 0:b.email}),(0,a.jsx)(s.Z,{className:"w-4 h-4 opacity-60 group-hover:opacity-100"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:"••••••••••••••••••••••"}),(0,a.jsx)(g.Z,{className:"w-4 h-4 opacity-60 group-hover:opacity-100"})]})})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs uppercase text-gray-500 dark:text-gray-400 font-semibold",children:"Display Name"}),(0,a.jsx)("p",{className:"text-lg font-medium mt-1",children:(null==b?void 0:b.player_name)||"Not set"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-2",children:"Bio"}),(0,a.jsx)("textarea",{value:v,onChange:e=>j(e.target.value),placeholder:"I'm a new user, say hi!",maxLength:500,rows:3,className:"w-full px-3 py-2 border border-gray-200 dark:border-gray-700 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-corporate-blue focus:border-transparent resize-none"}),(0,a.jsxs)("div",{className:"flex items-center justify-between mt-2",children:[(0,a.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[v.length,"/500 characters"]}),(0,a.jsx)("button",{onClick:M,disabled:N||v===((null==b?void 0:b.bio)||"I'm a new user, say hi!"),className:"px-3 py-1 text-xs font-medium rounded-md bg-corporate-blue text-white hover:bg-corporate-blue-dark disabled:opacity-50 disabled:cursor-not-allowed",children:N?"Saving...":"Save Bio"})]})]})]})]}),(0,a.jsxs)("section",{className:"rounded-xl shadow-sm border bloomberg:border-bloomberg-green",style:{backgroundColor:"rgb(var(--background-start-rgb))",borderColor:"rgba(var(--foreground-rgb), 0.15)"},children:[(0,a.jsx)("div",{className:"px-6 py-4 border-b border-gray-100 dark:border-gray-700/60 bloomberg:border-bloomberg-green",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-lg font-semibold",children:"Appearance"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 bloomberg:text-bloomberg-green-dim",children:"Choose your visual theme. Each theme provides a unique experience tailored to different preferences."})]})}),(0,a.jsxs)("div",{className:"px-6 py-6 space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-200 bloomberg:text-bloomberg-green-bright",children:"Select Theme"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[(0,a.jsx)("button",{onClick:()=>E("light"),className:"group relative px-4 py-6 rounded-lg border-2 text-sm font-medium transition-all ".concat("light"===r?"border-corporate-blue bg-corporate-blue/5 text-corporate-blue":"border-gray-200 bg-white text-gray-600 hover:border-gray-300 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:hover:border-gray-600 bloomberg:border-bloomberg-green-dim bloomberg:bg-black bloomberg:text-bloomberg-green bloomberg:hover:border-bloomberg-green"),children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-full flex items-center justify-center ".concat("light"===r?"bg-corporate-blue/10":"bg-gray-100 dark:bg-gray-700 bloomberg:bg-bloomberg-green/10"),children:(0,a.jsx)(i,{className:"w-6 h-6"})}),(0,a.jsx)("span",{className:"font-semibold",children:"Light"}),(0,a.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400 bloomberg:text-bloomberg-green-dim text-center",children:"Clean, bright"})]})}),(0,a.jsx)("button",{onClick:()=>E("midnight"),className:"group relative px-4 py-6 rounded-lg border-2 text-sm font-medium transition-all ".concat("midnight"===r?"border-corporate-blue bg-corporate-blue/5 text-corporate-blue":"border-gray-200 bg-white text-gray-600 hover:border-gray-300 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:hover:border-gray-600 bloomberg:border-bloomberg-green-dim bloomberg:bg-black bloomberg:text-bloomberg-green bloomberg:hover:border-bloomberg-green"),children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-full flex items-center justify-center ".concat("midnight"===r?"bg-corporate-blue/10":"bg-gray-100 dark:bg-gray-700 bloomberg:bg-bloomberg-green/10"),children:(0,a.jsx)(i,{className:"w-6 h-6"})}),(0,a.jsx)("span",{className:"font-semibold",children:"Midnight"}),(0,a.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400 bloomberg:text-bloomberg-green-dim text-center",children:"Dark blue-gray"})]})}),(0,a.jsx)("button",{onClick:()=>E("black"),className:"group relative px-4 py-6 rounded-lg border-2 text-sm font-medium transition-all ".concat("black"===r?"border-corporate-blue bg-corporate-blue/5 text-corporate-blue":"border-gray-200 bg-white text-gray-600 hover:border-gray-300 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:hover:border-gray-600 bloomberg:border-bloomberg-green-dim bloomberg:bg-black bloomberg:text-bloomberg-green bloomberg:hover:border-bloomberg-green"),children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-full flex items-center justify-center ".concat("black"===r?"bg-corporate-blue/10":"bg-gray-100 dark:bg-gray-700 bloomberg:bg-bloomberg-green/10"),children:(0,a.jsx)(i,{className:"w-6 h-6"})}),(0,a.jsx)("span",{className:"font-semibold",children:"Black"}),(0,a.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400 bloomberg:text-bloomberg-green-dim text-center",children:"Pure OLED black"})]})}),(0,a.jsx)("button",{onClick:()=>E("bloomberg"),className:"group relative px-4 py-6 rounded-lg border-2 text-sm font-medium transition-all ".concat("bloomberg"===r?"border-bloomberg-green-bright bg-bloomberg-green/5 text-bloomberg-green-bright shadow-[0_0_15px_rgba(0,255,65,0.3)]":"border-gray-200 bg-white text-gray-600 hover:border-gray-300 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:hover:border-gray-600 bloomberg:border-bloomberg-green-dim bloomberg:bg-black bloomberg:text-bloomberg-green bloomberg:hover:border-bloomberg-green"),children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-full flex items-center justify-center font-bloomberg ".concat("bloomberg"===r?"bg-bloomberg-green/10":"bg-gray-100 dark:bg-gray-700 bloomberg:bg-bloomberg-green/10"),children:(0,a.jsx)(i,{className:"w-6 h-6"})}),(0,a.jsx)("span",{className:"font-semibold font-bloomberg",children:"Bloomberg"}),(0,a.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400 bloomberg:text-bloomberg-green-dim text-center",children:"Retro terminal"})]})})]})]}),(0,a.jsx)("div",{className:"mt-6 p-4 rounded-lg bg-gray-50 dark:bg-gray-900 bloomberg:bg-black bloomberg:border bloomberg:border-bloomberg-green-dim",children:(0,a.jsxs)("p",{className:"text-xs text-gray-600 dark:text-gray-400 bloomberg:text-bloomberg-green-dim",children:[(0,a.jsxs)("strong",{className:"font-semibold text-gray-800 dark:text-gray-200 bloomberg:text-bloomberg-green",children:["Current Theme: ",r.charAt(0).toUpperCase()+r.slice(1)]}),(0,a.jsx)("br",{}),"Your theme preference is saved automatically and will persist across sessions."]})})]})]})]})})}},37092:function(e,r,t){"use strict";t.d(r,{F:function(){return d},ThemeProvider:function(){return i}});var a=t(37821),o=t(58078),l=t(58504);let s=(0,o.createContext)({theme:"light",setTheme:()=>void 0,toggleTheme:()=>void 0}),g=["/","/login","/register"];function i(e){let{children:r}=e,[t,i]=(0,o.useState)("light"),[d,n]=(0,o.useState)(!1),b=(0,l.usePathname)();(0,o.useEffect)(()=>{let e=localStorage.getItem("theme"),r=window.matchMedia("(prefers-color-scheme: dark)").matches,t="light";"dark"===e?t="midnight":"midnight"===e||"black"===e||"bloomberg"===e?t=e:!e&&r&&(t="midnight"),i(t),n(!0)},[]),(0,o.useEffect)(()=>{if(!d)return;let e=document.documentElement;e.classList.remove("dark","midnight","black","bloomberg"),g.includes(b)||b.startsWith("/register/")||("midnight"===t?e.classList.add("dark","midnight"):"black"===t?e.classList.add("dark","black"):"bloomberg"===t&&e.classList.add("bloomberg"),localStorage.setItem("theme",t))},[t,d,b]);let c=(0,o.useMemo)(()=>({theme:t,setTheme:i,toggleTheme:()=>i(e=>"light"===e?"midnight":"midnight"===e?"black":"black"===e?"bloomberg":"light")}),[t]);return(0,a.jsx)(s.Provider,{value:c,children:r})}let d=()=>(0,o.useContext)(s)},70534:function(e,r,t){"use strict";t.d(r,{Z:function(){return a}});let a=(0,t(76576).Z)("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]])},42348:function(e,r,t){"use strict";t.d(r,{Z:function(){return a}});let a=(0,t(76576).Z)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])}},function(e){e.O(0,[4568,4790,7115,2364,1744],function(){return e(e.s=65438)}),_N_E=e.O()}]);