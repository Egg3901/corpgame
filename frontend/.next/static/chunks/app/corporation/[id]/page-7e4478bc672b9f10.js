(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2204],{532:function(e,t,r){Promise.resolve().then(r.bind(r,93666))},93666:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return eF}});var a=r(37821),s=r(58078),o=r(58504),l=r(74542),i=r(39447),n=r(64790),d=r(48908),c=r(81742),x=r(46362),m=r(57198),u=r(17329),g=r(68980),h=r(23877),p=r(91583),b=r(75221),y=r(70384),v=r(13346),f=r(46275),k=r(16922),j=r(82359),N=r(14275),w=r(73891),_=r(90586),S=r(5189),C=r(12021),E=r(79044),P=r(49198),M=r(83778),O=r(15758),T=r(32751),D=r(19781),Z=r(80961),F=r(12758),I=r(51135),L=r(43336),A=r(35619),R=r(58022),U=r(87714),H=r(41847),z=r(27838),V=r(41991),B=r(15141),q=r(3117),W=r(42233),$=r(68814),K=r(89523),Y=r(21996),G=r(41584),Q=r(65617),J=r(51583),X=r(48134),ee=r(94713),et=r(32581);let er={AL:"Alabama",AK:"Alaska",AZ:"Arizona",AR:"Arkansas",CA:"California",CO:"Colorado",CT:"Connecticut",DE:"Delaware",FL:"Florida",GA:"Georgia",HI:"Hawaii",ID:"Idaho",IL:"Illinois",IN:"Indiana",IA:"Iowa",KS:"Kansas",KY:"Kentucky",LA:"Louisiana",ME:"Maine",MD:"Maryland",MA:"Massachusetts",MI:"Michigan",MN:"Minnesota",MS:"Mississippi",MO:"Missouri",MT:"Montana",NE:"Nebraska",NV:"Nevada",NH:"New Hampshire",NJ:"New Jersey",NM:"New Mexico",NY:"New York",NC:"North Carolina",ND:"North Dakota",OH:"Ohio",OK:"Oklahoma",OR:"Oregon",PA:"Pennsylvania",RI:"Rhode Island",SC:"South Carolina",SD:"South Dakota",TN:"Tennessee",TX:"Texas",UT:"Utah",VT:"Vermont",VA:"Virginia",WA:"Washington",WV:"West Virginia",WI:"Wisconsin",WY:"Wyoming"};function ea(e){let{corporationId:t,corporationName:r,viewerUserId:o,isAdmin:i=!1}=e,[d,c]=(0,s.useState)(null),[x,m]=(0,s.useState)([]),[u,g]=(0,s.useState)(!0),[h,p]=(0,s.useState)(""),[b,y]=(0,s.useState)(!1),[v,f]=(0,s.useState)(!1),[j,N]=(0,s.useState)(!1),[w,_]=(0,s.useState)(null),[C,E]=(0,s.useState)(!1),[P,M]=(0,s.useState)("ceo_nomination"),[T,F]=(0,s.useState)(""),[I,L]=(0,s.useState)(""),[A,R]=(0,s.useState)(""),[U,H]=(0,s.useState)(3),[ea,es]=(0,s.useState)(""),[eo,el]=(0,s.useState)(1e5),[ei,en]=(0,s.useState)(0),[ed,ec]=(0,s.useState)(0),[ex,em]=(0,s.useState)("diversified"),eu=(0,s.useCallback)(async()=>{try{let[e,r]=await Promise.all([n.tO.getBoard(t),n.tO.getProposals(t)]);c(e),m(r)}catch(t){var e,r;console.error("Failed to fetch board data:",t),p((null===(r=t.response)||void 0===r?void 0:null===(e=r.data)||void 0===e?void 0:e.error)||"Failed to load board data")}finally{g(!1)}},[t]);(0,s.useEffect)(()=>{eu()},[eu]);let eg=async e=>{if(e.preventDefault(),d){N(!0);try{let e;switch(P){case"ceo_nomination":if(!T){alert("Please select a nominee"),N(!1);return}e={proposal_type:"ceo_nomination",proposal_data:{nominee_id:Number(T)}};break;case"sector_change":if(!I){alert("Please select a sector"),N(!1);return}e={proposal_type:"sector_change",proposal_data:{new_sector:I}};break;case"hq_change":if(!A){alert("Please select a state"),N(!1);return}e={proposal_type:"hq_change",proposal_data:{new_state:A}};break;case"board_size":e={proposal_type:"board_size",proposal_data:{new_size:U}};break;case"appoint_member":if(!ea){alert("Please select an appointee"),N(!1);return}e={proposal_type:"appoint_member",proposal_data:{appointee_id:Number(ea)}};break;case"ceo_salary_change":if(eo<0){alert("Salary must be non-negative"),N(!1);return}if(eo>1e7){alert("Salary cannot exceed $10,000,000"),N(!1);return}e={proposal_type:"ceo_salary_change",proposal_data:{new_salary:eo}};break;case"dividend_change":if(ei<0||ei>100){alert("Dividend percentage must be between 0 and 100"),N(!1);return}e={proposal_type:"dividend_change",proposal_data:{new_percentage:ei}};break;case"special_dividend":if(ed<0||ed>100){alert("Capital percentage must be between 0 and 100"),N(!1);return}e={proposal_type:"special_dividend",proposal_data:{capital_percentage:ed}};break;case"stock_split":e={proposal_type:"stock_split",proposal_data:{}};break;case"focus_change":if(!ex){alert("Please select a focus"),N(!1);return}e={proposal_type:"focus_change",proposal_data:{new_focus:ex}};break;default:return}await n.tO.createProposal(t,e),y(!1),ey(),await eu()}catch(e){var r,a;alert((null===(a=e.response)||void 0===a?void 0:null===(r=a.data)||void 0===r?void 0:r.error)||"Failed to create proposal")}finally{N(!1)}}},eh=async(e,r)=>{_(e);try{await n.tO.castVote(t,e,r),await eu()}catch(e){var a,s;alert((null===(s=e.response)||void 0===s?void 0:null===(a=s.data)||void 0===a?void 0:a.error)||"Failed to cast vote")}finally{_(null)}},ep=async()=>{if(confirm("Are you sure you want to resign as CEO? The largest shareholder will become Acting CEO."))try{await n.tO.resignCeo(t),await eu()}catch(t){var e,r;alert((null===(r=t.response)||void 0===r?void 0:null===(e=r.data)||void 0===e?void 0:e.error)||"Failed to resign")}},eb=async()=>{if(confirm("Are you sure you want to reset the board? This will remove all appointed board members. Only the CEO will remain. This action cannot be undone.")){E(!0);try{let e=await n.Sb.resetBoard(t);alert("Board reset successfully. ".concat(e.removed_count," member(s) removed.")),await eu()}catch(t){var e,r;alert((null===(r=t.response)||void 0===r?void 0:null===(e=r.data)||void 0===e?void 0:e.error)||"Failed to reset board")}finally{E(!1)}}},ey=()=>{M("ceo_nomination"),F(""),L(""),R(""),H(3),es(""),el((null==d?void 0:d.corporation.ceo_salary)||1e5),en(0),ec(0),em((null==d?void 0:d.corporation.focus)||"diversified")},ev=e=>{let t=new Date,r=new Date(e).getTime()-t.getTime();if(r<=0)return"Expired";let a=Math.floor(r/36e5),s=Math.floor(r%36e5/6e4);return a>0?"".concat(a,"h ").concat(s,"m remaining"):"".concat(s,"m remaining")},ef=e=>{switch(e.proposal_type){case"ceo_nomination":return"Elect ".concat(e.proposal_data.nominee_name||"a shareholder"," as CEO");case"sector_change":return"Change sector to ".concat(e.proposal_data.new_sector);case"hq_change":return"Move HQ to ".concat(er[e.proposal_data.new_state||""]||e.proposal_data.new_state);case"board_size":return"Change board size to ".concat(e.proposal_data.new_size," members");case"appoint_member":return"Appoint ".concat(e.proposal_data.appointee_name||"a shareholder"," to the board");case"ceo_salary_change":return"Change CEO salary to $".concat((e.proposal_data.new_salary||0).toLocaleString(),"/96h");case"dividend_change":return"Change dividend percentage to ".concat((e.proposal_data.new_percentage||0).toFixed(2),"%");case"special_dividend":return"Pay special dividend of ".concat((e.proposal_data.capital_percentage||0).toFixed(2),"% of capital");case"stock_split":return"Execute 2:1 stock split (double shares, halve price)";case"focus_change":return"Change corporate focus to ".concat({extraction:"Extraction",production:"Production",retail:"Retail",service:"Service",diversified:"Diversified"}[e.proposal_data.new_focus||""]||e.proposal_data.new_focus);default:return"Unknown proposal"}},ek=e=>{switch(e){case"ceo_nomination":return(0,a.jsx)(z.Z,{className:"w-4 h-4"});case"sector_change":return(0,a.jsx)(k.Z,{className:"w-4 h-4"});case"hq_change":return(0,a.jsx)(O.Z,{className:"w-4 h-4"});case"board_size":return(0,a.jsx)(V.Z,{className:"w-4 h-4"});case"appoint_member":return(0,a.jsx)(B.Z,{className:"w-4 h-4"});case"ceo_salary_change":return(0,a.jsx)(D.Z,{className:"w-4 h-4"});case"dividend_change":return(0,a.jsx)(q.Z,{className:"w-4 h-4"});case"special_dividend":return(0,a.jsx)(W.Z,{className:"w-4 h-4"});case"stock_split":return(0,a.jsx)($.Z,{className:"w-4 h-4"});case"focus_change":return(0,a.jsx)(K.Z,{className:"w-4 h-4"});default:return(0,a.jsx)(Z.Z,{className:"w-4 h-4"})}};if(u)return(0,a.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,a.jsx)("div",{className:"text-gray-600 dark:text-gray-400",children:"Loading board data..."})});if(h||!d)return(0,a.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,a.jsx)("div",{className:"text-red-600 dark:text-red-400",children:h||"Failed to load board data"})});let ej=x.filter(e=>"active"===e.status),eN=x.filter(e=>"active"!==e.status);return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"relative rounded-2xl border border-gray-200/50 dark:border-gray-700/50 bg-gradient-to-br from-white via-white to-gray-50/50 dark:from-gray-900 dark:via-gray-900 dark:to-gray-800/50 shadow-2xl overflow-hidden backdrop-blur-sm",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-corporate-blue/5 via-transparent to-corporate-blue-light/5 dark:from-corporate-blue/10 dark:via-transparent dark:to-corporate-blue-dark/10 pointer-events-none"}),(0,a.jsx)("div",{className:"absolute inset-0 ring-1 ring-inset ring-white/20 dark:ring-gray-700/30 pointer-events-none"}),(0,a.jsxs)("div",{className:"relative p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[(0,a.jsx)(Z.Z,{className:"w-5 h-5 text-corporate-blue"}),"Board of Directors"]}),(0,a.jsxs)("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[d.board_members.length," of ",d.corporation.board_size," seats"]})]}),(0,a.jsx)("div",{className:"grid gap-4",children:d.board_members.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 rounded-xl border transition-all ".concat(e.is_ceo||e.is_acting_ceo?"border-corporate-blue/30 bg-corporate-blue/5 dark:bg-corporate-blue/10":"border-gray-200/60 dark:border-gray-700/50 bg-white/50 dark:bg-gray-800/50"),children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("img",{src:e.profile_image_url||"/defaultpfp.jpg",alt:e.username,className:"w-12 h-12 rounded-full object-cover ring-2 ring-gray-200/50 dark:ring-gray-700/50",onError:e=>{e.currentTarget.src="/defaultpfp.jpg"}}),(e.is_ceo||e.is_acting_ceo)&&(0,a.jsx)("div",{className:"absolute -top-1 -right-1 w-5 h-5 bg-corporate-blue rounded-full flex items-center justify-center",children:(0,a.jsx)(z.Z,{className:"w-3 h-3 text-white"})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(l.default,{href:"/profile/".concat(e.profile_id),className:"font-bold text-gray-900 dark:text-white hover:text-corporate-blue dark:hover:text-corporate-blue-light transition-colors",children:e.player_name||e.username}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400",children:[(0,a.jsxs)("span",{children:[e.shares.toLocaleString()," shares"]}),e.is_ceo&&(0,a.jsx)("span",{className:"px-2 py-0.5 bg-corporate-blue text-white text-xs font-bold rounded",children:"CEO"}),e.is_acting_ceo&&(0,a.jsx)("span",{className:"px-2 py-0.5 bg-amber-500 text-white text-xs font-bold rounded",children:"Acting CEO"})]})]})]}),(0,a.jsxs)("div",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400",children:["Seat #",t+1]})]},e.user_id))}),d.is_ceo&&d.effective_ceo&&!d.effective_ceo.isActing&&(0,a.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:(0,a.jsx)("button",{onClick:ep,className:"px-4 py-2 text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:"Resign as CEO"})}),i&&(0,a.jsx)("div",{className:"mt-4 pt-4 border-t-2 border-red-200 dark:border-red-800",children:(0,a.jsxs)("div",{className:"bg-red-50 dark:bg-red-900/20 p-3 rounded-lg",children:[(0,a.jsx)("h4",{className:"text-xs font-bold uppercase tracking-wider text-red-700 dark:text-red-400 mb-2",children:"Admin Controls"}),(0,a.jsx)("button",{onClick:eb,disabled:C,className:"w-full px-4 py-2 text-sm bg-red-600 text-white hover:bg-red-700 disabled:opacity-50 rounded-lg transition-colors font-semibold",children:C?"Resetting Board...":"Reset Board Members"}),(0,a.jsx)("p",{className:"text-xs text-red-600 dark:text-red-400 mt-2",children:"This will remove all appointed board members. Only the CEO will remain."})]})})]})]}),(0,a.jsxs)("div",{className:"relative rounded-2xl border border-gray-200/50 dark:border-gray-700/50 bg-gradient-to-br from-white via-white to-gray-50/50 dark:from-gray-900 dark:via-gray-900 dark:to-gray-800/50 shadow-2xl overflow-hidden backdrop-blur-sm",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-corporate-blue/5 via-transparent to-corporate-blue-light/5 dark:from-corporate-blue/10 dark:via-transparent dark:to-corporate-blue-dark/10 pointer-events-none"}),(0,a.jsx)("div",{className:"absolute inset-0 ring-1 ring-inset ring-white/20 dark:ring-gray-700/30 pointer-events-none"}),(0,a.jsxs)("div",{className:"relative p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[(0,a.jsx)(Y.Z,{className:"w-5 h-5 text-corporate-blue"}),"Active Proposals"]}),d.is_on_board&&(0,a.jsxs)("button",{onClick:()=>y(!b),className:"px-4 py-2 bg-corporate-blue text-white rounded-lg hover:bg-corporate-blue-dark transition-colors flex items-center gap-2 text-sm font-semibold",children:[(0,a.jsx)(S.Z,{className:"w-4 h-4"}),"New Proposal"]})]}),b&&d.is_on_board&&(0,a.jsxs)("form",{onSubmit:eg,className:"mb-6 p-4 rounded-xl border border-corporate-blue/30 bg-corporate-blue/5 dark:bg-corporate-blue/10",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900 dark:text-white mb-4",children:"Create New Proposal"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Proposal Type"}),(0,a.jsxs)("select",{value:P,onChange:e=>M(e.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[(0,a.jsx)("option",{value:"ceo_nomination",children:"Nominate CEO"}),(0,a.jsx)("option",{value:"sector_change",children:"Change Sector"}),(0,a.jsx)("option",{value:"hq_change",children:"Change HQ State"}),(0,a.jsx)("option",{value:"board_size",children:"Change Board Size"}),(0,a.jsx)("option",{value:"appoint_member",children:"Appoint Board Member"}),(0,a.jsx)("option",{value:"ceo_salary_change",children:"Change CEO Salary"}),(0,a.jsx)("option",{value:"dividend_change",children:"Change Dividend Percentage"}),(0,a.jsx)("option",{value:"special_dividend",children:"Pay Special Dividend"}),(0,a.jsx)("option",{value:"stock_split",children:"Stock Split (2:1)"}),(0,a.jsx)("option",{value:"focus_change",children:"Change Corporate Focus"})]})]}),"ceo_nomination"===P&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"CEO Nominee (must be shareholder)"}),(0,a.jsxs)("select",{value:T,onChange:e=>F(e.target.value?Number(e.target.value):""),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[(0,a.jsx)("option",{value:"",children:"Select nominee..."}),d.shareholders.map(e=>(0,a.jsxs)("option",{value:e.user_id,children:[e.player_name||e.username," (",e.shares.toLocaleString()," shares)"]},e.user_id))]})]}),"sector_change"===P&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"New Sector"}),(0,a.jsxs)("select",{value:I,onChange:e=>L(e.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[(0,a.jsx)("option",{value:"",children:"Select sector..."}),d.sectors.map(e=>(0,a.jsx)("option",{value:e,children:e},e))]})]}),"hq_change"===P&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"New HQ State"}),(0,a.jsxs)("select",{value:A,onChange:e=>R(e.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[(0,a.jsx)("option",{value:"",children:"Select state..."}),d.us_states.map(e=>(0,a.jsx)("option",{value:e,children:er[e]||e},e))]})]}),"board_size"===P&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"New Board Size (3-7)"}),(0,a.jsx)("input",{type:"number",min:3,max:7,value:U,onChange:e=>H(Number(e.target.value)),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),"appoint_member"===P&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Appointee (must be shareholder)"}),(0,a.jsxs)("select",{value:ea,onChange:e=>es(e.target.value?Number(e.target.value):""),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[(0,a.jsx)("option",{value:"",children:"Select appointee..."}),d.shareholders.filter(e=>!d.board_members.some(t=>t.user_id===e.user_id)).map(e=>(0,a.jsxs)("option",{value:e.user_id,children:[e.player_name||e.username," (",e.shares.toLocaleString()," shares)"]},e.user_id))]})]}),"ceo_salary_change"===P&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"New CEO Salary (per 96 hours)"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 dark:text-gray-400",children:"$"}),(0,a.jsx)("input",{type:"number",min:0,max:1e7,step:1e3,value:eo,onChange:e=>el(Number(e.target.value)),className:"w-full pl-7 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Current salary: $",(d.corporation.ceo_salary||1e5).toLocaleString(),"/96h ($",((d.corporation.ceo_salary||1e5)/96).toLocaleString(void 0,{maximumFractionDigits:2}),"/hr)"]}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["New hourly rate: $",(eo/96).toLocaleString(void 0,{maximumFractionDigits:2}),"/hr"]}),0===eo&&(0,a.jsx)("p",{className:"text-xs text-amber-600 dark:text-amber-400 mt-1 font-semibold",children:"⚠️ Setting salary to $0 means CEO will not be paid"})]}),"dividend_change"===P&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"New Dividend Percentage (0-100%)"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{type:"number",min:0,max:100,step:.1,value:ei,onChange:e=>en(Number(e.target.value)),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),(0,a.jsx)("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 dark:text-gray-400",children:"%"})]}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Current: ",(d.corporation.dividend_percentage||0).toFixed(2),"% of total profit"]}),(0,a.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"This percentage of total profit will be paid as dividends hourly to shareholders"})]}),"special_dividend"===P&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Capital Percentage (0-100%)"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{type:"number",min:0,max:100,step:.1,value:ed,onChange:e=>ec(Number(e.target.value)),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),(0,a.jsx)("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 dark:text-gray-400",children:"%"})]}),d.corporation.special_dividend_last_paid_at&&(0,a.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Last special dividend: $",(d.corporation.special_dividend_last_amount||0).toLocaleString()," paid"," ",(()=>{let e=new Date(d.corporation.special_dividend_last_paid_at),t=(new Date().getTime()-e.getTime())/36e5;if(t<96){let e=Math.ceil(96-t);return"".concat(e," hours ago (").concat(e,"h cooldown remaining)")}return"".concat(Math.floor(t/24)," days ago")})()]}),d.corporation.special_dividend_last_paid_at&&(()=>{let e=new Date(d.corporation.special_dividend_last_paid_at);return(new Date().getTime()-e.getTime())/36e5<96?(0,a.jsx)("p",{className:"text-xs text-amber-600 dark:text-amber-400 mt-1 font-semibold",children:"⚠️ Special dividend can only be paid once every 96 hours"}):null})(),(0,a.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"This percentage of corporation capital will be paid as a one-time special dividend to all shareholders"})]}),"stock_split"===P&&(0,a.jsxs)("div",{className:"p-4 rounded-lg bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)($.Z,{className:"w-5 h-5 text-amber-600 dark:text-amber-400"}),(0,a.jsx)("span",{className:"font-semibold text-amber-800 dark:text-amber-200",children:"2:1 Stock Split"})]}),(0,a.jsx)("p",{className:"text-sm text-amber-700 dark:text-amber-300",children:"This will double all outstanding shares and halve the share price. For example: 500,000 shares at $10 each becomes 1,000,000 shares at $5 each."}),(0,a.jsx)("p",{className:"text-xs text-amber-600 dark:text-amber-400 mt-2",children:"Total market capitalization remains unchanged."})]}),"focus_change"===P&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"New Corporate Focus"}),(0,a.jsxs)("select",{value:ex,onChange:e=>em(e.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[(0,a.jsx)("option",{value:"diversified",children:"Diversified (All unit types)"}),(0,a.jsx)("option",{value:"production",children:"Production (Production + Extraction)"}),(0,a.jsx)("option",{value:"retail",children:"Retail (Retail only)"}),(0,a.jsx)("option",{value:"service",children:"Service (Service only)"}),(0,a.jsx)("option",{value:"extraction",children:"Extraction (Extraction only)"})]}),(0,a.jsxs)("div",{className:"mt-3 p-3 rounded-lg bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800",children:[(0,a.jsx)("p",{className:"text-sm text-blue-700 dark:text-blue-300 mb-2",children:(0,a.jsx)("strong",{children:"Focus determines what units the corporation can build:"})}),(0,a.jsxs)("ul",{className:"text-xs text-blue-600 dark:text-blue-400 space-y-1 ml-4 list-disc",children:[(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"Diversified:"})," Retail, Production, Service, Extraction"]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"Production:"})," Production, Extraction"]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"Retail:"})," Retail only"]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"Service:"})," Service only"]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"Extraction:"})," Extraction only"]})]})]}),(null==d?void 0:d.corporation.focus)&&(0,a.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:["Current focus: ",(0,a.jsx)("span",{className:"font-semibold capitalize",children:d.corporation.focus})]})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{type:"submit",disabled:j,className:"px-4 py-2 bg-corporate-blue text-white rounded-lg hover:bg-corporate-blue-dark disabled:opacity-50 transition-colors text-sm font-semibold",children:j?"Creating...":"Create Proposal"}),(0,a.jsx)("button",{type:"button",onClick:()=>{y(!1),ey()},className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors text-sm",children:"Cancel"})]})]})]}),0===ej.length?(0,a.jsx)("p",{className:"text-gray-500 dark:text-gray-400 text-center py-8",children:"No active proposals at this time."}):(0,a.jsx)("div",{className:"space-y-4",children:ej.map(e=>{var t,r;let s=d.is_on_board&&!e.user_vote;return(0,a.jsxs)("div",{className:"p-4 rounded-xl border transition-all ".concat(s?"border-corporate-blue/60 bg-corporate-blue/5 dark:bg-corporate-blue/10 ring-2 ring-corporate-blue/20":"border-gray-200/60 dark:border-gray-700/50 bg-white/50 dark:bg-gray-800/50"),children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-full bg-corporate-blue/10 flex items-center justify-center text-corporate-blue",children:ek(e.proposal_type)}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold text-gray-900 dark:text-white",children:ef(e)}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Proposed by ",(null===(t=e.proposer)||void 0===t?void 0:t.player_name)||(null===(r=e.proposer)||void 0===r?void 0:r.username)||"Unknown"]})]})]}),(0,a.jsx)("div",{className:"text-right",children:(0,a.jsxs)("div",{className:"text-xs font-semibold text-amber-600 dark:text-amber-400 flex items-center gap-1",children:[(0,a.jsx)(Y.Z,{className:"w-3 h-3"}),ev(e.expires_at)]})})]}),(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsxs)("div",{className:"flex justify-between text-xs mb-1",children:[(0,a.jsxs)("span",{className:"text-emerald-600 dark:text-emerald-400 font-semibold",children:["Aye: ",e.votes.aye]}),(0,a.jsxs)("span",{className:"text-red-600 dark:text-red-400 font-semibold",children:["Nay: ",e.votes.nay]})]}),(0,a.jsx)("div",{className:"h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:e.votes.total>0&&(0,a.jsx)("div",{className:"h-full bg-emerald-500 transition-all",style:{width:"".concat(e.votes.aye/e.votes.total*100,"%")}})})]}),e.voter_details&&(0,a.jsx)("div",{className:"mb-3 p-3 rounded-lg bg-gray-50 dark:bg-gray-800/50 border border-gray-200/50 dark:border-gray-700/50",children:(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"font-semibold text-emerald-600 dark:text-emerald-400 mb-1",children:["Aye (",e.voter_details.aye.length,")"]}),e.voter_details.aye.length>0?(0,a.jsx)("ul",{className:"space-y-1",children:e.voter_details.aye.map(e=>(0,a.jsx)("li",{className:"text-gray-700 dark:text-gray-300",children:(0,a.jsx)(l.default,{href:"/profile/".concat(e.profile_id),className:"hover:text-corporate-blue dark:hover:text-corporate-blue-light transition-colors",children:e.player_name||e.username})},e.user_id))}):(0,a.jsx)("p",{className:"text-gray-400 dark:text-gray-500 italic",children:"None"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"font-semibold text-red-600 dark:text-red-400 mb-1",children:["Nay (",e.voter_details.nay.length,")"]}),e.voter_details.nay.length>0?(0,a.jsx)("ul",{className:"space-y-1",children:e.voter_details.nay.map(e=>(0,a.jsx)("li",{className:"text-gray-700 dark:text-gray-300",children:(0,a.jsx)(l.default,{href:"/profile/".concat(e.profile_id),className:"hover:text-corporate-blue dark:hover:text-corporate-blue-light transition-colors",children:e.player_name||e.username})},e.user_id))}):(0,a.jsx)("p",{className:"text-gray-400 dark:text-gray-500 italic",children:"None"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"font-semibold text-gray-500 dark:text-gray-400 mb-1",children:["Not Voted (",e.voter_details.abstained.length,")"]}),e.voter_details.abstained.length>0?(0,a.jsx)("ul",{className:"space-y-1",children:e.voter_details.abstained.map(e=>(0,a.jsx)("li",{className:"text-gray-700 dark:text-gray-300",children:(0,a.jsx)(l.default,{href:"/profile/".concat(e.profile_id),className:"hover:text-corporate-blue dark:hover:text-corporate-blue-light transition-colors",children:e.player_name||e.username})},e.user_id))}):(0,a.jsx)("p",{className:"text-gray-400 dark:text-gray-500 italic",children:"All voted"})]})]})}),d.is_on_board&&(0,a.jsx)("div",{className:"flex gap-2",children:e.user_vote?(0,a.jsxs)("div",{className:"w-full px-4 py-2 rounded-lg text-sm font-semibold flex items-center gap-2 ".concat("aye"===e.user_vote?"bg-emerald-100 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-300":"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300"),children:["aye"===e.user_vote?(0,a.jsx)(G.Z,{className:"w-4 h-4"}):(0,a.jsx)(Q.Z,{className:"w-4 h-4"}),"You voted: ",e.user_vote.toUpperCase()]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("button",{onClick:()=>eh(e.id,"aye"),disabled:w===e.id,className:"flex-1 px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 disabled:opacity-50 transition-colors flex items-center justify-center gap-2 text-sm font-semibold",children:[(0,a.jsx)(G.Z,{className:"w-4 h-4"}),"Vote Aye"]}),(0,a.jsxs)("button",{onClick:()=>eh(e.id,"nay"),disabled:w===e.id,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 transition-colors flex items-center justify-center gap-2 text-sm font-semibold",children:[(0,a.jsx)(Q.Z,{className:"w-4 h-4"}),"Vote Nay"]})]})})]},e.id)})})]})]}),(0,a.jsxs)("div",{className:"relative rounded-2xl border border-gray-200/50 dark:border-gray-700/50 bg-gradient-to-br from-white via-white to-gray-50/50 dark:from-gray-900 dark:via-gray-900 dark:to-gray-800/50 shadow-2xl overflow-hidden backdrop-blur-sm",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-corporate-blue/5 via-transparent to-corporate-blue-light/5 dark:from-corporate-blue/10 dark:via-transparent dark:to-corporate-blue-dark/10 pointer-events-none"}),(0,a.jsx)("div",{className:"absolute inset-0 ring-1 ring-inset ring-white/20 dark:ring-gray-700/30 pointer-events-none"}),(0,a.jsxs)("div",{className:"relative p-6",children:[(0,a.jsxs)("button",{onClick:()=>f(!v),className:"w-full flex items-center justify-between text-xl font-bold text-gray-900 dark:text-white",children:[(0,a.jsxs)("span",{className:"flex items-center gap-2",children:[(0,a.jsx)(J.Z,{className:"w-5 h-5 text-corporate-blue"}),"Vote History",(0,a.jsxs)("span",{className:"text-sm font-normal text-gray-500 dark:text-gray-400",children:["(",eN.length,")"]})]}),v?(0,a.jsx)(X.Z,{className:"w-5 h-5"}):(0,a.jsx)(ee.Z,{className:"w-5 h-5"})]}),v&&(0,a.jsx)("div",{className:"mt-4 space-y-3",children:0===eN.length?(0,a.jsx)("p",{className:"text-gray-500 dark:text-gray-400 text-center py-4",children:"No past proposals."}):eN.map(e=>(0,a.jsxs)("div",{className:"p-3 rounded-lg border ".concat("passed"===e.status?"border-emerald-200 dark:border-emerald-800/50 bg-emerald-50/50 dark:bg-emerald-900/20":"border-red-200 dark:border-red-800/50 bg-red-50/50 dark:bg-red-900/20"),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:["passed"===e.status?(0,a.jsx)(J.Z,{className:"w-4 h-4 text-emerald-600 dark:text-emerald-400"}):(0,a.jsx)(et.Z,{className:"w-4 h-4 text-red-600 dark:text-red-400"}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:ef(e)})]}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[e.votes.aye," - ",e.votes.nay]})]}),(0,a.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:e.resolved_at?new Date(e.resolved_at).toLocaleDateString():new Date(e.created_at).toLocaleDateString()})]},e.id))})]})]})]})}var es=r(91045),eo=r(34999),el=r(92113),ei=r(39478),en=r(26025),ed=r(8635),ec=r(88840),ex=r(77271),em=r(33338),eu=r(26200);let eg=[{label:"24H",value:"24h",hours:24},{label:"48H",value:"48h",hours:48},{label:"4D",value:"96h",hours:96},{label:"7D",value:"7d",hours:168},{label:"30D",value:"30d",hours:720}],eh=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(e),ep=e=>"".concat(e>=0?"+":"").concat(e.toFixed(2),"%");function eb(e){let{corporationId:t,currentPrice:r}=e,[o,l]=(0,s.useState)("96h"),[i,d]=(0,s.useState)(!0),[c,x]=(0,s.useState)(null),[m,u]=(0,s.useState)([]),g=eg.find(e=>e.value===o);(0,s.useEffect)(()=>{(async()=>{d(!0),x(null);try{let e=await n.w_.getPriceHistory(t,g.hours,1e3);u(e)}catch(e){console.error("Failed to fetch price history:",e),x("Failed to load price history")}finally{d(!1)}})()},[t,g.hours]);let h=(0,s.useMemo)(()=>{if(0===m.length){let e=Date.now();return[{time:"Start",price:r,timestamp:e-36e5*g.hours,capital:0},{time:"Now",price:r,timestamp:e,capital:0}]}return[...m].sort((e,t)=>new Date(e.recorded_at).getTime()-new Date(t.recorded_at).getTime()).map(e=>{let t=new Date(e.recorded_at),r=g.hours;return{time:r<=48?t.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}):r<=168?t.toLocaleDateString("en-US",{weekday:"short",hour:"numeric",hour12:!0}):t.toLocaleDateString("en-US",{month:"short",day:"numeric"}),price:"string"==typeof e.share_price?parseFloat(e.share_price):e.share_price,timestamp:t.getTime(),capital:"string"==typeof e.capital?parseFloat(e.capital):e.capital}})},[m,r,g.hours]),p=(0,s.useMemo)(()=>{if(h.length<2)return{startPrice:r,endPrice:r,change:0,changePercent:0,high:r,low:r,isPositive:!0};let e=h.map(e=>e.price),t=e[0],a=e[e.length-1],s=a-t;return{startPrice:t,endPrice:a,change:s,changePercent:(a-t)/t*100,high:Math.max(...e),low:Math.min(...e),isPositive:s>=0}},[h,r]),b=(0,s.useMemo)(()=>{if(0===h.length)return[.9*r,1.1*r];let e=h.map(e=>e.price),t=Math.min(...e),a=Math.max(...e),s=(a-t)*.1||.05*a;return[Math.max(0,t-s),a+s]},[h,r]),y="priceGradient-".concat(t),v=p.isPositive?"#10b981":"#ef4444",f=p.isPositive?"#10b981":"#ef4444",k=p.isPositive?"rgba(16, 185, 129, 0.05)":"rgba(239, 68, 68, 0.05)";return(0,a.jsxs)("div",{className:"relative rounded-2xl border border-gray-200/50 dark:border-gray-700/50 bg-gradient-to-br from-white via-white to-gray-50/50 dark:from-gray-900 dark:via-gray-900 dark:to-gray-800/50 shadow-2xl overflow-hidden backdrop-blur-sm",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-corporate-blue/5 via-transparent to-corporate-blue-light/5 dark:from-corporate-blue/10 dark:via-transparent dark:to-corporate-blue-dark/10 pointer-events-none"}),(0,a.jsx)("div",{className:"absolute inset-0 ring-1 ring-inset ring-white/20 dark:ring-gray-700/30 pointer-events-none"}),(0,a.jsxs)("div",{className:"relative p-6",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 rounded-lg ".concat(p.isPositive?"bg-emerald-100 dark:bg-emerald-900/30":"bg-red-100 dark:bg-red-900/30"),children:p.isPositive?(0,a.jsx)(F.Z,{className:"w-5 h-5 text-emerald-600 dark:text-emerald-400"}):(0,a.jsx)(em.Z,{className:"w-5 h-5 text-red-600 dark:text-red-400"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Stock Price"}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-0.5",children:[(0,a.jsx)("span",{className:"text-2xl font-bold font-mono text-gray-900 dark:text-white",children:eh(r)}),(0,a.jsx)("span",{className:"text-sm font-semibold ".concat(p.isPositive?"text-emerald-600 dark:text-emerald-400":"text-red-600 dark:text-red-400"),children:ep(p.changePercent)})]})]})]}),(0,a.jsx)("div",{className:"flex items-center gap-1 p-1 bg-gray-100 dark:bg-gray-800 rounded-lg",children:eg.map(e=>(0,a.jsx)("button",{onClick:()=>l(e.value),className:"px-3 py-1.5 text-xs font-semibold rounded-md transition-all duration-200 ".concat(o===e.value?"bg-white dark:bg-gray-700 text-corporate-blue dark:text-corporate-blue-light shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"),children:e.label},e.value))})]}),(0,a.jsxs)("div",{className:"grid grid-cols-4 gap-3 mb-6",children:[(0,a.jsxs)("div",{className:"text-center p-2 rounded-lg bg-gray-50 dark:bg-gray-800/50",children:[(0,a.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Open"}),(0,a.jsx)("p",{className:"text-sm font-bold text-gray-900 dark:text-white font-mono",children:eh(p.startPrice)})]}),(0,a.jsxs)("div",{className:"text-center p-2 rounded-lg bg-gray-50 dark:bg-gray-800/50",children:[(0,a.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"High"}),(0,a.jsx)("p",{className:"text-sm font-bold text-emerald-600 dark:text-emerald-400 font-mono",children:eh(p.high)})]}),(0,a.jsxs)("div",{className:"text-center p-2 rounded-lg bg-gray-50 dark:bg-gray-800/50",children:[(0,a.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Low"}),(0,a.jsx)("p",{className:"text-sm font-bold text-red-600 dark:text-red-400 font-mono",children:eh(p.low)})]}),(0,a.jsxs)("div",{className:"text-center p-2 rounded-lg bg-gray-50 dark:bg-gray-800/50",children:[(0,a.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Change"}),(0,a.jsxs)("p",{className:"text-sm font-bold font-mono ".concat(p.isPositive?"text-emerald-600 dark:text-emerald-400":"text-red-600 dark:text-red-400"),children:[p.change>=0?"+":"",eh(p.change)]})]})]}),(0,a.jsx)("div",{className:"h-64 sm:h-80",children:i?(0,a.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,a.jsxs)("div",{className:"flex items-center gap-2 text-gray-500 dark:text-gray-400",children:[(0,a.jsx)(eu.Z,{className:"w-5 h-5 animate-pulse"}),(0,a.jsx)("span",{children:"Loading chart data..."})]})}):c?(0,a.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-red-500 dark:text-red-400",children:c}),(0,a.jsx)("button",{onClick:()=>l(o),className:"mt-2 text-sm text-corporate-blue hover:underline",children:"Retry"})]})}):(0,a.jsx)(es.h,{width:"100%",height:"100%",children:(0,a.jsxs)(eo.T,{data:h,margin:{top:10,right:10,left:0,bottom:0},children:[(0,a.jsx)("defs",{children:(0,a.jsxs)("linearGradient",{id:y,x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,a.jsx)("stop",{offset:"0%",stopColor:f,stopOpacity:.3}),(0,a.jsx)("stop",{offset:"100%",stopColor:k,stopOpacity:0})]})}),(0,a.jsx)(el.q,{strokeDasharray:"3 3",stroke:"rgba(156, 163, 175, 0.2)",vertical:!1}),(0,a.jsx)(ei.K,{dataKey:"time",axisLine:!1,tickLine:!1,tick:{fontSize:11,fill:"#9ca3af"},interval:"preserveStartEnd",minTickGap:30}),(0,a.jsx)(en.B,{domain:b,axisLine:!1,tickLine:!1,tick:{fontSize:11,fill:"#9ca3af"},tickFormatter:e=>"$".concat(e.toFixed(2)),width:60}),(0,a.jsx)(ed.u,{content:(0,a.jsx)(e=>{let{active:t,payload:r,label:s}=e;if(t&&r&&r.length){let e=r[0].payload;return(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl border border-gray-200 dark:border-gray-700 p-3",children:[(0,a.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:e.time}),(0,a.jsx)("p",{className:"text-lg font-bold text-gray-900 dark:text-white font-mono",children:eh(e.price)}),e.capital>0&&(0,a.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Capital: ",eh(e.capital)]})]})}return null},{})}),(0,a.jsx)(ec.db,{y:p.startPrice,stroke:"rgba(156, 163, 175, 0.5)",strokeDasharray:"5 5"}),(0,a.jsx)(ex.uN,{type:"monotone",dataKey:"price",stroke:v,strokeWidth:2,fill:"url(#".concat(y,")"),animationDuration:750})]})})}),(0,a.jsxs)("div",{className:"mt-4 flex items-center justify-between text-xs text-gray-500 dark:text-gray-400",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(Y.Z,{className:"w-3.5 h-3.5"}),(0,a.jsxs)("span",{children:["Last ",g.label.toLowerCase()]})]}),(0,a.jsx)("div",{children:h.length>0&&m.length>0&&(0,a.jsxs)("span",{children:[m.length," data points"]})})]})]})]})}var ey=r(8045);let ev=e=>isFinite(e)&&e>0?e:0,ef={retail:200,service:150};var ek=r(40398);let ej={Technology:"Rare Earth",Finance:null,Healthcare:null,"Light Industry":null,Manufacturing:null,Energy:null,Retail:null,"Real Estate":null,Transportation:null,Media:null,Telecommunications:"Copper",Agriculture:"Fertile Land",Defense:null,Hospitality:null,Construction:null,Pharmaceuticals:"Chemical Compounds",Mining:null,"Heavy Industry":null},eN={Technology:"Technology Products",Finance:null,Healthcare:null,"Light Industry":"Manufactured Goods",Manufacturing:"Manufactured Goods",Energy:"Electricity",Retail:null,"Real Estate":null,Transportation:"Logistics Capacity",Media:null,Telecommunications:null,Agriculture:"Food Products",Defense:"Defense Equipment",Hospitality:null,Construction:"Construction Capacity",Pharmaceuticals:"Pharmaceutical Products",Mining:null,"Heavy Industry":"Steel"},ew={Technology:null,Finance:["Technology Products"],Healthcare:["Pharmaceutical Products"],"Light Industry":["Steel"],Manufacturing:["Steel"],Energy:null,Retail:["Manufactured Goods"],"Real Estate":["Construction Capacity"],Transportation:["Steel"],Media:["Technology Products"],Telecommunications:["Technology Products"],Agriculture:null,Defense:["Steel"],Hospitality:["Food Products"],Construction:["Steel"],Pharmaceuticals:null,Mining:null,"Heavy Industry":null},e_={retail:200,service:150},eS={Oil:(0,a.jsx)(c.Z,{className:"w-4 h-4"}),"Iron Ore":(0,a.jsx)(x.Z,{className:"w-4 h-4"}),"Rare Earth":(0,a.jsx)(m.Z,{className:"w-4 h-4"}),Copper:(0,a.jsx)(u.Z,{className:"w-4 h-4"}),"Fertile Land":(0,a.jsx)(g.Z,{className:"w-4 h-4"}),Lumber:(0,a.jsx)(h.Z,{className:"w-4 h-4"}),"Chemical Compounds":(0,a.jsx)(p.Z,{className:"w-4 h-4"}),Coal:(0,a.jsx)(b.Z,{className:"w-4 h-4"})},eC={Oil:"text-slate-700 dark:text-slate-300 bg-slate-100 dark:bg-slate-800","Iron Ore":"text-red-700 dark:text-red-300 bg-red-100 dark:bg-red-800","Rare Earth":"text-violet-700 dark:text-violet-300 bg-violet-100 dark:bg-violet-800",Copper:"text-orange-700 dark:text-orange-300 bg-orange-100 dark:bg-orange-800","Fertile Land":"text-lime-700 dark:text-lime-300 bg-lime-100 dark:bg-lime-800",Lumber:"text-amber-700 dark:text-amber-300 bg-amber-100 dark:bg-amber-800","Chemical Compounds":"text-cyan-700 dark:text-cyan-300 bg-cyan-100 dark:bg-cyan-800",Coal:"text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-800"},eE={"Technology Products":(0,a.jsx)(m.Z,{className:"w-4 h-4"}),"Manufactured Goods":(0,a.jsx)(y.Z,{className:"w-4 h-4"}),Electricity:(0,a.jsx)(v.Z,{className:"w-4 h-4"}),"Food Products":(0,a.jsx)(f.Z,{className:"w-4 h-4"}),"Construction Capacity":(0,a.jsx)(k.Z,{className:"w-4 h-4"}),"Pharmaceutical Products":(0,a.jsx)(j.Z,{className:"w-4 h-4"}),"Defense Equipment":(0,a.jsx)(N.Z,{className:"w-4 h-4"}),"Logistics Capacity":(0,a.jsx)(w.Z,{className:"w-4 h-4"}),Steel:(0,a.jsx)(_.Z,{className:"w-4 h-4"})},eP={"Technology Products":"text-indigo-700 dark:text-indigo-300 bg-indigo-100 dark:bg-indigo-900/50","Manufactured Goods":"text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-800",Electricity:"text-yellow-700 dark:text-yellow-300 bg-yellow-100 dark:bg-yellow-900/50","Food Products":"text-green-700 dark:text-green-300 bg-green-100 dark:bg-green-900/50","Construction Capacity":"text-stone-700 dark:text-stone-300 bg-stone-100 dark:bg-stone-800","Pharmaceutical Products":"text-rose-700 dark:text-rose-300 bg-rose-100 dark:bg-rose-900/50","Defense Equipment":"text-red-700 dark:text-red-300 bg-red-100 dark:bg-red-900/50","Logistics Capacity":"text-blue-700 dark:text-blue-300 bg-blue-100 dark:bg-blue-900/50",Steel:"text-zinc-700 dark:text-zinc-300 bg-zinc-100 dark:bg-zinc-800"},eM={retail:{baseRevenue:500,baseCost:300},production:{baseRevenue:800,baseCost:600},service:{baseRevenue:400,baseCost:200},extraction:{baseRevenue:400,baseCost:700}},eO={Technology:null,Finance:null,Healthcare:null,"Light Industry":null,Manufacturing:null,Energy:["Oil"],Retail:null,"Real Estate":null,Transportation:null,Media:null,Telecommunications:null,Agriculture:["Fertile Land","Lumber"],Defense:null,Hospitality:null,Construction:["Lumber"],Pharmaceuticals:["Chemical Compounds"],Mining:["Iron Ore","Coal","Copper","Rare Earth"],"Heavy Industry":null},eT=e=>{let t=eO[e];return null!==t&&t.length>0},eD={"Technology Products":5e3,"Manufactured Goods":1500,Electricity:200,"Food Products":500,"Construction Capacity":2500,"Pharmaceutical Products":8e3,"Defense Equipment":15e3,"Logistics Capacity":1e3,Steel:850},eZ={AL:"Alabama",AK:"Alaska",AZ:"Arizona",AR:"Arkansas",CA:"California",CO:"Colorado",CT:"Connecticut",DE:"Delaware",FL:"Florida",GA:"Georgia",HI:"Hawaii",ID:"Idaho",IL:"Illinois",IN:"Indiana",IA:"Iowa",KS:"Kansas",KY:"Kentucky",LA:"Louisiana",ME:"Maine",MD:"Maryland",MA:"Massachusetts",MI:"Michigan",MN:"Minnesota",MS:"Mississippi",MO:"Missouri",MT:"Montana",NE:"Nebraska",NV:"Nevada",NH:"New Hampshire",NJ:"New Jersey",NM:"New Mexico",NY:"New York",NC:"North Carolina",ND:"North Dakota",OH:"Ohio",OK:"Oklahoma",OR:"Oregon",PA:"Pennsylvania",RI:"Rhode Island",SC:"South Carolina",SD:"South Dakota",TN:"Tennessee",TX:"Texas",UT:"Utah",VT:"Vermont",VA:"Virginia",WA:"Washington",WV:"West Virginia",WI:"Wisconsin",WY:"Wyoming"};function eF(){var e,t,r,m,u,g,h,p,y;let v=(0,o.useRouter)(),f=parseInt((0,o.useParams)().id,10),{config:j}=(0,ek.ZV)(),[N,w]=(0,s.useState)(null),[z,V]=(0,s.useState)(null),[B,q]=(0,s.useState)(!0),[W,$]=(0,s.useState)(""),[K,Y]=(0,s.useState)(!1),[G,Q]=(0,s.useState)(""),[J,X]=(0,s.useState)(""),[ee,et]=(0,s.useState)(""),[er,es]=(0,s.useState)(!1),[eo,el]=(0,s.useState)(0),[ei,en]=(0,s.useState)("overview"),[ed,ec]=(0,s.useState)(null),[ex,em]=(0,s.useState)(null),[eu,eg]=(0,s.useState)(null),[eh,ep]=(0,s.useState)(null),[eF,eI]=(0,s.useState)([]),[eL,eA]=(0,s.useState)({}),[eR,eU]=(0,s.useState)({}),[eH,ez]=(0,s.useState)(null),[eV,eB]=(0,s.useState)(null),eq=e=>{var t,r;let a=null==eH?void 0:null===(r=eH.sector_unit_flows)||void 0===r?void 0:null===(t=r[e])||void 0===t?void 0:t.production;if(a)return a;let s=ej[e]||null,o=eN[e]||null,l=ew[e]||null,i={};return i.Electricity=.5,l&&l.forEach(e=>{i[e]=.5}),{inputs:{resources:s?{[s]:.5}:{},products:i},outputs:{resources:{},products:o?{[o]:1}:{}}}},eW=e=>{let t=eN[e],r=eq(e),a=eM.production.baseRevenue,s=eM.production.baseCost;if(t){var o,l,i,n,d;let e=null!==(i=null==r?void 0:null===(o=r.outputs.products)||void 0===o?void 0:o[t])&&void 0!==i?i:1;a=(null!==(d=null!==(n=null===(l=eR[t])||void 0===l?void 0:l.currentPrice)&&void 0!==n?n:eD[t])&&void 0!==d?d:eM.production.baseRevenue)*e,s=400,Object.entries((null==r?void 0:r.inputs.resources)||{}).forEach(e=>{var t,r;let[a,o]=e,l=null!==(r=null===(t=eL[a])||void 0===t?void 0:t.currentPrice)&&void 0!==r?r:0;s+=o*l}),Object.entries((null==r?void 0:r.inputs.products)||{Electricity:.5}).forEach(e=>{var r,a,o;let[l,i]=e,n=null!==(o=null!==(a=null===(r=eR[l])||void 0===r?void 0:r.currentPrice)&&void 0!==a?a:eD[l])&&void 0!==o?o:0;s+=i*n*("Electricity"===t&&"Electricity"===l?.1:1)})}return{unitRevenuePerHour:a,unitCostPerHour:s,productionFlow:r}},e$=(e,t)=>{let r=e_[t],a=ew[e]||[],s=0,o=0;for(let r of a){var l,i,n;let a=null!==(n=null!==(i=null===(l=eR[r])||void 0===l?void 0:l.currentPrice)&&void 0!==i?i:eD[r])&&void 0!==n?n:0,d="retail"===t?2:"Electricity"===r?.5:1.5;"Defense"===e&&("retail"===t||"Electricity"!==r)&&(d=1);let c="retail"===t?.995:"Electricity"===r?1:.995;"Defense"===e&&("retail"===t||"Electricity"!==r)&&(c=.8);let x=a*d*c;s+=x,"Defense"===e&&("retail"===t||"Electricity"!==r)?o+=1*x:o+=a*d}return{unitRevenuePerHour:Math.max(o,s*(1+("retail"===t?.05:.1))),unitCostPerHour:r+s}};(0,s.useEffect)(()=>{let e=async()=>{var e,t;try{let[t,r,a,s,o,l]=await Promise.all([n.y7.getById(f),n.kv.getMe().catch(()=>null),n.QT.getCorporationFinances(f).catch(()=>null),n.QT.getCommodities().catch(()=>null),n.QT.getMarketMetadata().catch(()=>null),n.w_.getValuation(f).catch(()=>null)]);if(w(t),r){V(r.id);let a=null===(e=t.shareholders)||void 0===e?void 0:e.find(e=>e.user_id===r.id);el((null==a?void 0:a.shares)||0)}if(a&&(eg(a.finances),ep(a.balance_sheet||null),eI(a.market_entries||[])),s){let e={};s.commodities.forEach(t=>{e[t.resource]=t}),eA(e);let t={};s.products.forEach(e=>{t[e.product]=e}),eU(t)}o&&ez(o),l&&(eB(l.valuation),l.balance_sheet&&ep(l.balance_sheet))}catch(e){console.error("Failed to fetch corporation:",e),$((null===(t=e.response)||void 0===t?void 0:t.status)===404?"Corporation not found":"Failed to load corporation")}finally{q(!1)}};isNaN(f)?($("Invalid corporation ID"),q(!1)):e()},[f]);let eK=async()=>{if(confirm("Are you sure you want to delete this corporation? This action cannot be undone.")){Y(!0);try{await n.y7.delete(f),v.push("/stock-market")}catch(r){var e,t;console.error("Failed to delete corporation:",r),alert((null===(t=r.response)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.error)||"Failed to delete corporation"),Y(!1)}}},eY=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(e),eG=(0,s.useMemo)(()=>{if(eu)return{revenue:eu.display_revenue,variableCosts:eu.display_costs,fixedCosts:eu.ceo_salary_96h,operatingIncome:eu.operating_income_96h,dividends:eu.dividend_payout_96h,retainedEarnings:eu.net_income_96h,netIncome:eu.net_income_96h,sectors:[],periodHours:96,errors:[]};let e=eF.map(e=>({sector_type:e.sector_type,retail_count:e.retail_count,production_count:e.production_count,service_count:e.service_count,extraction_count:e.extraction_count||0}));return function(e){let t=[],r=e.periodHours&&e.periodHours>0?Math.floor(e.periodHours):96,a=e.unitEconomics,s=e.sectorUnitFlows||{},o=e.commodityPrices||{},l=e.productPrices||{},i=e.fixedCosts||{},n=[];e.entries.forEach((e,d)=>{var c,x;let m=e.sector_type;m&&s[m]||t.push("missing_flow_".concat(m||d));let u={retail:ev(e.retail_count||0),production:ev(e.production_count||0),service:ev(e.service_count||0),extraction:ev(e.extraction_count||0)},g=s[m]||{retail:{inputs:{resources:{},products:{}},outputs:{resources:{},products:{}}},production:{inputs:{resources:{},products:{}},outputs:{resources:{},products:{}}},service:{inputs:{resources:{},products:{}},outputs:{resources:{},products:{}}},extraction:{inputs:{resources:{},products:{}},outputs:{resources:{},products:{}}}},h=0,p=0,b={retail:{revenue:0,cost:0,units:u.retail||0,producedUnits:0,demandedUnits:0},production:{revenue:0,cost:0,units:u.production||0,producedUnits:0,demandedUnits:0},service:{revenue:0,cost:0,units:u.service||0,producedUnits:0,demandedUnits:0},extraction:{revenue:0,cost:0,units:u.extraction||0,producedUnits:0,demandedUnits:0}};if((u.retail||0)>0){let e=g.retail,t=ef.retail,a=0,s=0;Object.keys(e.inputs.products||{}).forEach(e=>{var t;let r=(null===(t=l[e])||void 0===t?void 0:t.currentPrice)||0,o=2;"Defense"===m&&(o=1);let i=.995;"Defense"===m&&(i=.8);let n=r*o*i;a+=n,"Defense"===m?s+=1*n:s+=r*o});let o=Math.max(s,1.1*a),i=t+a,n=o*r*(u.retail||0),d=i*r*(u.retail||0);h+=n,p+=d,b.retail.revenue+=n,b.retail.cost+=d,b.retail.demandedUnits=Math.round(Object.values(e.inputs.products||{}).reduce((e,t)=>e+t,0)*(u.retail||0)*r)}if((u.production||0)>0){let e=g.production,t=a.production.baseRevenue,s=a.production.baseCost,i=Object.keys(e.outputs.products||{})[0]||null;if(i){let r=e.outputs.products[i]||0;t=((null===(c=l[i])||void 0===c?void 0:c.currentPrice)||0)*r,s=0,Object.entries(e.inputs.resources||{}).forEach(e=>{var t;let[r,a]=e,l=(null===(t=o[r])||void 0===t?void 0:t.currentPrice)||0;s+=a*l}),Object.entries(e.inputs.products||{}).forEach(e=>{var t;let[r,a]=e,o=(null===(t=l[r])||void 0===t?void 0:t.currentPrice)||0;s+=a*o})}let n=t*r*(u.production||0),d=s*r*(u.production||0);h+=n,p+=d,b.production.revenue+=n,b.production.cost+=d,b.production.producedUnits=Math.round((e.outputs.products&&i&&e.outputs.products[i]||0)*(u.production||0)*r),b.production.demandedUnits=Math.round(Object.values(e.inputs.products||{}).reduce((e,t)=>e+t,0)*(u.production||0)*r)}if((u.service||0)>0){let e=g.service,t=ef.service,a=0,s=0;Object.keys(e.inputs.products||{}).forEach(e=>{var t;let r=(null===(t=l[e])||void 0===t?void 0:t.currentPrice)||0,o="Electricity"===e?.5:1.5;"Defense"===m&&"Electricity"!==e&&(o=1);let i="Electricity"===e?1:.995;"Defense"===m&&"Electricity"!==e&&(i=.8);let n=r*o*i;a+=n,"Defense"===m&&"Electricity"!==e?s+=1*n:s+=r*o});let o=Math.max(s,1.1*a),i=t+a,n=o*r*(u.service||0),d=i*r*(u.service||0);h+=n,p+=d,b.service.revenue+=n,b.service.cost+=d,b.service.demandedUnits=Math.round(Object.values(e.inputs.products||{}).reduce((e,t)=>e+t,0)*(u.service||0)*r)}if((u.extraction||0)>0){let e=g.extraction,t=Object.keys(e.outputs.resources||{})[0]||null,s=a.extraction.baseRevenue,l=a.extraction.baseCost;if(t){let r=e.outputs.resources[t]||0;s=((null===(x=o[t])||void 0===x?void 0:x.currentPrice)||0)*r}let i=s*r*(u.extraction||0),n=l*r*(u.extraction||0);h+=i,p+=n,b.extraction.revenue+=i,b.extraction.cost+=n,b.extraction.producedUnits=Math.round((e.outputs.resources&&t&&e.outputs.resources[t]||0)*(u.extraction||0)*r),b.extraction.demandedUnits=0}let y=ev(i.perPeriod||0),v=h-(p+y);n.push({sector:m,revenue:h,variableCosts:p,fixedCosts:y,netIncome:v,unitBreakdown:b})});let d=n.reduce((e,t)=>e+t.revenue,0),c=n.reduce((e,t)=>e+t.variableCosts,0),x=ev((i.ceoSalary||0)+(i.overhead||0)),m=n.reduce((e,t)=>e+t.fixedCosts,0)+x,u=d-(c+m),g=ev(e.dividendPercentage||0),h=u>0?g/100*u:0,p=u-h;return{revenue:d,variableCosts:c,fixedCosts:m,operatingIncome:u,dividends:h,retainedEarnings:p,netIncome:p,sectors:n,periodHours:r,errors:t}}({entries:e,sectorUnitFlows:(null==eH?void 0:eH.sector_unit_flows)||{},commodityPrices:Object.fromEntries(Object.entries(eL).map(e=>{let[t,r]=e;return[t,{currentPrice:r.currentPrice}]})),productPrices:Object.fromEntries(Object.entries(eR).map(e=>{let[t,r]=e;return[t,{currentPrice:r.currentPrice}]})),unitEconomics:eM,periodHours:96,fixedCosts:{ceoSalary:(null==N?void 0:N.ceo_salary)||0},dividendPercentage:(null==N?void 0:N.dividend_percentage)||0})},[eu,eF,eH,eL,eR,N]),eQ=(0,s.useMemo)(()=>{if(!j)return;let e={};for(let[t,r]of Object.entries(j.products))e[t]=r.referenceValue;return e},[j]),eJ=async()=>{var e,t,r;if(!N||!G)return;let a=parseInt(G,10);if(isNaN(a)||a<=0){alert("Please enter a valid number of shares");return}if(a>N.public_shares){alert("Only ".concat(N.public_shares.toLocaleString()," public shares available"));return}es(!0);try{let t=await n.w_.buy(N.id,a);alert("Successfully purchased ".concat(a.toLocaleString()," shares at ").concat(eY(t.price_per_share)," each. Total: ").concat(eY(t.total_cost)));let r=await n.y7.getById(N.id);w(r);let s=null===(e=r.shareholders)||void 0===e?void 0:e.find(e=>e.user_id===z);el((null==s?void 0:s.shares)||0),Q("")}catch(e){alert((null===(r=e.response)||void 0===r?void 0:null===(t=r.data)||void 0===t?void 0:t.error)||"Failed to buy shares")}finally{es(!1)}},eX=async()=>{var e,t,r;if(!N||!J)return;let a=parseInt(J,10);if(isNaN(a)||a<=0){alert("Please enter a valid number of shares");return}if(a>eo){alert("You only own ".concat(eo.toLocaleString()," shares"));return}es(!0);try{let t=await n.w_.sell(N.id,a);alert("Successfully sold ".concat(a.toLocaleString()," shares at ").concat(eY(t.price_per_share)," each. Total: ").concat(eY(t.total_revenue)));let r=await n.y7.getById(N.id);w(r);let s=null===(e=r.shareholders)||void 0===e?void 0:e.find(e=>e.user_id===z);el((null==s?void 0:s.shares)||0),X("")}catch(e){alert((null===(r=e.response)||void 0===r?void 0:null===(t=r.data)||void 0===t?void 0:t.error)||"Failed to sell shares")}finally{es(!1)}},e0=async()=>{if(!N||!ee)return;let e=parseInt(ee,10);if(isNaN(e)||e<=0){alert("Please enter a valid number of shares");return}let t=Math.floor(.1*N.shares);if(e>t){alert("Cannot issue more than ".concat(t.toLocaleString()," shares (10% of ").concat(N.shares.toLocaleString()," outstanding)"));return}es(!0);try{let t=await n.w_.issue(N.id,e);alert("Successfully issued ".concat(e.toLocaleString()," shares at ").concat(eY(t.price_per_share)," each. Capital raised: ").concat(eY(t.total_capital_raised)));let r=await n.y7.getById(N.id);w(r),et("")}catch(e){var r,a;alert((null===(a=e.response)||void 0===a?void 0:null===(r=a.data)||void 0===r?void 0:r.error)||"Failed to issue shares")}finally{es(!1)}},e4=async(e,t,r)=>{if(N&&confirm("Are you sure you want to abandon 1 ".concat(t," unit in ").concat(r,"? This action cannot be undone."))){ec("".concat(e,"-").concat(t));try{await n.QT.abandonUnit(e,t);let[r,a]=await Promise.all([n.y7.getById(f),n.QT.getCorporationFinances(f).catch(()=>null)]);w(r),a&&(eg(a.finances),ep(a.balance_sheet||null),eI(a.market_entries||[]))}catch(e){var a,s;alert((null===(s=e.response)||void 0===s?void 0:null===(a=s.data)||void 0===a?void 0:a.error)||"Failed to abandon unit")}finally{ec(null)}}},e2=async(e,t)=>{if(N){em("".concat(e,"-").concat(t));try{await n.QT.buildUnit(e,t);let[r,a]=await Promise.all([n.y7.getById(f),n.QT.getCorporationFinances(f).catch(()=>null)]);w(r),a&&(eg(a.finances),ep(a.balance_sheet||null),eI(a.market_entries||[]))}catch(e){var r,a;alert((null===(a=e.response)||void 0===a?void 0:null===(r=a.data)||void 0===r?void 0:r.error)||"Failed to build unit")}finally{em(null)}}};if(B)return(0,a.jsx)(i.Z,{children:(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-gray-100 dark:from-gray-950 dark:via-gray-900 dark:to-gray-950 flex items-center justify-center",children:(0,a.jsx)("div",{className:"text-lg text-gray-600 dark:text-gray-200",children:"Loading corporation..."})})});if(W||!N)return(0,a.jsx)(i.Z,{children:(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-gray-100 dark:from-gray-950 dark:via-gray-900 dark:to-gray-950 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-xl text-red-600 dark:text-red-400 mb-4",children:W||"Corporation not found"}),(0,a.jsx)(l.default,{href:"/stock-market",className:"text-corporate-blue hover:underline",children:"Return to Stock Market"})]})})});let e5=z===N.ceo_id,e1=((null===(e=N.shareholders)||void 0===e?void 0:e.reduce((e,t)=>e+t.shares,0))||0)+N.public_shares,e6=e1>0?e1:N.shares,e9=Math.abs(N.shares-e1)>1&&e1>0,e3=e6*N.share_price,e7=N.public_shares/e6*100;return(0,a.jsx)(i.Z,{children:(0,a.jsxs)("div",{className:"relative mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-10 space-y-6",children:[(0,a.jsxs)("div",{className:"relative rounded-2xl border border-gray-200/50 dark:border-gray-700/50 bg-gradient-to-br from-white via-white to-gray-50/50 dark:from-gray-900 dark:via-gray-900 dark:to-gray-800/50 shadow-2xl overflow-hidden backdrop-blur-sm",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-corporate-blue/5 via-transparent to-corporate-blue-light/5 dark:from-corporate-blue/10 dark:via-transparent dark:to-corporate-blue-dark/10 pointer-events-none"}),(0,a.jsx)("div",{className:"absolute inset-0 ring-1 ring-inset ring-white/20 dark:ring-gray-700/30 pointer-events-none"}),(0,a.jsx)("div",{className:"relative p-6",children:(0,a.jsxs)("div",{className:"flex items-start gap-6",children:[(0,a.jsxs)("div",{className:"flex-shrink-0 relative",children:[(0,a.jsx)("div",{className:"absolute -inset-1 bg-gradient-to-br from-corporate-blue/30 to-corporate-blue-light/40 rounded-xl blur-xl opacity-50"}),N.logo?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-corporate-blue/20 to-corporate-blue-light/30 rounded-xl blur-sm opacity-0 hover:opacity-100 transition-opacity"}),(0,a.jsx)("img",{src:N.logo,alt:N.name,className:"relative w-24 h-24 rounded-xl object-cover ring-2 ring-gray-200/50 dark:ring-gray-700/50 shadow-lg",onError:e=>{e.currentTarget.src="/defaultpfp.jpg"}})]}):(0,a.jsx)("div",{className:"relative w-24 h-24 rounded-xl bg-gradient-to-br from-gray-200 to-gray-300 dark:from-gray-700 dark:to-gray-800 flex items-center justify-center ring-2 ring-gray-200/50 dark:ring-gray-700/50 shadow-lg",children:(0,a.jsx)(k.Z,{className:"w-12 h-12 text-gray-400 dark:text-gray-500"})})]}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-2",children:(0,a.jsx)(l.default,{href:"/corporation/".concat(N.id),className:"hover:text-corporate-blue dark:hover:text-corporate-blue-light transition-colors",children:N.name})}),N.type&&(0,a.jsx)("span",{className:"inline-block px-3 py-1 text-xs font-bold uppercase tracking-[0.1em] bg-corporate-blue/10 dark:bg-corporate-blue/20 text-corporate-blue dark:text-corporate-blue-light rounded-lg mb-2",children:N.type})]}),e5&&(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("button",{onClick:()=>v.push("/states"),className:"px-4 py-2 bg-corporate-blue text-white rounded-lg hover:bg-corporate-blue-dark transition-colors flex items-center gap-2 shadow-sm hover:shadow-md",children:[(0,a.jsx)(S.Z,{className:"w-4 h-4"}),"Build Sector"]}),(0,a.jsxs)("button",{onClick:()=>v.push("/corporation/".concat(N.id,"/edit")),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors flex items-center gap-2 shadow-sm hover:shadow-md",children:[(0,a.jsx)(C.Z,{className:"w-4 h-4"}),"Edit"]}),(0,a.jsxs)("button",{onClick:eK,disabled:K,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 transition-colors flex items-center gap-2 shadow-sm hover:shadow-md",children:[(0,a.jsx)(E.Z,{className:"w-4 h-4"}),K?"Deleting...":"Delete"]})]})]}),N.ceo&&(0,a.jsxs)("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-400 mb-2 flex-wrap",children:[(0,a.jsx)(P.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:"text-xs font-bold uppercase tracking-[0.1em]",children:"CEO:"}),(0,a.jsx)(l.default,{href:"/profile/".concat(N.ceo.profile_id),className:"font-semibold hover:text-corporate-blue dark:hover:text-corporate-blue-light transition-colors",children:N.ceo.player_name||N.ceo.username}),void 0!==N.ceo_salary&&N.ceo_salary>0?(0,a.jsxs)("span",{className:"px-2 py-0.5 text-xs font-semibold bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300 rounded-full",title:"$".concat(((N.ceo_salary||1e5)/96).toLocaleString(void 0,{maximumFractionDigits:2})," per hour"),children:["Salary: $",(N.ceo_salary||1e5).toLocaleString(),"/96h"]}):(0,a.jsx)("span",{className:"px-2 py-0.5 text-xs font-semibold bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 rounded-full",children:"No Salary"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 flex-wrap text-sm text-gray-500 dark:text-gray-500",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(M.Z,{className:"w-4 h-4"}),(0,a.jsxs)("span",{className:"text-xs font-bold uppercase tracking-[0.1em]",children:["Founded ",new Date(N.created_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]})]}),N.hq_state&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(O.Z,{className:"w-4 h-4"}),(0,a.jsxs)("span",{className:"text-xs font-bold uppercase tracking-[0.1em]",children:["HQ: ",eZ[N.hq_state]||N.hq_state]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(T.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:"text-xs font-bold uppercase tracking-[0.1em] px-2 py-0.5 rounded-full ".concat("diversified"===N.focus?"bg-gradient-to-r from-purple-500 to-indigo-500 text-white":"production"===N.focus?"bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-300":"retail"===N.focus?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300":"service"===N.focus?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300":"extraction"===N.focus?"bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-300":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400"),children:N.focus?N.focus.charAt(0).toUpperCase()+N.focus.slice(1):"Diversified"})]})]})]})]})})]}),(0,a.jsxs)("div",{className:"relative rounded-2xl border border-gray-200/50 dark:border-gray-700/50 bg-gradient-to-br from-white via-white to-gray-50/50 dark:from-gray-900 dark:via-gray-900 dark:to-gray-800/50 shadow-2xl overflow-hidden backdrop-blur-sm",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-corporate-blue/5 via-transparent to-corporate-blue-light/5 dark:from-corporate-blue/10 dark:via-transparent dark:to-corporate-blue-dark/10 pointer-events-none"}),(0,a.jsx)("div",{className:"absolute inset-0 ring-1 ring-inset ring-white/20 dark:ring-gray-700/30 pointer-events-none"}),(0,a.jsx)("div",{className:"relative border-b border-gray-200 dark:border-gray-700",children:(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("button",{onClick:()=>en("overview"),className:"flex-1 px-6 py-4 text-sm font-semibold transition-colors ".concat("overview"===ei?"text-corporate-blue dark:text-corporate-blue-light border-b-2 border-corporate-blue dark:border-corporate-blue-light bg-corporate-blue/5 dark:bg-corporate-blue/10":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"),children:"Overview"}),(0,a.jsx)("button",{onClick:()=>en("sectors"),className:"flex-1 px-6 py-4 text-sm font-semibold transition-colors ".concat("sectors"===ei?"text-corporate-blue dark:text-corporate-blue-light border-b-2 border-corporate-blue dark:border-corporate-blue-light bg-corporate-blue/5 dark:bg-corporate-blue/10":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"),children:"Sectors"}),(0,a.jsx)("button",{onClick:()=>en("board"),className:"flex-1 px-6 py-4 text-sm font-semibold transition-colors ".concat("board"===ei?"text-corporate-blue dark:text-corporate-blue-light border-b-2 border-corporate-blue dark:border-corporate-blue-light bg-corporate-blue/5 dark:bg-corporate-blue/10":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"),children:"Board"}),(0,a.jsx)("button",{onClick:()=>en("finance"),className:"flex-1 px-6 py-4 text-sm font-semibold transition-colors ".concat("finance"===ei?"text-corporate-blue dark:text-corporate-blue-light border-b-2 border-corporate-blue dark:border-corporate-blue-light bg-corporate-blue/5 dark:bg-corporate-blue/10":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"),children:"Finance"})]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:["overview"===ei&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"relative rounded-2xl border border-gray-200/50 dark:border-gray-700/50 bg-gradient-to-br from-white via-white to-gray-50/50 dark:from-gray-900 dark:via-gray-900 dark:to-gray-800/50 shadow-2xl overflow-hidden backdrop-blur-sm",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-corporate-blue/5 via-transparent to-corporate-blue-light/5 dark:from-corporate-blue/10 dark:via-transparent dark:to-corporate-blue-dark/10 pointer-events-none"}),(0,a.jsx)("div",{className:"absolute inset-0 ring-1 ring-inset ring-white/20 dark:ring-gray-700/30 pointer-events-none"}),(0,a.jsxs)("div",{className:"relative p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-6",children:"Financial Overview"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"relative rounded-xl border border-white/60 bg-white/70 dark:border-gray-800/70 dark:bg-gray-800/60 p-5 shadow-sm hover:shadow-md transition-shadow",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xs font-bold uppercase tracking-[0.1em] text-gray-600 dark:text-gray-400 mb-2",children:[(0,a.jsx)(D.Z,{className:"w-4 h-4"}),"Share Price"]}),(0,a.jsx)("p",{className:"text-3xl font-bold text-gray-900 dark:text-white font-mono",children:eY(N.share_price)})]}),(0,a.jsxs)("div",{className:"relative rounded-xl border border-white/60 bg-white/70 dark:border-gray-800/70 dark:bg-gray-800/60 p-5 shadow-sm hover:shadow-md transition-shadow",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xs font-bold uppercase tracking-[0.1em] text-gray-600 dark:text-gray-400 mb-2",children:[(0,a.jsx)(Z.Z,{className:"w-4 h-4"}),"Total Shares"]}),(0,a.jsx)("p",{className:"text-3xl font-bold text-gray-900 dark:text-white font-mono",children:e6.toLocaleString()})]}),(0,a.jsxs)("div",{className:"relative rounded-xl border border-white/60 bg-white/70 dark:border-gray-800/70 dark:bg-gray-800/60 p-5 shadow-sm hover:shadow-md transition-shadow",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xs font-bold uppercase tracking-[0.1em] text-gray-600 dark:text-gray-400 mb-2",children:[(0,a.jsx)(F.Z,{className:"w-4 h-4"}),"Market Cap"]}),(0,a.jsx)("p",{className:"text-3xl font-bold text-corporate-blue dark:text-corporate-blue-light font-mono",children:(0,d.E)(e3)})]}),(0,a.jsxs)("div",{className:"relative rounded-xl border border-white/60 bg-white/70 dark:border-gray-800/70 dark:bg-gray-800/60 p-5 shadow-sm hover:shadow-md transition-shadow",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xs font-bold uppercase tracking-[0.1em] text-gray-600 dark:text-gray-400 mb-2",children:[(0,a.jsx)(Z.Z,{className:"w-4 h-4"}),"Public Shares"]}),(0,a.jsx)("p",{className:"text-3xl font-bold text-gray-900 dark:text-white font-mono",children:N.public_shares.toLocaleString()}),(0,a.jsxs)("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mt-1",children:["(",e7.toFixed(1),"%)"]})]}),(0,a.jsxs)("div",{className:"relative rounded-xl border border-white/60 bg-white/70 dark:border-gray-800/70 dark:bg-gray-800/60 p-5 shadow-sm hover:shadow-md transition-shadow",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xs font-bold uppercase tracking-[0.1em] text-gray-600 dark:text-gray-400 mb-2",children:[(0,a.jsx)(D.Z,{className:"w-4 h-4"}),"Corporate Capital"]}),(0,a.jsx)("p",{className:"text-3xl font-bold text-emerald-600 dark:text-emerald-400 font-mono",children:(0,d.E)(null!==(r=null!==(t=null==eh?void 0:eh.cash)&&void 0!==t?t:N.capital)&&void 0!==r?r:0)})]})]})]})]}),(0,a.jsx)(eb,{corporationId:N.id,currentPrice:N.share_price}),(0,a.jsxs)("div",{className:"relative rounded-2xl border border-gray-200/50 dark:border-gray-700/50 bg-gradient-to-br from-white via-white to-gray-50/50 dark:from-gray-900 dark:via-gray-900 dark:to-gray-800/50 shadow-2xl overflow-hidden backdrop-blur-sm",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-corporate-blue/5 via-transparent to-corporate-blue-light/5 dark:from-corporate-blue/10 dark:via-transparent dark:to-corporate-blue-dark/10 pointer-events-none"}),(0,a.jsx)("div",{className:"absolute inset-0 ring-1 ring-inset ring-white/20 dark:ring-gray-700/30 pointer-events-none"}),(0,a.jsxs)("div",{className:"relative p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:"Shareholders"}),e9&&e5&&(0,a.jsxs)("div",{className:"mb-4 p-3 bg-amber-50 dark:bg-amber-900/30 border border-amber-200 dark:border-amber-700 rounded-lg text-sm text-amber-800 dark:text-amber-200",children:[(0,a.jsx)("strong",{children:"Note:"})," Total shares recorded (",N.shares.toLocaleString(),") differs from actual distribution (",e1.toLocaleString(),"). An admin can fix this via the fix-all-shares endpoint."]}),N.shareholders&&N.shareholders.length>0?(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full border-collapse",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"border-b-2 border-gray-200/80 dark:border-gray-700/80 bg-gradient-to-b from-gray-50/80 to-gray-100/60 dark:from-gray-800/60 dark:to-gray-800/40 backdrop-blur-sm",children:[(0,a.jsx)("th",{className:"text-left py-4 px-4 text-xs font-bold uppercase tracking-[0.15em] text-gray-600 dark:text-gray-400",children:"Shareholder"}),(0,a.jsx)("th",{className:"text-right py-4 px-4 text-xs font-bold uppercase tracking-[0.15em] text-gray-600 dark:text-gray-400",children:"Shares"}),(0,a.jsx)("th",{className:"text-right py-4 px-4 text-xs font-bold uppercase tracking-[0.15em] text-gray-600 dark:text-gray-400",children:"Ownership"}),(0,a.jsx)("th",{className:"text-right py-4 px-4 text-xs font-bold uppercase tracking-[0.15em] text-gray-600 dark:text-gray-400",children:"Value"})]})}),(0,a.jsxs)("tbody",{className:"divide-y divide-gray-200/60 dark:divide-gray-700/50",children:[N.shareholders.sort((e,t)=>t.shares-e.shares).map((e,t)=>{let r=e.shares/e6*100,s=e.shares*N.share_price,o=e.user_id===N.ceo_id;return(0,a.jsxs)("tr",{className:"\n                                  transition-all duration-200 ease-out\n                                  ".concat(t%2==0?"bg-white/40 dark:bg-gray-900/30":"bg-gray-50/30 dark:bg-gray-800/20","\n                                  ").concat(o?"bg-corporate-blue/10 dark:bg-corporate-blue/20 border-l-4 border-corporate-blue":"","\n                                "),children:[(0,a.jsx)("td",{className:"py-4 px-4",children:e.user?(0,a.jsxs)(l.default,{href:"/profile/".concat(e.user.profile_id),className:"flex items-center gap-3 hover:text-corporate-blue dark:hover:text-corporate-blue-light transition-colors group",children:[e.user.profile_image_url&&(0,a.jsx)("img",{src:e.user.profile_image_url,alt:e.user.username,className:"w-10 h-10 rounded-full object-cover ring-2 ring-gray-200/50 dark:ring-gray-700/50 group-hover:ring-corporate-blue/50 transition-all shadow-sm",onError:e=>{e.currentTarget.src="/defaultpfp.jpg"}}),(0,a.jsx)("div",{children:(0,a.jsxs)("div",{className:"font-bold text-gray-900 dark:text-white",children:[e.user.player_name||e.user.username,o&&(0,a.jsx)("span",{className:"ml-2 text-xs font-bold uppercase tracking-[0.05em] bg-corporate-blue text-white px-2 py-0.5 rounded",children:"CEO"})]})})]}):(0,a.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:"Unknown User"})}),(0,a.jsx)("td",{className:"text-right py-4 px-4 font-bold text-gray-900 dark:text-white font-mono",children:e.shares.toLocaleString()}),(0,a.jsxs)("td",{className:"text-right py-4 px-4 text-gray-700 dark:text-gray-300 font-semibold",children:[r.toFixed(2),"%"]}),(0,a.jsx)("td",{className:"text-right py-4 px-4 font-bold text-gray-900 dark:text-white font-mono",children:eY(s)})]},e.id)}),(0,a.jsxs)("tr",{className:"bg-gray-50/50 dark:bg-gray-700/30 border-t-2 border-gray-200/80 dark:border-gray-700/80",children:[(0,a.jsx)("td",{className:"py-4 px-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-gray-300 to-gray-400 dark:from-gray-600 dark:to-gray-700 flex items-center justify-center ring-2 ring-gray-200/50 dark:ring-gray-700/50 shadow-sm",children:(0,a.jsx)(Z.Z,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-bold text-gray-900 dark:text-white",children:"Public Market"}),(0,a.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Available for purchase"})]})]})}),(0,a.jsx)("td",{className:"text-right py-4 px-4 font-bold text-gray-900 dark:text-white font-mono",children:N.public_shares.toLocaleString()}),(0,a.jsxs)("td",{className:"text-right py-4 px-4 text-gray-700 dark:text-gray-300 font-semibold",children:[e7.toFixed(2),"%"]}),(0,a.jsx)("td",{className:"text-right py-4 px-4 font-bold text-gray-900 dark:text-white font-mono",children:eY(N.public_shares*N.share_price)})]})]})]})}):(0,a.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"No shareholders yet."})]})]})]}),"sectors"===ei&&(0,a.jsxs)("div",{className:"relative rounded-2xl border border-gray-200/50 dark:border-gray-700/50 bg-gradient-to-br from-white via-white to-gray-50/50 dark:from-gray-900 dark:via-gray-900 dark:to-gray-800/50 shadow-2xl overflow-visible backdrop-blur-sm",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-corporate-blue/5 via-transparent to-corporate-blue-light/5 dark:from-corporate-blue/10 dark:via-transparent dark:to-corporate-blue-dark/10 pointer-events-none"}),(0,a.jsx)("div",{className:"absolute inset-0 ring-1 ring-inset ring-white/20 dark:ring-gray-700/30 pointer-events-none"}),(0,a.jsxs)("div",{className:"relative p-6",children:[(0,a.jsxs)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2 flex items-center gap-2",children:[(0,a.jsx)(b.Z,{className:"w-5 h-5 text-corporate-blue"}),"Sector Operations"]}),(0,a.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-6",children:"All sectors the corporation operates in, organized by state"}),0===eF.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(b.Z,{className:"h-12 w-12 text-gray-300 dark:text-gray-600 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-lg font-medium text-gray-900 dark:text-white mb-1",children:"No Sector Operations"}),(0,a.jsx)("p",{className:"text-gray-500 dark:text-gray-400 mb-6 text-sm",children:"This corporation hasn't entered any markets yet."}),(0,a.jsxs)(l.default,{href:"/states",className:"inline-flex items-center gap-2 bg-corporate-blue text-white px-5 py-2.5 rounded-lg font-semibold hover:bg-corporate-blue-dark transition-colors text-sm",children:[(0,a.jsx)(O.Z,{className:"w-4 h-4"}),"Browse States"]})]}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"rounded-xl border border-white/60 bg-white/70 dark:border-gray-800/70 dark:bg-gray-800/60 p-4 shadow-sm group relative",children:[(0,a.jsx)("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"States"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:new Set(eF.map(e=>e.state_code)).size}),(0,a.jsx)("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 hidden group-hover:block z-50 pointer-events-none",children:(0,a.jsx)("div",{className:"bg-gray-900 text-white text-xs rounded-lg px-3 py-2 whitespace-nowrap shadow-lg",children:"Number of US states with market presence"})})]}),(0,a.jsxs)("div",{className:"rounded-xl border border-white/60 bg-white/70 dark:border-gray-800/70 dark:bg-gray-800/60 p-4 shadow-sm group relative",children:[(0,a.jsx)("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Sectors"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:new Set(eF.map(e=>e.sector_type)).size}),(0,a.jsx)("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 hidden group-hover:block z-50 pointer-events-none",children:(0,a.jsx)("div",{className:"bg-gray-900 text-white text-xs rounded-lg px-3 py-2 whitespace-nowrap shadow-lg",children:"Unique industry sectors operated in"})})]}),(0,a.jsxs)("div",{className:"rounded-xl border border-white/60 bg-white/70 dark:border-gray-800/70 dark:bg-gray-800/60 p-4 shadow-sm group relative",children:[(0,a.jsx)("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Total Units"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:eF.reduce((e,t)=>e+t.retail_count+t.production_count+t.service_count+(t.extraction_count||0),0)}),(0,a.jsx)("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 hidden group-hover:block z-50 pointer-events-none",children:(0,a.jsx)("div",{className:"bg-gray-900 text-white text-xs rounded-lg px-3 py-2 whitespace-nowrap shadow-lg",children:"All business units: Retail + Production + Service + Extraction"})})]}),(0,a.jsxs)("div",{className:"rounded-xl border border-white/60 bg-white/70 dark:border-gray-800/70 dark:bg-gray-800/60 p-4 shadow-sm group relative",children:[(0,a.jsx)("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Production"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:eF.reduce((e,t)=>e+t.production_count,0)}),(0,a.jsx)("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 hidden group-hover:block z-50 pointer-events-none",children:(0,a.jsxs)("div",{className:"bg-gray-900 text-white text-xs rounded-lg px-3 py-2 whitespace-nowrap shadow-lg",children:["Manufacturing units: $",eM.production.baseRevenue,"/hr revenue \xd7 multiplier"]})})]}),(0,a.jsxs)("div",{className:"rounded-xl border border-white/60 bg-white/70 dark:border-gray-800/70 dark:bg-gray-800/60 p-4 shadow-sm group relative",children:[(0,a.jsx)("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Extraction"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-amber-600 dark:text-amber-400",children:eF.reduce((e,t)=>e+(t.extraction_count||0),0)}),(0,a.jsx)("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 hidden group-hover:block z-50 pointer-events-none",children:(0,a.jsxs)("div",{className:"bg-gray-900 text-white text-xs rounded-lg px-3 py-2 whitespace-nowrap shadow-lg",children:["Resource extraction units: $",eM.extraction.baseRevenue,"/hr revenue \xd7 multiplier"]})})]})]}),(()=>{let e={};return eF.forEach(t=>{let r=t.state_code;e[r]||(e[r]=[]),e[r].push(t)}),Object.entries(e).map(e=>{var t,r;let[s,o]=e,i=(null===(t=o[0])||void 0===t?void 0:t.state_name)||eZ[s]||s,n=(null===(r=o[0])||void 0===r?void 0:r.state_multiplier)||1,d=0,c=0;o.forEach(e=>{if(e.retail_count>0){let{unitRevenuePerHour:t,unitCostPerHour:r}=e$(e.sector_type,"retail");d+=t*e.retail_count*96,c+=r*e.retail_count*96}if(e.production_count>0){let{unitRevenuePerHour:t,unitCostPerHour:r}=eW(e.sector_type);d+=96*t*e.production_count,c+=96*r*e.production_count}if(e.service_count>0){let{unitRevenuePerHour:t,unitCostPerHour:r}=e$(e.sector_type,"service");d+=t*e.service_count*96,c+=r*e.service_count*96}if(e.extraction_count&&e.extraction_count>0){let t=eO[e.sector_type],r=0;if(t&&t.length>0){let e=t[0];eL[e]&&(r=192*eL[e].currentPrice)}0===r&&(r=96*eM.extraction.baseRevenue);let a=96*eM.extraction.baseCost;d+=r*e.extraction_count,c+=a*e.extraction_count}});let x=d-c,m=o.reduce((e,t)=>e+t.retail_count,0),u=o.reduce((e,t)=>e+t.production_count,0),g=o.reduce((e,t)=>e+t.service_count,0),h=o.reduce((e,t)=>e+(t.extraction_count||0),0);return(0,a.jsxs)("div",{className:"rounded-xl border border-gray-200 dark:border-gray-700 overflow-visible",children:[(0,a.jsx)("div",{className:"bg-gray-50 dark:bg-gray-800/50 px-4 py-3 border-b border-gray-200 dark:border-gray-700",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)(l.default,{href:"/states/".concat(s),className:"flex items-center gap-2 hover:text-corporate-blue dark:hover:text-corporate-blue-light transition-colors",children:[(0,a.jsx)(O.Z,{className:"w-4 h-4 text-corporate-blue"}),(0,a.jsx)("span",{className:"font-semibold text-gray-900 dark:text-white",children:i}),(0,a.jsxs)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["(",s,")"]}),(0,a.jsxs)("span",{className:"text-xs font-medium px-2 py-0.5 rounded-full bg-corporate-blue/10 text-corporate-blue dark:text-corporate-blue-light group relative cursor-help",children:[n.toFixed(1),"x",(0,a.jsx)("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 hidden group-hover:block z-50 pointer-events-none",children:(0,a.jsx)("div",{className:"bg-gray-900 text-white text-xs rounded-lg px-3 py-2 whitespace-nowrap shadow-lg",children:"State capacity multiplier - affects max units per sector (not revenue)"})})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"text-right group relative",children:[(0,a.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Revenue"}),(0,a.jsx)("p",{className:"text-sm font-bold text-emerald-600 dark:text-emerald-400 font-mono",children:eY(d)}),(0,a.jsx)("div",{className:"absolute bottom-full right-0 mb-2 hidden group-hover:block z-50 pointer-events-none",children:(0,a.jsxs)("div",{className:"bg-gray-900 text-white text-xs rounded-lg px-3 py-2 shadow-lg text-left max-w-xs",children:[(0,a.jsx)("p",{className:"font-medium mb-1",children:"96-hour Revenue Breakdown"}),(0,a.jsx)("p",{className:"text-gray-400 text-xs mb-1",children:"(No state multiplier on revenue - multipliers affect capacity only)"}),(0,a.jsxs)("div",{className:"space-y-1",children:[m>0&&(0,a.jsxs)("p",{children:["Retail: ",m," \xd7 $",eM.retail.baseRevenue,"/hr \xd7 96hr"]}),u>0&&(0,a.jsxs)("p",{children:["Production: ",u," units (dynamic pricing)"]}),g>0&&(0,a.jsxs)("p",{children:["Service: ",g," \xd7 $",eM.service.baseRevenue,"/hr \xd7 96hr"]}),h>0&&(0,a.jsxs)("p",{children:["Extraction: ",h," units (dynamic pricing)"]})]}),(0,a.jsxs)("p",{className:"border-t border-gray-700 mt-1 pt-1 font-semibold",children:["Total: ",eY(d)]})]})})]}),(0,a.jsxs)("div",{className:"text-right group relative",children:[(0,a.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Profit"}),(0,a.jsx)("p",{className:"text-sm font-bold font-mono ".concat(x>=0?"text-emerald-600 dark:text-emerald-400":"text-red-600 dark:text-red-400"),children:eY(x)}),(0,a.jsx)("div",{className:"absolute bottom-full right-0 mb-2 hidden group-hover:block z-50 pointer-events-none",children:(0,a.jsxs)("div",{className:"bg-gray-900 text-white text-xs rounded-lg px-3 py-2 whitespace-nowrap shadow-lg text-left",children:[(0,a.jsx)("p",{className:"font-medium mb-1",children:"Net = Revenue - Costs"}),(0,a.jsxs)("p",{className:"text-emerald-400",children:["Revenue: ",eY(d)]}),(0,a.jsxs)("p",{className:"text-red-400",children:["Costs: ",eY(c)]}),(0,a.jsxs)("p",{className:"border-t border-gray-700 mt-1 pt-1",children:["Net: ",eY(x)]})]})})]})]})]})}),(0,a.jsx)("div",{className:"divide-y divide-gray-100 dark:divide-gray-700/50",children:o.map(e=>{var t,r;let s=ej[e.sector_type],o=eT(e.sector_type),l=eO[e.sector_type];e.retail_count,e.production_count,e.service_count,e.extraction_count;let d=0,c=0,x=eW(e.sector_type);if(e.retail_count>0){let{unitRevenuePerHour:t,unitCostPerHour:r}=e$(e.sector_type,"retail");d+=t*e.retail_count*96,c+=r*e.retail_count*96}if(e.production_count>0&&(d+=96*x.unitRevenuePerHour*e.production_count,c+=96*x.unitCostPerHour*e.production_count),e.service_count>0){let{unitRevenuePerHour:t,unitCostPerHour:r}=e$(e.sector_type,"service");d+=t*e.service_count*96,c+=r*e.service_count*96}if(e.extraction_count&&e.extraction_count>0){let t=0;if(l&&l.length>0){let e=l[0];eL[e]&&(t=192*eL[e].currentPrice)}0===t&&(t=96*eM.extraction.baseRevenue);let r=96*eM.extraction.baseCost;d+=t*e.extraction_count,c+=r*e.extraction_count}let m=d-c;return(0,a.jsx)(ey.Z,{sectorType:e.sector_type,stateCode:e.state_code,stateName:i,stateMultiplier:n,enteredDate:e.created_at,units:{retail:e.retail_count,production:e.production_count,service:e.service_count,extraction:e.extraction_count||0},corporation:N?{id:N.id,name:N.name,logo:N.logo}:null,canExtract:o,extractableResources:l,requiredResource:s||null,producedProduct:eN[e.sector_type]||null,productDemands:ew[e.sector_type]||null,revenue:d,profit:m,showActions:N&&z===N.ceo_id,onAbandonUnit:t=>e4(e.id,t,e.sector_type),onBuildUnit:t=>e2(e.id,t),abandoningUnit:(null==ed?void 0:ed.startsWith("".concat(e.id,"-")))?ed.split("-")[1]:null,building:(null==ex?void 0:ex.startsWith("".concat(e.id,"-")))?ex.split("-")[1]:null,canBuild:N&&z===N.ceo_id&&(null!==(r=N.capital)&&void 0!==r?r:0)>=1e4,buildCost:1e4,formatCurrency:eY,calculateUnitProfit:t=>{if("retail"===t||"service"===t){let{unitRevenuePerHour:r,unitCostPerHour:a}=e$(e.sector_type,t);return(r-a)*96}return"production"===t?(x.unitRevenuePerHour-x.unitCostPerHour)*96:"extraction"===t?l&&l.length>0&&eL[l[0]]?192*eL[l[0]].currentPrice-96*eM.extraction.baseCost:(eM.extraction.baseRevenue-eM.extraction.baseCost)*96:0},UNIT_ECONOMICS:eM,SECTORS_CAN_EXTRACT:eO,commodityPrices:eL,productPrices:eR,EXTRACTION_OUTPUT_RATE:2,unitFlows:null==eH?void 0:null===(t=eH.sector_unit_flows)||void 0===t?void 0:t[e.sector_type],productReferenceValues:eQ},e.id)})})]},s)})})(),(0,a.jsxs)("div",{className:"rounded-xl border border-white/60 bg-white/70 dark:border-gray-800/70 dark:bg-gray-800/60 p-6 shadow-sm mt-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[(0,a.jsx)(c.Z,{className:"w-5 h-5 text-amber-600"}),"Resource Inputs Required",(0,a.jsx)("span",{className:"text-xs font-normal text-gray-500 dark:text-gray-400 ml-2",children:"(for production units)"})]}),(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:(()=>{let e={};return(eF.forEach(t=>{if(t.production_count>0){let r=eq(t.sector_type),a=null==r?void 0:r.inputs.resources;if(a)Object.entries(a).forEach(r=>{let[a,s]=r;e[a]=(e[a]||0)+s*t.production_count});else{let r=ej[t.sector_type];r&&(e[r]=(e[r]||0)+t.production_count)}}}),0===Object.keys(e).length)?(0,a.jsx)("div",{className:"col-span-full text-center py-4",children:(0,a.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No production units requiring resources"})}):Object.entries(e).map(e=>{let[t,r]=e;return(0,a.jsxs)("div",{className:"rounded-lg p-4 group relative ".concat(eC[t]||"bg-gray-100 dark:bg-gray-800"),children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[eS[t],(0,a.jsx)("span",{className:"font-medium text-sm",children:t})]}),(0,a.jsx)("p",{className:"text-2xl font-bold",children:r.toLocaleString(void 0,{maximumFractionDigits:2})}),(0,a.jsx)("p",{className:"text-xs opacity-75",children:"units required / hr"}),(0,a.jsx)("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 hidden group-hover:block z-50 pointer-events-none",children:(0,a.jsxs)("div",{className:"bg-gray-900 text-white text-xs rounded-lg px-3 py-2 whitespace-nowrap shadow-lg",children:[(0,a.jsxs)("p",{className:"font-medium",children:[t," Demand"]}),(0,a.jsxs)("p",{children:[r.toLocaleString(void 0,{maximumFractionDigits:2})," units/hr needed across production"]}),(0,a.jsx)("p",{className:"text-gray-400 mt-1",children:"efficiency = min(1, available / total demand)"})]})})]},t)})})()})]}),(0,a.jsxs)("div",{className:"rounded-xl border border-white/60 bg-white/70 dark:border-gray-800/70 dark:bg-gray-800/60 p-6 shadow-sm mt-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[(0,a.jsx)(x.Z,{className:"w-5 h-5 text-amber-600"}),"Extraction Output",(0,a.jsx)("span",{className:"text-xs font-normal text-gray-500 dark:text-gray-400 ml-2",children:"(resources extracted)"})]}),(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:(()=>{let e={};return(eF.forEach(t=>{let r=eO[t.sector_type];r&&(t.extraction_count||0)>0&&r.forEach(r=>{e[r]=(e[r]||0)+(t.extraction_count||0)})}),0===Object.keys(e).length)?(0,a.jsx)("div",{className:"col-span-full text-center py-4",children:(0,a.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No extraction units producing resources"})}):Object.entries(e).map(e=>{let[t,r]=e;return(0,a.jsxs)("div",{className:"rounded-lg p-4 group relative ".concat(eC[t]||"bg-gray-100 dark:bg-gray-800"),children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[eS[t],(0,a.jsx)("span",{className:"font-medium text-sm",children:t})]}),(0,a.jsx)("p",{className:"text-2xl font-bold",children:r}),(0,a.jsx)("p",{className:"text-xs opacity-75",children:"units extracted"}),(0,a.jsx)("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 hidden group-hover:block z-50 pointer-events-none",children:(0,a.jsxs)("div",{className:"bg-gray-900 text-white text-xs rounded-lg px-3 py-2 whitespace-nowrap shadow-lg",children:[(0,a.jsxs)("p",{className:"font-medium",children:[t," Extraction"]}),(0,a.jsxs)("p",{children:[r," extraction units producing this resource"]}),(0,a.jsx)("p",{className:"text-emerald-400 mt-1",children:"Adds to state/national resource pool"})]})})]},t)})})()})]}),(0,a.jsxs)("div",{className:"rounded-xl border border-white/60 bg-white/70 dark:border-gray-800/70 dark:bg-gray-800/60 p-6 shadow-sm mt-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[(0,a.jsx)(I.Z,{className:"w-5 h-5 text-emerald-600"}),"Product Output"]}),(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:(()=>{let e={};return(eF.forEach(t=>{if(t.production_count>0){let r=eq(t.sector_type),a=null==r?void 0:r.outputs.products;if(a)Object.entries(a).forEach(r=>{let[a,s]=r;e[a]=(e[a]||0)+s*t.production_count});else{let r=eN[t.sector_type];r&&(e[r]=(e[r]||0)+1*t.production_count)}}}),0===Object.keys(e).length)?(0,a.jsx)("div",{className:"col-span-full text-center py-4",children:(0,a.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No production units creating products"})}):Object.entries(e).map(e=>{let[t,r]=e;return(0,a.jsxs)("div",{className:"rounded-lg p-4 ".concat(eP[t]||"bg-gray-100 dark:bg-gray-800"),children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[eE[t],(0,a.jsx)("span",{className:"font-medium text-sm",children:t})]}),(0,a.jsx)("p",{className:"text-2xl font-bold",children:r.toLocaleString(void 0,{maximumFractionDigits:2})}),(0,a.jsx)("p",{className:"text-xs opacity-75",children:"units produced / hr"})]},t)})})()})]}),(0,a.jsxs)("div",{className:"rounded-xl border border-white/60 bg-white/70 dark:border-gray-800/70 dark:bg-gray-800/60 p-6 shadow-sm mt-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[(0,a.jsx)(_.Z,{className:"w-5 h-5 text-orange-600"}),"Product Inputs Required",(0,a.jsx)("span",{className:"text-xs font-normal text-gray-500 dark:text-gray-400 ml-2",children:"(from national pool)"})]}),(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:(()=>{let e={};return(eF.forEach(t=>{if(t.production_count>0){let r=eq(t.sector_type),a=null==r?void 0:r.inputs.products;if(a)Object.entries(a).forEach(r=>{let[a,s]=r;e[a]=(e[a]||0)+s*t.production_count});else{let r=ew[t.sector_type];r&&r.forEach(r=>{e[r]=(e[r]||0)+.5*t.production_count}),e.Electricity=(e.Electricity||0)+.5*t.production_count}}}),0===Object.keys(e).length)?(0,a.jsx)("div",{className:"col-span-full text-center py-4",children:(0,a.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No production units requiring products"})}):Object.entries(e).map(e=>{let[t,r]=e;return(0,a.jsxs)("div",{className:"rounded-lg p-4 ".concat(eP[t]||"bg-gray-100 dark:bg-gray-800"),children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[eE[t],(0,a.jsx)("span",{className:"font-medium text-sm",children:t})]}),(0,a.jsx)("p",{className:"text-2xl font-bold",children:r.toLocaleString(void 0,{maximumFractionDigits:2})}),(0,a.jsx)("p",{className:"text-xs opacity-75",children:"units needed / hr"})]},t)})})()})]})]})]})]}),"finance"===ei&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"relative rounded-2xl border border-gray-200/50 dark:border-gray-700/50 bg-gradient-to-br from-white via-white to-gray-50/50 dark:from-gray-900 dark:via-gray-900 dark:to-gray-800/50 shadow-2xl overflow-hidden backdrop-blur-sm",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-corporate-blue/5 via-transparent to-corporate-blue-light/5 dark:from-corporate-blue/10 dark:via-transparent dark:to-corporate-blue-dark/10 pointer-events-none"}),(0,a.jsx)("div",{className:"absolute inset-0 ring-1 ring-inset ring-white/20 dark:ring-gray-700/30 pointer-events-none"}),(0,a.jsxs)("div",{className:"relative p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-6",children:"Finance & Capital"}),e5?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"rounded-xl border border-white/60 bg-white/70 dark:border-gray-800/70 dark:bg-gray-800/60 p-6 shadow-sm",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[(0,a.jsx)(S.Z,{className:"w-5 h-5 text-corporate-blue"}),"Issue New Shares"]}),(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Issue new shares at market price to raise capital. You can issue up to 10% of current outstanding shares."}),(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"issueShares",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Number of Shares to Issue"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("input",{type:"number",id:"issueShares",min:"1",max:Math.floor(.1*N.shares),value:ee,onChange:e=>et(e.target.value),placeholder:"Shares",className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm focus:ring-2 focus:ring-corporate-blue focus:border-transparent",disabled:er}),(0,a.jsxs)("button",{onClick:e0,disabled:er||!ee||!N,className:"px-6 py-2 bg-corporate-blue text-white rounded-lg hover:bg-corporate-blue-dark disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-2 text-sm font-semibold",children:[(0,a.jsx)(S.Z,{className:"w-4 h-4"}),"Issue"]})]}),ee&&!isNaN(parseInt(ee,10))&&N&&(0,a.jsxs)("div",{className:"mt-2 space-y-1 text-sm",children:[(0,a.jsxs)("p",{className:"text-gray-600 dark:text-gray-400",children:["Issue Price: ",(0,a.jsx)("span",{className:"font-semibold",children:eY(N.share_price)})]}),(0,a.jsxs)("p",{className:"text-gray-600 dark:text-gray-400",children:["Capital Raised: ",(0,a.jsx)("span",{className:"font-semibold",children:eY(parseInt(ee,10)*N.share_price)})]}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Max issueable: ",Math.floor(.1*N.shares).toLocaleString()," shares (10% of ",N.shares.toLocaleString(),")"]})]})]})})]}),(0,a.jsxs)("div",{className:"rounded-xl border border-white/60 bg-white/70 dark:border-gray-800/70 dark:bg-gray-800/60 p-6 shadow-sm",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[(0,a.jsx)(D.Z,{className:"w-5 h-5 text-corporate-blue"}),"Corporate Capital"]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Current Capital"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white font-mono",children:(0,d.E)(null!==(u=null!==(m=null==eh?void 0:eh.cash)&&void 0!==m?m:N.capital)&&void 0!==u?u:0)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Market Cap"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-corporate-blue dark:text-corporate-blue-light font-mono",children:(0,d.E)(e3)})]})]})]})]}):(0,a.jsx)("div",{className:"rounded-xl border border-white/60 bg-white/70 dark:border-gray-800/70 dark:bg-gray-800/60 p-6 shadow-sm text-center",children:(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Only the CEO can manage corporate finance and issue shares."})})]})]}),(0,a.jsxs)("div",{className:"relative rounded-2xl border border-gray-200/50 dark:border-gray-700/50 bg-gradient-to-br from-white via-white to-gray-50/50 dark:from-gray-900 dark:via-gray-900 dark:to-gray-800/50 shadow-2xl overflow-hidden backdrop-blur-sm mt-6",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-corporate-blue/5 via-transparent to-corporate-blue-light/5 dark:from-corporate-blue/10 dark:via-transparent dark:to-corporate-blue-dark/10 pointer-events-none"}),(0,a.jsx)("div",{className:"absolute inset-0 ring-1 ring-inset ring-white/20 dark:ring-gray-700/30 pointer-events-none"}),(0,a.jsxs)("div",{className:"relative p-6",children:[(0,a.jsxs)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2 flex items-center gap-2",children:[(0,a.jsx)(L.Z,{className:"w-5 h-5 text-corporate-blue"}),"Financial Statement"]}),(0,a.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-6",children:"96-hour projection based on market operations"}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[(0,a.jsx)(D.Z,{className:"w-4 h-4 text-corporate-blue"}),"Balance Sheet"]}),(0,a.jsxs)("div",{className:"rounded-xl border border-white/60 bg-white/70 dark:border-gray-800/70 dark:bg-gray-800/60 p-4 shadow-sm",children:[(0,a.jsx)("h4",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:"Assets"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center py-1 border-b border-gray-200 dark:border-gray-700",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Cash"}),(0,a.jsx)("span",{className:"text-sm font-semibold text-gray-900 dark:text-white font-mono",children:(0,d.E)(null!==(h=null!==(g=null==eh?void 0:eh.cash)&&void 0!==g?g:N.capital)&&void 0!==h?h:0)})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center py-1 border-b border-gray-200 dark:border-gray-700",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Business Units"}),(0,a.jsx)("span",{className:"text-sm font-semibold text-gray-900 dark:text-white font-mono",children:eY((null==eh?void 0:eh.businessUnitAssets)||0)})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center pt-2 border-t-2 border-gray-300 dark:border-gray-600",children:[(0,a.jsx)("span",{className:"text-sm font-bold text-gray-900 dark:text-white",children:"Total Assets"}),(0,a.jsx)("span",{className:"text-sm font-bold text-corporate-blue dark:text-corporate-blue-light font-mono",children:eY((null==eh?void 0:eh.totalAssets)||N.capital||0)})]})]})]}),(0,a.jsxs)("div",{className:"rounded-xl border border-white/60 bg-white/70 dark:border-gray-800/70 dark:bg-gray-800/60 p-4 shadow-sm",children:[(0,a.jsx)("h4",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:"Liabilities & Equity"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center py-1 border-b border-gray-200 dark:border-gray-700",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Liabilities"}),(0,a.jsx)("span",{className:"text-sm font-semibold text-gray-900 dark:text-white font-mono",children:eY((null==eh?void 0:eh.totalLiabilities)||0)})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center py-1 border-b border-gray-200 dark:border-gray-700",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Shareholders' Equity"}),(0,a.jsx)("span",{className:"text-sm font-semibold text-gray-900 dark:text-white font-mono",children:eY((null==eh?void 0:eh.shareholdersEquity)||N.capital||0)})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center py-1 border-b border-gray-200 dark:border-gray-700",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Book Value/Share"}),(0,a.jsx)("span",{className:"text-sm font-semibold text-emerald-600 dark:text-emerald-400 font-mono",children:eY((null==eh?void 0:eh.bookValuePerShare)||0)})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center pt-2 border-t-2 border-gray-300 dark:border-gray-600",children:[(0,a.jsx)("span",{className:"text-sm font-bold text-gray-900 dark:text-white",children:"Total L&E"}),(0,a.jsx)("span",{className:"text-sm font-bold text-corporate-blue dark:text-corporate-blue-light font-mono",children:eY((null==eh?void 0:eh.totalAssets)||N.capital||0)})]})]})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[(0,a.jsx)(F.Z,{className:"w-4 h-4 text-corporate-blue"}),"Income Statement"]}),(0,a.jsxs)("div",{className:"rounded-xl border border-white/60 bg-white/70 dark:border-gray-800/70 dark:bg-gray-800/60 p-4 shadow-sm",children:[(0,a.jsxs)("div",{className:"grid grid-cols-[1fr,auto,auto] gap-2 pb-2 mb-2 border-b border-gray-200 dark:border-gray-700",children:[(0,a.jsx)("div",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400"}),(0,a.jsx)("div",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 text-right min-w-[80px]",children:"96hr"}),(0,a.jsx)("div",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 text-right min-w-[80px]",children:"Hourly"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"grid grid-cols-[1fr,auto,auto] gap-2 items-center py-1 border-b border-gray-200 dark:border-gray-700",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Revenue"}),(0,a.jsx)("span",{className:"text-sm font-semibold text-emerald-600 dark:text-emerald-400 font-mono text-right min-w-[80px]",children:eY(eG.revenue)}),(0,a.jsx)("span",{className:"text-xs text-emerald-600 dark:text-emerald-400 font-mono text-right min-w-[80px]",children:eY(eG.revenue/96)})]}),(0,a.jsxs)("div",{className:"grid grid-cols-[1fr,auto,auto] gap-2 items-center py-1 border-b border-gray-200 dark:border-gray-700",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Operating Costs"}),(0,a.jsx)("span",{className:"text-sm font-semibold text-red-600 dark:text-red-400 font-mono text-right min-w-[80px]",children:eY(eG.variableCosts)}),(0,a.jsx)("span",{className:"text-xs text-red-600 dark:text-red-400 font-mono text-right min-w-[80px]",children:eY(eG.variableCosts/96)})]}),(0,a.jsxs)("div",{className:"grid grid-cols-[1fr,auto,auto] gap-2 items-center py-1 border-b border-gray-200 dark:border-gray-700",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"CEO Salary"}),(0,a.jsx)("span",{className:"text-sm font-semibold font-mono text-right min-w-[80px] ".concat((N.ceo_salary||1e5)>0?"text-purple-600 dark:text-purple-400":"text-gray-400 dark:text-gray-500"),children:eY(null!==(p=N.ceo_salary)&&void 0!==p?p:1e5)}),(0,a.jsx)("span",{className:"text-xs font-mono text-right min-w-[80px] ".concat((N.ceo_salary||1e5)>0?"text-purple-600 dark:text-purple-400":"text-gray-400 dark:text-gray-500"),children:eY((null!==(y=N.ceo_salary)&&void 0!==y?y:1e5)/96)})]}),(0,a.jsxs)("div",{className:"grid grid-cols-[1fr,auto,auto] gap-2 items-center py-1 border-b border-gray-200 dark:border-gray-700",children:[(0,a.jsx)("span",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300",children:"Operating Income"}),(0,a.jsx)("span",{className:"text-sm font-semibold font-mono text-right min-w-[80px] ".concat((eG.operatingIncome||0)>=0?"text-emerald-600 dark:text-emerald-400":"text-red-600 dark:text-red-400"),children:eY(eG.operatingIncome)}),(0,a.jsx)("span",{className:"text-xs font-mono text-right min-w-[80px] ".concat((eG.operatingIncome||0)>=0?"text-emerald-600 dark:text-emerald-400":"text-red-600 dark:text-red-400"),children:eY(eG.operatingIncome/96)})]}),(0,a.jsxs)("div",{className:"grid grid-cols-[1fr,auto,auto] gap-2 items-center py-1 border-b border-gray-200 dark:border-gray-700",children:[(0,a.jsxs)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Dividends (",(N.dividend_percentage||0).toFixed(1),"%)"]}),(0,a.jsx)("span",{className:"text-sm font-semibold font-mono text-right min-w-[80px] ".concat(eG.dividends>0?"text-amber-600 dark:text-amber-400":"text-gray-400 dark:text-gray-500"),children:eG.dividends>0?"-".concat(eY(eG.dividends)):"$0.00"}),(0,a.jsx)("span",{className:"text-xs font-mono text-right min-w-[80px] ".concat(eG.dividends>0?"text-amber-600 dark:text-amber-400":"text-gray-400 dark:text-gray-500"),children:eG.dividends>0?"-".concat(eY(eG.dividends/96)):"$0.00"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-[1fr,auto,auto] gap-2 items-center pt-2 border-t-2 border-gray-300 dark:border-gray-600",children:[(0,a.jsx)("span",{className:"text-sm font-bold text-gray-900 dark:text-white",children:"Retained Earnings"}),(0,a.jsx)("span",{className:"text-sm font-bold font-mono text-right min-w-[80px] ".concat((eG.retainedEarnings||0)>=0?"text-emerald-600 dark:text-emerald-400":"text-red-600 dark:text-red-400"),children:eY(eG.retainedEarnings)}),(0,a.jsx)("span",{className:"text-xs font-bold font-mono text-right min-w-[80px] ".concat((eG.retainedEarnings||0)>=0?"text-emerald-600 dark:text-emerald-400":"text-red-600 dark:text-red-400"),children:eY(eG.retainedEarnings/96)})]})]})]})]})]}),(0,a.jsxs)("div",{className:"mt-6 p-4 rounded-lg bg-gray-50 dark:bg-gray-800/50 border border-gray-200 dark:border-gray-700",children:[(0,a.jsx)("h4",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:"Stock Price Valuation"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500 dark:text-gray-400 block text-xs mb-1",children:"Current Price"}),(0,a.jsx)("span",{className:"font-mono font-semibold text-lg text-gray-900 dark:text-white",children:eY(N.share_price||0)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500 dark:text-gray-400 block text-xs mb-1",children:"Book Value/Share"}),(0,a.jsx)("span",{className:"font-mono font-semibold text-gray-900 dark:text-white",children:eY((null==eV?void 0:eV.book_value)||(null==eh?void 0:eh.bookValuePerShare)||0)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500 dark:text-gray-400 block text-xs mb-1",children:"Total Shares"}),(0,a.jsx)("span",{className:"font-mono font-semibold text-gray-900 dark:text-white",children:(null==e6?void 0:e6.toLocaleString())||0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500 dark:text-gray-400 block text-xs mb-1",children:"Markets Active"}),(0,a.jsx)("span",{className:"font-mono font-semibold text-gray-900 dark:text-white",children:(null==eh?void 0:eh.marketsCount)||0})]})]}),eV&&(0,a.jsxs)("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-3 mt-3",children:[(0,a.jsx)("h5",{className:"text-xs font-semibold text-gray-600 dark:text-gray-400 mb-2 uppercase tracking-wide",children:"Valuation Components"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3 text-xs",children:[(0,a.jsxs)("div",{className:"group relative",children:[(0,a.jsx)("span",{className:"text-gray-500 dark:text-gray-400 block mb-1",children:"Earnings Value"}),(0,a.jsx)("span",{className:"font-mono font-medium ".concat(eV.earnings_value>=0?"text-emerald-600 dark:text-emerald-400":"text-red-600 dark:text-red-400"),children:eY(eV.earnings_value)}),(0,a.jsx)("div",{className:"absolute bottom-full left-0 mb-2 hidden group-hover:block z-[9999] pointer-events-none",children:(0,a.jsxs)("div",{className:"bg-gray-900 text-white text-xs rounded-lg px-3 py-2 shadow-xl whitespace-nowrap",children:[(0,a.jsx)("p",{className:"font-medium",children:"Earnings-Based Valuation (96hr)"}),(0,a.jsxs)("p",{className:"text-gray-300",children:["Operating Profit: ",eY(eV.annual_profit)]}),(0,a.jsxs)("p",{className:"text-gray-300",children:["EPS \xd7 P/E (15x) = ",eY(eV.annual_profit/(e6||1))," \xd7 15"]})]})})]}),(0,a.jsxs)("div",{className:"group relative",children:[(0,a.jsx)("span",{className:"text-gray-500 dark:text-gray-400 block mb-1",children:"Cash/Share"}),(0,a.jsx)("span",{className:"font-mono font-medium text-blue-600 dark:text-blue-400",children:eY(eV.cash_per_share)}),(0,a.jsx)("div",{className:"absolute bottom-full left-0 mb-2 hidden group-hover:block z-[9999] pointer-events-none",children:(0,a.jsxs)("div",{className:"bg-gray-900 text-white text-xs rounded-lg px-3 py-2 shadow-xl whitespace-nowrap",children:[(0,a.jsx)("p",{className:"font-medium",children:"Cash Position"}),(0,a.jsxs)("p",{className:"text-gray-300",children:["Total Capital: ",eY((null==eh?void 0:eh.cash)||0)]}),(0,a.jsxs)("p",{className:"text-gray-300",children:["Per Share: ",eY(eV.cash_per_share)]})]})})]}),(0,a.jsxs)("div",{className:"group relative",children:[(0,a.jsx)("span",{className:"text-gray-500 dark:text-gray-400 block mb-1",children:"Dividend Yield"}),(0,a.jsxs)("span",{className:"font-mono font-medium text-purple-600 dark:text-purple-400",children:[eV.dividend_yield.toFixed(2),"%"]}),(0,a.jsx)("div",{className:"absolute bottom-full left-0 mb-2 hidden group-hover:block z-[9999] pointer-events-none",children:(0,a.jsxs)("div",{className:"bg-gray-900 text-white text-xs rounded-lg px-3 py-2 shadow-xl whitespace-nowrap",children:[(0,a.jsx)("p",{className:"font-medium",children:"Dividend Information"}),(0,a.jsxs)("p",{className:"text-gray-300",children:["Div/Share (96hr): ",eY(eV.annual_dividend_per_share)]}),(0,a.jsxs)("p",{className:"text-gray-300",children:["Yield: ",eV.dividend_yield.toFixed(2),"%"]})]})})]}),(0,a.jsxs)("div",{className:"group relative",children:[(0,a.jsx)("span",{className:"text-gray-500 dark:text-gray-400 block mb-1",children:"Trade Price"}),(0,a.jsx)("span",{className:"font-mono font-medium text-amber-600 dark:text-amber-400",children:eV.has_trade_history?eY(eV.trade_weighted_price):"—"}),(0,a.jsx)("div",{className:"absolute bottom-full left-0 mb-2 hidden group-hover:block z-[9999] pointer-events-none",children:(0,a.jsxs)("div",{className:"bg-gray-900 text-white text-xs rounded-lg px-3 py-2 shadow-xl whitespace-nowrap",children:[(0,a.jsx)("p",{className:"font-medium",children:"Trade History"}),(0,a.jsxs)("p",{className:"text-gray-300",children:[eV.recent_trade_count," recent trades"]}),(0,a.jsxs)("p",{className:"text-gray-300",children:["Weighted avg: ",eY(eV.trade_weighted_price)]})]})})]}),(0,a.jsxs)("div",{className:"group relative",children:[(0,a.jsx)("span",{className:"text-gray-500 dark:text-gray-400 block mb-1",children:"Fundamental Value"}),(0,a.jsx)("span",{className:"font-mono font-medium text-gray-900 dark:text-white",children:eY(eV.fundamental_value)}),(0,a.jsx)("div",{className:"absolute bottom-full left-0 mb-2 hidden group-hover:block z-[9999] pointer-events-none",children:(0,a.jsxs)("div",{className:"bg-gray-900 text-white text-xs rounded-lg px-3 py-2 shadow-xl whitespace-nowrap",children:[(0,a.jsx)("p",{className:"font-medium",children:"Fundamental Value"}),(0,a.jsxs)("p",{className:"text-gray-300",children:["45% Book: ",eY(.45*eV.book_value)]}),(0,a.jsxs)("p",{className:"".concat(eV.earnings_value<0?"text-red-400":"text-gray-300"),children:["25% Earnings: ",eY(.25*eV.earnings_value)]}),(0,a.jsxs)("p",{className:"text-amber-400",children:["10% Dividend: ",eY(1*eV.annual_dividend_per_share)]})]})})]})]})]}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-3 pt-3 border-t border-gray-200 dark:border-gray-700",children:[(0,a.jsx)("strong",{children:"Price Formula:"})," 45% Book Value + 25% Earnings (96hr \xd7 PE 15) + 20% Trade History + 10% Dividend Yield (min $0.01)"]})]})]})]}),eu&&eu.markets_count>0&&(0,a.jsxs)("div",{className:"relative rounded-2xl border border-gray-200/50 dark:border-gray-700/50 bg-gradient-to-br from-white via-white to-gray-50/50 dark:from-gray-900 dark:via-gray-900 dark:to-gray-800/50 shadow-2xl overflow-hidden backdrop-blur-sm mt-6",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-corporate-blue/5 via-transparent to-corporate-blue-light/5 dark:from-corporate-blue/10 dark:via-transparent dark:to-corporate-blue-dark/10 pointer-events-none"}),(0,a.jsx)("div",{className:"absolute inset-0 ring-1 ring-inset ring-white/20 dark:ring-gray-700/30 pointer-events-none"}),(0,a.jsxs)("div",{className:"relative p-6",children:[(0,a.jsxs)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[(0,a.jsx)(A.Z,{className:"w-5 h-5 text-corporate-blue"}),"Business Units"]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"text-center p-4 rounded-xl bg-pink-50 dark:bg-pink-900/20 border border-pink-200 dark:border-pink-800/30",children:[(0,a.jsx)(R.Z,{className:"h-8 w-8 text-pink-500 mx-auto mb-2"}),(0,a.jsx)("p",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:eu.total_retail_units}),(0,a.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Retail Units"})]}),(0,a.jsxs)("div",{className:"text-center p-4 rounded-xl bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-800/30",children:[(0,a.jsx)(A.Z,{className:"h-8 w-8 text-orange-500 mx-auto mb-2"}),(0,a.jsx)("p",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:eu.total_production_units}),(0,a.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Production Units"})]}),(0,a.jsxs)("div",{className:"text-center p-4 rounded-xl bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800/30",children:[(0,a.jsx)(T.Z,{className:"h-8 w-8 text-blue-500 mx-auto mb-2"}),(0,a.jsx)("p",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:eu.total_service_units}),(0,a.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Service Units"})]}),(0,a.jsxs)("div",{className:"text-center p-4 rounded-xl bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800/30",children:[(0,a.jsx)(x.Z,{className:"h-8 w-8 text-amber-600 mx-auto mb-2"}),(0,a.jsx)("p",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:eu.total_extraction_units||0}),(0,a.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Extraction Units"})]})]}),(0,a.jsxs)("div",{className:"mt-4 flex justify-between items-center text-sm",children:[(0,a.jsxs)("span",{className:"text-gray-500 dark:text-gray-400",children:["Total: ",(eu.total_retail_units||0)+(eu.total_production_units||0)+(eu.total_service_units||0)+(eu.total_extraction_units||0)," units"]}),(0,a.jsxs)("span",{className:"text-gray-500 dark:text-gray-400",children:[eu.markets_count," market",1!==eu.markets_count?"s":""," active"]})]})]})]}),eF.length>0&&(0,a.jsxs)("div",{className:"relative rounded-2xl border border-gray-200/50 dark:border-gray-700/50 bg-gradient-to-br from-white via-white to-gray-50/50 dark:from-gray-900 dark:via-gray-900 dark:to-gray-800/50 shadow-2xl overflow-hidden backdrop-blur-sm mt-6",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-corporate-blue/5 via-transparent to-corporate-blue-light/5 dark:from-corporate-blue/10 dark:via-transparent dark:to-corporate-blue-dark/10 pointer-events-none"}),(0,a.jsx)("div",{className:"absolute inset-0 ring-1 ring-inset ring-white/20 dark:ring-gray-700/30 pointer-events-none"}),(0,a.jsxs)("div",{className:"relative p-6",children:[(0,a.jsxs)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[(0,a.jsx)(O.Z,{className:"w-5 h-5 text-corporate-blue"}),"Market Presence"]}),(0,a.jsx)("div",{className:"grid gap-3 md:grid-cols-2",children:eF.map(e=>{var t;return(0,a.jsxs)(l.default,{href:"/states/".concat(e.state_code),className:"flex items-center justify-between p-4 rounded-xl border border-gray-200 dark:border-gray-700 bg-white/50 dark:bg-gray-800/50 hover:border-corporate-blue/50 dark:hover:border-corporate-blue/50 hover:shadow-lg transition-all group",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"font-semibold text-gray-900 dark:text-white group-hover:text-corporate-blue transition-colors",children:e.state_name||e.state_code}),(0,a.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.sector_type}),(0,a.jsxs)("div",{className:"flex gap-2 mt-2 text-xs",children:[(e.retail_count||0)>0&&(0,a.jsxs)("span",{className:"px-2 py-0.5 rounded-full bg-pink-100 dark:bg-pink-900/30 text-pink-700 dark:text-pink-300",children:[e.retail_count," retail"]}),(e.production_count||0)>0&&(0,a.jsxs)("span",{className:"px-2 py-0.5 rounded-full bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-300",children:[e.production_count," prod"]}),(e.service_count||0)>0&&(0,a.jsxs)("span",{className:"px-2 py-0.5 rounded-full bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300",children:[e.service_count," svc"]}),(e.extraction_count||0)>0&&(0,a.jsxs)("span",{className:"px-2 py-0.5 rounded-full bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-300",children:[e.extraction_count," ext"]})]})]}),(0,a.jsxs)("div",{className:"text-right ml-4",children:[(0,a.jsxs)("p",{className:"text-lg font-bold text-corporate-blue dark:text-corporate-blue-light",children:[null===(t=e.state_multiplier)||void 0===t?void 0:t.toFixed(1),"x"]}),(0,a.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"multiplier"})]})]},e.id)})})]})]}),(!eu||0===eu.markets_count)&&(0,a.jsxs)("div",{className:"relative rounded-2xl border border-dashed border-corporate-blue/30 bg-corporate-blue/5 dark:bg-corporate-blue/10 mt-6 p-8 text-center",children:[(0,a.jsx)(O.Z,{className:"h-12 w-12 text-corporate-blue/50 mx-auto mb-3"}),(0,a.jsx)("p",{className:"text-lg font-semibold text-corporate-blue dark:text-corporate-blue-light",children:"No market operations yet"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1 mb-4",children:"Enter markets via the States page to generate revenue"}),(0,a.jsx)(l.default,{href:"/states",className:"inline-block px-6 py-2 bg-corporate-blue text-white text-sm font-medium rounded-lg hover:bg-corporate-blue-dark transition-colors",children:"View States"})]})]}),"board"===ei&&(0,a.jsx)(ea,{corporationId:f,corporationName:N.name,viewerUserId:z})]}),"board"!==ei&&(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsxs)("div",{className:"relative rounded-2xl border border-gray-200/50 dark:border-gray-700/50 bg-gradient-to-br from-white via-white to-gray-50/50 dark:from-gray-900 dark:via-gray-900 dark:to-gray-800/50 shadow-2xl overflow-hidden backdrop-blur-sm",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-corporate-blue/5 via-transparent to-corporate-blue-light/5 dark:from-corporate-blue/10 dark:via-transparent dark:to-corporate-blue-dark/10 pointer-events-none"}),(0,a.jsx)("div",{className:"absolute inset-0 ring-1 ring-inset ring-white/20 dark:ring-gray-700/30 pointer-events-none"}),(0,a.jsxs)("div",{className:"relative p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4",children:"Quick Actions"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("div",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300",children:"Trade Shares"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400",children:"Buy Shares (1.01x price)"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("input",{type:"number",min:"1",max:N.public_shares,value:G,onChange:e=>Q(e.target.value),placeholder:"Shares",className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm focus:ring-2 focus:ring-corporate-blue focus:border-transparent",disabled:er||!z}),(0,a.jsxs)("button",{onClick:eJ,disabled:er||!G||!z,className:"px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-1 text-sm font-semibold",children:[(0,a.jsx)(U.Z,{className:"w-4 h-4"}),"Buy"]})]}),G&&!isNaN(parseInt(G,10))&&N&&(0,a.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Cost: ",eY(parseInt(G,10)*N.share_price*1.01)]})]}),eo>0&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400",children:["Sell Shares (0.99x price) - You own ",eo.toLocaleString()]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("input",{type:"number",min:"1",max:eo,value:J,onChange:e=>X(e.target.value),placeholder:"Shares",className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm focus:ring-2 focus:ring-corporate-blue focus:border-transparent",disabled:er||!z}),(0,a.jsxs)("button",{onClick:eX,disabled:er||!J||!z,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-1 text-sm font-semibold",children:[(0,a.jsx)(H.Z,{className:"w-4 h-4"}),"Sell"]})]}),J&&!isNaN(parseInt(J,10))&&N&&(0,a.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Revenue: ",eY(parseInt(J,10)*N.share_price*.99)]})]}),!z&&(0,a.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 italic",children:"Please log in to trade shares"})]}),(0,a.jsxs)("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4 space-y-2",children:[(0,a.jsx)(l.default,{href:"/stock-market",className:"block w-full px-4 py-2 text-center border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors shadow-sm hover:shadow-md font-semibold",children:"View Stock Market"}),N.ceo&&(0,a.jsx)(l.default,{href:"/profile/".concat(N.ceo.profile_id),className:"block w-full px-4 py-2 text-center border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors shadow-sm hover:shadow-md font-semibold",children:"View CEO Profile"})]})]})]})]})})]})]})})}}},function(e){e.O(0,[4568,4542,9714,453,4234,4790,9447,988,7115,2364,1744],function(){return e(e.s=532)}),_N_E=e.O()}]);