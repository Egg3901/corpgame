(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5694],{29305:function(e,t,r){Promise.resolve().then(r.bind(r,80134))},80134:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return V}});var a=r(37821),s=r(58078),l=r(58504),i=r(74542),n=r(39447),o=r(64790),c=r(8045),d=r(40398),x=r(81742),u=r(46362),m=r(90586),h=r(57198),g=r(17329),p=r(68980),b=r(23877),y=r(91583),v=r(88620),j=r(15758),f=r(16922),N=r(94713),k=r(5189),w=r(12758),C=r(59428),R=r(19781),P=r(58022),E=r(35619),S=r(32751);let T={Oil:(0,a.jsx)(x.Z,{className:"w-4 h-4"}),"Iron Ore":(0,a.jsx)(u.Z,{className:"w-4 h-4"}),Coal:(0,a.jsx)(m.Z,{className:"w-4 h-4"}),"Rare Earth":(0,a.jsx)(h.Z,{className:"w-4 h-4"}),Copper:(0,a.jsx)(g.Z,{className:"w-4 h-4"}),"Fertile Land":(0,a.jsx)(p.Z,{className:"w-4 h-4"}),Lumber:(0,a.jsx)(b.Z,{className:"w-4 h-4"}),"Chemical Compounds":(0,a.jsx)(y.Z,{className:"w-4 h-4"})},F={Oil:"#1e293b","Iron Ore":"#52525b",Coal:"#374151","Rare Earth":"#7c3aed",Copper:"#ea580c","Fertile Land":"#65a30d",Lumber:"#b45309","Chemical Compounds":"#0891b2"},M={Oil:"bg-slate-800","Iron Ore":"bg-zinc-600",Coal:"bg-gray-700","Rare Earth":"bg-violet-600",Copper:"bg-orange-600","Fertile Land":"bg-lime-600",Lumber:"bg-amber-700","Chemical Compounds":"bg-cyan-600"},_={retail:{baseRevenue:500,baseCost:300},production:{baseRevenue:800,baseCost:600},service:{baseRevenue:400,baseCost:200},extraction:{baseRevenue:400,baseCost:700}},Z={Technology:"Rare Earth",Finance:null,Healthcare:null,"Light Industry":null,Manufacturing:null,Energy:null,Retail:null,"Real Estate":null,Transportation:null,Media:null,Telecommunications:"Copper",Agriculture:"Fertile Land",Defense:null,Hospitality:null,Construction:"Lumber",Pharmaceuticals:"Chemical Compounds",Mining:null,"Heavy Industry":null,Forestry:null},U={Technology:"Technology Products",Finance:null,Healthcare:null,"Light Industry":"Manufactured Goods",Manufacturing:"Manufactured Goods",Energy:"Electricity",Retail:null,"Real Estate":null,Transportation:"Logistics Capacity",Media:null,Telecommunications:null,Agriculture:"Food Products",Defense:"Defense Equipment",Hospitality:null,Construction:"Construction Capacity",Pharmaceuticals:"Pharmaceutical Products",Mining:null,"Heavy Industry":"Steel",Forestry:null},L={Technology:null,Finance:["Technology Products"],Healthcare:["Pharmaceutical Products"],"Light Industry":["Steel"],Manufacturing:["Steel"],Energy:null,Retail:["Manufactured Goods"],"Real Estate":["Construction Capacity"],Transportation:["Steel"],Media:["Technology Products"],Telecommunications:["Technology Products"],Agriculture:null,Defense:["Steel"],Hospitality:["Food Products"],Construction:["Steel"],Pharmaceuticals:null,Mining:null,"Heavy Industry":null,Forestry:null},A={"Technology Products":5e3,"Manufactured Goods":1500,Electricity:200,"Food Products":500,"Construction Capacity":2500,"Pharmaceutical Products":8e3,"Defense Equipment":15e3,"Logistics Capacity":1e3,Steel:850},I={retail:200,production:400,service:150,extraction:250},O={Technology:null,Finance:null,Healthcare:null,"Light Industry":null,Manufacturing:null,Energy:["Oil"],Retail:null,"Real Estate":null,Transportation:null,Media:null,Telecommunications:null,Agriculture:["Fertile Land"],Defense:null,Hospitality:null,Construction:null,Pharmaceuticals:["Chemical Compounds"],Mining:["Iron Ore","Coal","Copper","Rare Earth"],"Heavy Industry":null,Forestry:["Lumber"]},D=e=>{let t=O[e];return null!==t&&t.length>0};function H(e){let{resources:t}=e;if(0===t.length)return null;let r=0,s=t.map((e,t)=>{let a=r;return r+=e.percentage,{...e,startPercentage:a,endPercentage:r,color:F[e.resource]||"#6b7280"}}),l=(e,t,r,a)=>{let s=(a-90)*Math.PI/180;return{x:e+r*Math.cos(s),y:t+r*Math.sin(s)}},i=(e,t,r,a,s,i)=>{let n=l(e,t,r,s),o=l(e,t,r,i),c=l(e,t,a,i),d=l(e,t,a,s),x=i-s<=180?0:1;return["M",n.x,n.y,"A",r,r,0,x,1,o.x,o.y,"L",c.x,c.y,"A",a,a,0,x,0,d.x,d.y,"Z"].join(" ")};return(0,a.jsxs)("svg",{width:180,height:180,viewBox:"0 0 ".concat(180," ").concat(180),className:"drop-shadow-lg",children:[(0,a.jsx)("circle",{cx:90,cy:90,r:70,fill:"#f3f4f6",className:"dark:fill-gray-700"}),s.map((e,t)=>{let r=e.startPercentage/100*360,s=e.endPercentage/100*360;return e.percentage<.5?null:(0,a.jsx)("path",{d:i(90,90,70,40,r,Math.min(s,r+359.9)),fill:e.color,className:"transition-all duration-300 hover:opacity-80",style:{filter:"drop-shadow(0 1px 2px rgba(0,0,0,0.1))"}},e.resource)}),(0,a.jsx)("circle",{cx:90,cy:90,r:40,fill:"white",className:"dark:fill-gray-800"}),(0,a.jsx)("g",{transform:"translate(".concat(78,", ").concat(78,")"),children:(0,a.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-gray-400 dark:text-gray-500",children:(0,a.jsx)("path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"})})})]})}function V(){var e,t,r,x;let h=(0,l.useParams)();(0,l.useRouter)();let g=null===(e=h.code)||void 0===e?void 0:e.toUpperCase(),{config:p}=(0,d.ZV)(),[b,y]=(0,s.useState)(null),[F,V]=(0,s.useState)(!0),[Q,B]=(0,s.useState)(""),[z,G]=(0,s.useState)(""),[Y,q]=(0,s.useState)(!1),[W,X]=(0,s.useState)(null),[J,K]=(0,s.useState)(0),[$,ee]=(0,s.useState)(null),[et,er]=(0,s.useState)({}),[ea,es]=(0,s.useState)({}),[el,ei]=(0,s.useState)(null),en=(0,s.useMemo)(()=>{if(!p)return;let e={};for(let[t,r]of Object.entries(p.products))e[t]=r.referenceValue;return e},[p]),eo=e=>{var t,r;let a=null==el?void 0:null===(r=el.sector_unit_flows)||void 0===r?void 0:null===(t=r[e])||void 0===t?void 0:t.production;if(a)return a;let s=Z[e]||null,l=U[e]||null,i=L[e]||null,n={};return n.Electricity=.5,i&&i.forEach(e=>{n[e]=.5}),{inputs:{resources:s?{[s]:.5}:{},products:n},outputs:{resources:{},products:l?{[l]:1}:{}}}},ec=e=>{let t=U[e],r=eo(e),a=_.production.baseRevenue,s=_.production.baseCost;if(t){var l,i,n,o,c;let e=null!==(n=null==r?void 0:null===(l=r.outputs.products)||void 0===l?void 0:l[t])&&void 0!==n?n:1;a=(null!==(c=null!==(o=null===(i=ea[t])||void 0===i?void 0:i.currentPrice)&&void 0!==o?o:A[t])&&void 0!==c?c:_.production.baseRevenue)*e,s=400,Object.entries((null==r?void 0:r.inputs.resources)||{}).forEach(e=>{var t,r;let[a,l]=e,i=null!==(r=null===(t=et[a])||void 0===t?void 0:t.currentPrice)&&void 0!==r?r:0;s+=l*i}),Object.entries((null==r?void 0:r.inputs.products)||{Electricity:.5}).forEach(e=>{var r,a,l;let[i,n]=e,o=null!==(l=null!==(a=null===(r=ea[i])||void 0===r?void 0:r.currentPrice)&&void 0!==a?a:A[i])&&void 0!==l?l:0;s+=n*o*("Electricity"===t&&"Electricity"===i?.1:1)})}return{unitRevenuePerHour:a,unitCostPerHour:s}},ed=(e,t)=>{let r=I[t],a=L[e]||[],s=0,l=0;for(let r of a){var i,n,o;let a=null!==(o=null!==(n=null===(i=ea[r])||void 0===i?void 0:i.currentPrice)&&void 0!==n?n:A[r])&&void 0!==o?o:0,c="retail"===t?2:"Electricity"===r?.5:1.5;"Defense"===e?("retail"===t||"Electricity"!==r)&&(c=1):"Light Industry"===e&&"service"===t&&"Electricity"!==r&&(c=.5);let d="retail"===t?.995:"Electricity"===r?1:.995;"Defense"===e&&("retail"===t||"Electricity"!==r)?d=.8:"Light Industry"===e&&"service"===t&&(d=.995);let x=a*c*d;s+=x,"Defense"===e&&("retail"===t||"Electricity"!==r)?l+=1*x:l+=a*c}return{unitRevenuePerHour:Math.max(l,1.1*s),unitCostPerHour:r+s}};(0,s.useEffect)(()=>{(async()=>{if(!g){B("Invalid state code"),V(!1);return}try{let[e,t,r,a]=await Promise.all([o.QT.getState(g),o.kv.getMe().catch(()=>null),o.QT.getCommodities().catch(()=>null),o.QT.getMarketMetadata().catch(()=>null)]);if(y(e),t&&K(t.actions||0),r){let e={};r.commodities.forEach(t=>{e[t.resource]={currentPrice:t.currentPrice,basePrice:t.basePrice}}),er(e);let t={};r.products.forEach(e=>{t[e.product]={currentPrice:e.currentPrice,referenceValue:e.referenceValue}}),es(t)}a&&ei(a)}catch(r){var e,t;console.error("Failed to fetch state:",r),B((null===(t=r.response)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.error)||"Failed to load state")}finally{V(!1)}})()},[g]);let ex=async()=>{if((null==b?void 0:b.user_corporation)&&z){q(!0);try{await o.QT.enterMarket(g,z,b.user_corporation.id);let e=await o.QT.getState(g);y(e),G("");let t=await o.kv.getMe().catch(()=>null);t&&K(t.actions||0),alert("Successfully entered ".concat(b.state.name," ").concat(z," market!"))}catch(r){var e,t;alert((null===(t=r.response)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.error)||"Failed to enter market")}finally{q(!1)}}},eu=async(e,t)=>{if(null==b?void 0:b.user_corporation){X("".concat(e,"-").concat(t));try{await o.QT.buildUnit(e,t);let r=await o.QT.getState(g);y(r);let a=await o.kv.getMe().catch(()=>null);a&&K(a.actions||0)}catch(e){var r,a;alert((null===(a=e.response)||void 0===a?void 0:null===(r=a.data)||void 0===r?void 0:r.error)||"Failed to build unit")}finally{X(null)}}},em=async(e,t,r)=>{if((null==b?void 0:b.user_corporation)&&confirm("Are you sure you want to abandon 1 ".concat(t," unit in ").concat(r,"? This action cannot be undone."))){ee("".concat(e,"-").concat(t));try{await o.QT.abandonUnit(e,t);let r=await o.QT.getState(g);y(r)}catch(e){var a,s;alert((null===(s=e.response)||void 0===s?void 0:null===(a=s.data)||void 0===a?void 0:a.error)||"Failed to abandon unit")}finally{ee(null)}}},eh=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(e),eg=e=>Math.floor(15*e),ep=(e,t)=>{if("production"===t){let{unitRevenuePerHour:t,unitCostPerHour:r}=ec(e);return(t-r)*96}if("retail"===t||"service"===t){let{unitRevenuePerHour:r,unitCostPerHour:a}=ed(e,t);return(r-a)*96}if("extraction"===t){let t=O[e],r=0;if(t&&t.length>0){let e=t[0];et[e]&&(r=2*et[e].currentPrice)}return 0===r&&(r=_.extraction.baseRevenue),(r-_.extraction.baseCost)*96}return 0},eb=e=>e.retail+e.production+e.service+e.extraction,ey=(null==b?void 0:null===(t=b.user_market_entries)||void 0===t?void 0:t.map(e=>e.sector_type))||[],ev=(null==b?void 0:null===(r=b.sectors)||void 0===r?void 0:r.filter(e=>!ey.includes(e)))||[],ej=e=>{if(!z)return{unitRevenue:0,unitCost:0};let{unitRevenuePerHour:t,unitCostPerHour:r}=ed(z,e);return{unitRevenue:96*t,unitCost:96*r}},ef=()=>{if(!z)return{unitRevenue:0,unitCost:0};let{unitRevenuePerHour:e,unitCostPerHour:t}=ec(z);return{unitRevenue:96*e,unitCost:96*t}},eN=()=>{if(!z)return{unitRevenue:0,unitCost:0};let e=O[z],t=0;if(e&&e.length>0){let r=e[0];et[r]&&(t=2*et[r].currentPrice)}return 0===t&&(t=_.extraction.baseRevenue),{unitRevenue:96*t,unitCost:96*_.extraction.baseCost}};if(F)return(0,a.jsx)(n.Z,{children:(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)("div",{className:"text-lg text-gray-600 dark:text-gray-200",children:"Loading state..."})})});if(Q||!b)return(0,a.jsx)(n.Z,{children:(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-xl text-red-600 dark:text-red-400 mb-4",children:Q||"State not found"}),(0,a.jsx)(i.default,{href:"/states",className:"text-corporate-blue hover:underline",children:"Return to States"})]})})});let{state:ek,markets:ew,user_corporation:eC,user_market_entries:eR}=b;return(0,a.jsx)(n.Z,{children:(0,a.jsxs)("div",{className:"relative mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-10 space-y-6",children:[(0,a.jsxs)(i.default,{href:"/states",className:"inline-flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400 hover:text-corporate-blue dark:hover:text-corporate-blue-light transition-colors",children:[(0,a.jsx)(v.Z,{className:"h-4 w-4"}),"Back to States"]}),(0,a.jsxs)("div",{className:"relative rounded-2xl border border-gray-200/50 dark:border-gray-700/50 bg-gradient-to-br from-white via-white to-gray-50/50 dark:from-gray-900 dark:via-gray-900 dark:to-gray-800/50 shadow-2xl overflow-hidden backdrop-blur-sm",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-corporate-blue/5 via-transparent to-corporate-blue-light/5 dark:from-corporate-blue/10 dark:via-transparent dark:to-corporate-blue-dark/10 pointer-events-none"}),(0,a.jsx)("div",{className:"relative p-6",children:(0,a.jsx)("div",{className:"flex items-start justify-between",children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"flex h-16 w-16 items-center justify-center rounded-xl bg-corporate-blue/10 dark:bg-corporate-blue/20",children:(0,a.jsx)(j.Z,{className:"h-8 w-8 text-corporate-blue dark:text-corporate-blue-light"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:ek.name}),(0,a.jsxs)("div",{className:"flex items-center gap-3 mt-1",children:[(0,a.jsx)("span",{className:"px-2 py-0.5 text-xs font-medium bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400 rounded-full",children:ek.region}),(0,a.jsxs)("span",{className:"text-lg font-bold ".concat((x=ek.multiplier)>=4?"text-emerald-600 dark:text-emerald-400":x>=3?"text-blue-600 dark:text-blue-400":x>=2?"text-amber-600 dark:text-amber-400":"text-gray-600 dark:text-gray-400"," group relative cursor-help"),children:[eg(ek.multiplier)," unit capacity",(0,a.jsx)("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 hidden group-hover:block z-10 pointer-events-none",children:(0,a.jsxs)("div",{className:"bg-gray-900 text-white text-xs rounded-lg px-3 py-2 whitespace-nowrap shadow-lg",children:[(0,a.jsx)("p",{className:"font-medium",children:"State Unit Capacity"}),(0,a.jsxs)("p",{children:[15," base \xd7 ",ek.multiplier.toFixed(1),"x = ",eg(ek.multiplier)," units/sector"]}),(0,a.jsx)("p",{className:"text-gray-400 mt-1",children:"Higher = larger market with more room for units"})]})})]}),"number"==typeof ek.growth_factor&&(0,a.jsxs)("span",{className:"px-2 py-0.5 text-xs font-medium bg-emerald-100 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-300 rounded-full group relative cursor-help",children:["Growth ",ek.growth_factor.toFixed(2),"x",(0,a.jsx)("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 hidden group-hover:block z-10 pointer-events-none",children:(0,a.jsxs)("div",{className:"bg-gray-900 text-white text-xs rounded-lg px-3 py-2 whitespace-nowrap shadow-lg",children:[(0,a.jsx)("p",{className:"font-medium",children:"State Growth Factor"}),(0,a.jsx)("p",{children:"1 + 25% \xd7 sector growth average (24h builds / current units)"})]})})]})]})]})]})})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[eC&&ev.length>0&&(0,a.jsxs)("div",{className:"relative rounded-2xl border border-gray-200/50 dark:border-gray-700/50 bg-gradient-to-br from-white via-white to-gray-50/50 dark:from-gray-900 dark:via-gray-900 dark:to-gray-800/50 shadow-xl overflow-hidden backdrop-blur-sm",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-emerald-500/5 via-transparent to-emerald-500/5 dark:from-emerald-500/10 dark:via-transparent dark:to-emerald-500/10 pointer-events-none"}),(0,a.jsxs)("div",{className:"relative p-6",children:[(0,a.jsxs)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[(0,a.jsx)(f.Z,{className:"h-5 w-5 text-emerald-600 dark:text-emerald-400"}),"Enter New Market"]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Select Sector"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("select",{value:z,onChange:e=>G(e.target.value),className:"w-full appearance-none px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-corporate-blue focus:border-transparent pr-10",children:[(0,a.jsx)("option",{value:"",children:"Choose a sector..."}),ev.map(e=>(0,a.jsx)("option",{value:e,children:e},e))]}),(0,a.jsx)(N.Z,{className:"absolute right-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400 pointer-events-none"})]})]}),z&&(0,a.jsxs)("div",{className:"rounded-xl border border-emerald-200 dark:border-emerald-800 bg-emerald-50 dark:bg-emerald-900/20 p-4",children:[(0,a.jsxs)("p",{className:"text-sm text-emerald-800 dark:text-emerald-200 font-medium mb-2",children:["Enter ",ek.name," ",z," Market"]}),(0,a.jsxs)("div",{className:"text-xs text-emerald-700 dark:text-emerald-300 space-y-2",children:[(0,a.jsxs)("p",{children:["Cost: ",eh(5e4)," capital + 1 action"]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 pt-2 border-t border-emerald-200/50 dark:border-emerald-800/50",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-semibold text-emerald-900 dark:text-emerald-100 mb-1",children:"Retail Unit"}),(()=>{let{unitRevenue:e,unitCost:t}=ej("retail");return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("p",{children:["Revenue: ",eh(e)]}),(0,a.jsxs)("p",{children:["Cost: ",eh(t)]}),(0,a.jsxs)("p",{className:"font-medium",children:["Profit: ",eh(e-t)]})]})})()]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-semibold text-emerald-900 dark:text-emerald-100 mb-1",children:"Production Unit"}),(()=>{let{unitRevenue:e,unitCost:t}=ef();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("p",{children:["Revenue: ",eh(e)]}),(0,a.jsxs)("p",{children:["Cost: ",eh(t)]}),(0,a.jsxs)("p",{className:"font-medium",children:["Profit: ",eh(e-t)]})]})})()]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-semibold text-emerald-900 dark:text-emerald-100 mb-1",children:"Service Unit"}),(()=>{let{unitRevenue:e,unitCost:t}=ej("service");return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("p",{children:["Revenue: ",eh(e)]}),(0,a.jsxs)("p",{children:["Cost: ",eh(t)]}),(0,a.jsxs)("p",{className:"font-medium",children:["Profit: ",eh(e-t)]})]})})()]}),D(z)&&(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-semibold text-emerald-900 dark:text-emerald-100 mb-1",children:"Extraction Unit"}),(()=>{let{unitRevenue:e,unitCost:t}=eN();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("p",{children:["Revenue: ",eh(e)]}),(0,a.jsxs)("p",{children:["Cost: ",eh(t)]}),(0,a.jsxs)("p",{className:"font-medium",children:["Profit: ",eh(e-t)]})]})})()]})]}),(0,a.jsxs)("div",{className:"pt-2 border-t border-emerald-200/50 dark:border-emerald-800/50",children:[(0,a.jsxs)("p",{children:["Your capital: ",eh(eC.capital)]}),(0,a.jsxs)("p",{children:["Your actions: ",J]})]})]})]}),(0,a.jsx)("button",{onClick:ex,disabled:!z||Y||eC.capital<5e4||J<1,className:"w-full px-6 py-3 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-semibold flex items-center justify-center gap-2",children:Y?"Entering Market...":(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(k.Z,{className:"h-5 w-5"}),"Enter ",ek.name," ",z||"[Select Sector]"," Market"]})})]})]})]}),eC&&eR&&eR.length>0&&(0,a.jsxs)("div",{className:"relative rounded-2xl border border-gray-200/50 dark:border-gray-700/50 bg-gradient-to-br from-white via-white to-gray-50/50 dark:from-gray-900 dark:via-gray-900 dark:to-gray-800/50 shadow-xl overflow-hidden backdrop-blur-sm",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-corporate-blue/5 via-transparent to-corporate-blue-light/5 dark:from-corporate-blue/10 dark:via-transparent dark:to-corporate-blue-dark/10 pointer-events-none"}),(0,a.jsxs)("div",{className:"relative p-6",children:[(0,a.jsxs)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[(0,a.jsx)(w.Z,{className:"h-5 w-5 text-corporate-blue"}),"Your Markets in ",ek.name]}),(0,a.jsx)("div",{className:"space-y-4",children:eR.map(e=>{var t;return(0,a.jsx)(c.Z,{sectorType:e.sector_type,stateCode:ek.code,stateName:ek.name,stateMultiplier:ek.multiplier,stateGrowthFactor:ek.growth_factor||1,enteredDate:e.created_at,units:e.units,corporation:null,canExtract:D(e.sector_type),extractableResources:O[e.sector_type],requiredResource:Z[e.sector_type]||null,producedProduct:U[e.sector_type]||null,productDemands:L[e.sector_type]||null,showActions:!0,onAbandonUnit:t=>em(e.id,t,e.sector_type),onBuildUnit:t=>eu(e.id,t),abandoningUnit:(null==$?void 0:$.startsWith("".concat(e.id,"-")))?$.split("-")[1]:null,building:(null==W?void 0:W.startsWith("".concat(e.id,"-")))?W.split("-")[1]:null,canBuild:eC.capital>=1e4&&J>=1&&eb(e.units)<eg(ek.multiplier),buildCost:1e4,formatCurrency:eh,calculateUnitProfit:t=>ep(e.sector_type,t),UNIT_ECONOMICS:_,SECTORS_CAN_EXTRACT:O,commodityPrices:et,productPrices:ea,EXTRACTION_OUTPUT_RATE:2,unitFlows:null==el?void 0:null===(t=el.sector_unit_flows)||void 0===t?void 0:t[e.sector_type],productReferenceValues:en},e.id)})})]})]}),(0,a.jsxs)("div",{className:"relative rounded-2xl border border-gray-200/50 dark:border-gray-700/50 bg-gradient-to-br from-white via-white to-gray-50/50 dark:from-gray-900 dark:via-gray-900 dark:to-gray-800/50 shadow-xl overflow-hidden backdrop-blur-sm",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-corporate-blue/5 via-transparent to-corporate-blue-light/5 dark:from-corporate-blue/10 dark:via-transparent dark:to-corporate-blue-dark/10 pointer-events-none"}),(0,a.jsxs)("div",{className:"relative p-6",children:[(0,a.jsxs)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:["All Corporations in ",ek.name]}),0===ew.length?(0,a.jsx)("p",{className:"text-gray-500 dark:text-gray-400 text-center py-8",children:"No corporations have entered this market yet. Be the first!"}):(0,a.jsx)("div",{className:"space-y-3",children:ew.map(e=>{var t,r,s;let l=e.units.retail+e.units.production+e.units.service+(e.units.extraction||0),n=D(e.sector_type);return(0,a.jsxs)("div",{className:"flex items-center justify-between rounded-xl border border-white/60 bg-white/70 dark:border-gray-800/70 dark:bg-gray-800/60 p-4 shadow-sm",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(null===(t=e.corporation)||void 0===t?void 0:t.logo)?(0,a.jsx)("img",{src:e.corporation.logo,alt:e.corporation.name||"Corp",className:"w-10 h-10 rounded-lg object-cover",onError:e=>{e.currentTarget.src="/defaultpfp.jpg"}}):(0,a.jsx)("div",{className:"w-10 h-10 rounded-lg bg-gray-200 dark:bg-gray-700 flex items-center justify-center",children:(0,a.jsx)(f.Z,{className:"h-5 w-5 text-gray-400"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)(i.default,{href:"/corporation/".concat(null===(r=e.corporation)||void 0===r?void 0:r.id),className:"font-semibold text-gray-900 dark:text-white hover:text-corporate-blue dark:hover:text-corporate-blue-light transition-colors",children:(null===(s=e.corporation)||void 0===s?void 0:s.name)||"Unknown Corporation"}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400 flex items-center gap-1",children:[e.sector_type,n&&(0,a.jsx)("span",{className:"text-amber-500",children:(0,a.jsx)(u.Z,{className:"w-3 h-3 inline"})})]})]})]}),(0,a.jsxs)("div",{className:"text-right group relative",children:[(0,a.jsxs)("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:[l," unit",1!==l?"s":""]}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400 flex items-center gap-1 justify-end",children:[(0,a.jsxs)("span",{className:"text-pink-500",children:[e.units.retail,"R"]}),(0,a.jsx)("span",{className:"text-gray-300 dark:text-gray-600",children:"/"}),(0,a.jsxs)("span",{className:"text-orange-500",children:[e.units.production,"P"]}),(0,a.jsx)("span",{className:"text-gray-300 dark:text-gray-600",children:"/"}),(0,a.jsxs)("span",{className:"text-blue-500",children:[e.units.service,"S"]}),(0,a.jsx)("span",{className:"text-gray-300 dark:text-gray-600",children:"/"}),(0,a.jsxs)("span",{className:n?"text-amber-500":"text-gray-300 dark:text-gray-600",children:[n?e.units.extraction||0:"—","E"]})]}),(0,a.jsx)("div",{className:"absolute bottom-full right-0 mb-2 hidden group-hover:block z-10 pointer-events-none",children:(0,a.jsxs)("div",{className:"bg-gray-900 text-white text-xs rounded-lg px-3 py-2 whitespace-nowrap shadow-lg text-left",children:[(0,a.jsxs)("p",{className:"font-medium mb-1",children:[e.sector_type," Units"]}),(0,a.jsxs)("p",{className:"text-pink-400",children:["Retail: ",e.units.retail]}),(0,a.jsxs)("p",{className:"text-orange-400",children:["Production: ",e.units.production]}),(0,a.jsxs)("p",{className:"text-blue-400",children:["Service: ",e.units.service]}),(0,a.jsxs)("p",{className:n?"text-amber-400":"text-gray-500",children:["Extraction: ",n?e.units.extraction||0:"N/A"]})]})})]})]},e.id)})})]})]})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[b.resources&&b.resources.resources.length>0&&(0,a.jsxs)("div",{className:"relative rounded-2xl border border-gray-200/50 dark:border-gray-700/50 bg-gradient-to-br from-white via-white to-gray-50/50 dark:from-gray-900 dark:via-gray-900 dark:to-gray-800/50 shadow-xl overflow-hidden backdrop-blur-sm",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-amber-500/5 via-transparent to-amber-500/5 dark:from-amber-500/10 dark:via-transparent dark:to-amber-500/10 pointer-events-none"}),(0,a.jsxs)("div",{className:"relative p-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[(0,a.jsx)(C.Z,{className:"h-5 w-5 text-amber-600 dark:text-amber-400"}),"Natural Resources"]}),(0,a.jsx)("div",{className:"flex justify-center mb-4",children:(0,a.jsx)(H,{resources:b.resources.resources.map(e=>({resource:e.resource,percentage:e.percentage}))})}),(0,a.jsxs)("div",{className:"text-center mb-4 pb-4 border-b border-gray-200 dark:border-gray-700 group relative",children:[(0,a.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Total Resource Value"}),(0,a.jsx)("p",{className:"text-xl font-bold text-amber-600 dark:text-amber-400 cursor-help",children:eh(b.resources.totalResourceValue)}),(0,a.jsx)("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 hidden group-hover:block z-10 pointer-events-none",children:(0,a.jsxs)("div",{className:"bg-gray-900 text-white text-xs rounded-lg px-3 py-2 whitespace-nowrap shadow-lg",children:[(0,a.jsx)("p",{className:"font-medium",children:"Total Resource Value"}),(0,a.jsx)("p",{className:"text-gray-300",children:"Sum of all resources \xd7 current commodity prices"}),(0,a.jsx)("p",{className:"text-gray-400 mt-1",children:"Prices fluctuate based on supply/demand"})]})})]}),(0,a.jsx)("div",{className:"space-y-3",children:b.resources.resources.map(e=>(0,a.jsxs)("div",{className:"flex items-center gap-3 p-2 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors group relative",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full flex-shrink-0 ".concat(M[e.resource]||"bg-gray-500")}),(0,a.jsx)("div",{className:"text-gray-500 dark:text-gray-400 flex-shrink-0",children:T[e.resource]||(0,a.jsx)(m.Z,{className:"w-4 h-4"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:e.resource}),(0,a.jsxs)("span",{className:"text-sm font-mono text-gray-600 dark:text-gray-400 cursor-help",children:[e.percentage.toFixed(1),"%"]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500 dark:text-gray-400",children:[(0,a.jsxs)("span",{className:"cursor-help",children:[e.amount.toLocaleString()," units"]}),(0,a.jsxs)("span",{className:"text-amber-600 dark:text-amber-400 cursor-help",children:[eh(e.currentPrice),"/unit"]})]}),(0,a.jsxs)("div",{className:"text-xs text-gray-400 dark:text-gray-500 cursor-help",children:[e.stateShareOfUS.toFixed(1),"% of US supply"]})]}),(0,a.jsx)("div",{className:"absolute left-0 right-0 bottom-full mb-2 hidden group-hover:block z-10 pointer-events-none",children:(0,a.jsxs)("div",{className:"bg-gray-900 text-white text-xs rounded-lg px-3 py-2 shadow-lg mx-2",children:[(0,a.jsx)("p",{className:"font-medium text-amber-400",children:e.resource}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1 mt-1",children:[(0,a.jsx)("p",{className:"text-gray-300",children:"Units:"}),(0,a.jsx)("p",{className:"text-white",children:e.amount.toLocaleString()}),(0,a.jsx)("p",{className:"text-gray-300",children:"State share:"}),(0,a.jsxs)("p",{className:"text-white",children:[e.percentage.toFixed(1),"% of state"]}),(0,a.jsx)("p",{className:"text-gray-300",children:"US share:"}),(0,a.jsxs)("p",{className:"text-white",children:[e.stateShareOfUS.toFixed(1),"% of nation"]}),(0,a.jsx)("p",{className:"text-gray-300",children:"Price/unit:"}),(0,a.jsx)("p",{className:"text-amber-400",children:eh(e.currentPrice)}),(0,a.jsx)("p",{className:"text-gray-300",children:"Total value:"}),(0,a.jsx)("p",{className:"text-emerald-400",children:eh(e.totalValue)})]})]})})]},e.resource))}),(0,a.jsx)(i.default,{href:"/stock-market",className:"mt-4 block text-center text-sm text-corporate-blue hover:text-corporate-blue-dark dark:text-corporate-blue-light dark:hover:text-corporate-blue transition-colors",children:"View All Commodities →"})]})]}),(!b.resources||0===b.resources.resources.length)&&(0,a.jsx)("div",{className:"relative rounded-2xl border border-gray-200/50 dark:border-gray-700/50 bg-gradient-to-br from-white via-white to-gray-50/50 dark:from-gray-900 dark:via-gray-900 dark:to-gray-800/50 shadow-xl overflow-hidden backdrop-blur-sm",children:(0,a.jsxs)("div",{className:"relative p-6 text-center",children:[(0,a.jsx)(C.Z,{className:"h-10 w-10 text-gray-300 dark:text-gray-600 mx-auto mb-3"}),(0,a.jsx)("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2",children:"No Natural Resources"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"This state has limited natural resource production. Focus on service and retail sectors."})]})}),(0,a.jsxs)("div",{className:"relative rounded-2xl border border-gray-200/50 dark:border-gray-700/50 bg-gradient-to-br from-white via-white to-gray-50/50 dark:from-gray-900 dark:via-gray-900 dark:to-gray-800/50 shadow-xl overflow-hidden backdrop-blur-sm",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-corporate-blue/5 via-transparent to-corporate-blue-light/5 dark:from-corporate-blue/10 dark:via-transparent dark:to-corporate-blue-dark/10 pointer-events-none"}),(0,a.jsxs)("div",{className:"relative p-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[(0,a.jsx)(R.Z,{className:"h-5 w-5 text-corporate-blue"}),"Unit Economics"]}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-4",children:["Revenue/profit per unit (96-hour period) in ",ek.name]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"rounded-lg border border-gray-200 dark:border-gray-700 p-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(P.Z,{className:"h-4 w-4 text-pink-500"}),(0,a.jsx)("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Retail"})]}),(0,a.jsxs)("div",{className:"text-sm space-y-1",children:[(0,a.jsxs)("p",{className:"text-gray-600 dark:text-gray-400",children:["Revenue: ",(0,a.jsx)("span",{className:"text-emerald-600 dark:text-emerald-400",children:eh(96*_.retail.baseRevenue)})]}),(0,a.jsxs)("p",{className:"text-gray-600 dark:text-gray-400",children:["Cost: ",(0,a.jsx)("span",{className:"text-red-600 dark:text-red-400",children:eh(96*_.retail.baseCost)})]}),(0,a.jsxs)("p",{className:"font-semibold text-gray-900 dark:text-white",children:["Profit: ",(0,a.jsx)("span",{className:"text-emerald-600 dark:text-emerald-400",children:eh(96*_.retail.baseRevenue-96*_.retail.baseCost)})]})]})]}),(0,a.jsxs)("div",{className:"rounded-lg border border-gray-200 dark:border-gray-700 p-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(E.Z,{className:"h-4 w-4 text-orange-500"}),(0,a.jsx)("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Production"})]}),(0,a.jsxs)("div",{className:"text-sm space-y-1",children:[(0,a.jsxs)("p",{className:"text-gray-600 dark:text-gray-400",children:["Revenue: ",(0,a.jsx)("span",{className:"text-amber-600 dark:text-amber-400",children:"Dynamic"})]}),(0,a.jsxs)("p",{className:"text-gray-600 dark:text-gray-400",children:["Cost: ",(0,a.jsx)("span",{className:"text-amber-600 dark:text-amber-400",children:"Dynamic"})]}),(0,a.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Based on commodity inputs & product outputs"})]})]}),(0,a.jsxs)("div",{className:"rounded-lg border border-gray-200 dark:border-gray-700 p-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(S.Z,{className:"h-4 w-4 text-blue-500"}),(0,a.jsx)("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Service"})]}),(0,a.jsxs)("div",{className:"text-sm space-y-1",children:[(0,a.jsxs)("p",{className:"text-gray-600 dark:text-gray-400",children:["Revenue: ",(0,a.jsx)("span",{className:"text-emerald-600 dark:text-emerald-400",children:eh(96*_.service.baseRevenue)})]}),(0,a.jsxs)("p",{className:"text-gray-600 dark:text-gray-400",children:["Cost: ",(0,a.jsx)("span",{className:"text-red-600 dark:text-red-400",children:eh(96*_.service.baseCost)})]}),(0,a.jsxs)("p",{className:"font-semibold text-gray-900 dark:text-white",children:["Profit: ",(0,a.jsx)("span",{className:"text-emerald-600 dark:text-emerald-400",children:eh(96*_.service.baseRevenue-96*_.service.baseCost)})]})]})]}),(0,a.jsxs)("div",{className:"rounded-lg border border-gray-200 dark:border-gray-700 p-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(u.Z,{className:"h-4 w-4 text-amber-500"}),(0,a.jsx)("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Extraction"})]}),(0,a.jsxs)("div",{className:"text-sm space-y-1",children:[(0,a.jsxs)("p",{className:"text-gray-600 dark:text-gray-400",children:["Revenue: ",(0,a.jsx)("span",{className:"text-amber-600 dark:text-amber-400",children:"Dynamic"})]}),(0,a.jsxs)("p",{className:"text-gray-600 dark:text-gray-400",children:["Cost: ",(0,a.jsx)("span",{className:"text-red-600 dark:text-red-400",children:eh(96*_.extraction.baseCost)})]}),(0,a.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Revenue based on commodity prices"})]}),(0,a.jsx)("p",{className:"text-xs text-amber-600 dark:text-amber-400 mt-2",children:"Available in: Mining, Energy, Agriculture, Pharmaceuticals, Forestry"})]})]})]})]}),(0,a.jsxs)("div",{className:"relative rounded-2xl border border-gray-200/50 dark:border-gray-700/50 bg-gradient-to-br from-white via-white to-gray-50/50 dark:from-gray-900 dark:via-gray-900 dark:to-gray-800/50 shadow-xl overflow-hidden backdrop-blur-sm p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4",children:"Action Costs"}),(0,a.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Enter Market"}),(0,a.jsxs)("span",{className:"font-medium text-gray-900 dark:text-white",children:[eh(5e4)," + 1 action"]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Build Unit"}),(0,a.jsxs)("span",{className:"font-medium text-gray-900 dark:text-white",children:[eh(1e4)," + 1 action"]})]})]})]}),eC&&(0,a.jsxs)("div",{className:"relative rounded-2xl border border-gray-200/50 dark:border-gray-700/50 bg-gradient-to-br from-white via-white to-gray-50/50 dark:from-gray-900 dark:via-gray-900 dark:to-gray-800/50 shadow-xl overflow-hidden backdrop-blur-sm p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4",children:"Your Corporation"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("p",{className:"font-medium text-gray-900 dark:text-white",children:eC.name}),(0,a.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Capital: ",(0,a.jsx)("span",{className:"font-semibold text-emerald-600 dark:text-emerald-400",children:eh(eC.capital)})]}),(0,a.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Actions: ",(0,a.jsx)("span",{className:"font-semibold text-amber-600 dark:text-amber-400",children:J})]})]})]})]})]})]})})}}},function(e){e.O(0,[4568,4542,2728,4790,9447,988,7115,2364,1744],function(){return e(e.s=29305)}),_N_E=e.O()}]);