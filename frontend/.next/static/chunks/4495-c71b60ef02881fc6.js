"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4495],{2866:function(e,t,r){r.d(t,{Z:function(){return p}});var a=r(37821),s=r(58078),n=r(74542),i=r(91045),o=r(63424),l=r(27826),d=r(84627),c=r(8635),x=r(35619),m=r(80961),u=r(16922);let g=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#ec4899","#06b6d4","#84cc16","#f97316","#14b8a6"],h=e=>new Intl.NumberFormat("en-US",{maximumFractionDigits:1}).format(e);function p(e){let{title:t,data:r,others:p,total:f,type:b,valueLabel:y="units"}=e,[v,j]=(0,s.useState)(null),N=(0,s.useMemo)(()=>{let e=r.map((e,t)=>({name:e.corporation_name,value:e.value,corporation_id:e.corporation_id,corporation_logo:e.corporation_logo,color:g[t%g.length]}));return p>0&&e.push({name:"Others",value:p,color:"#6b7280"}),e},[r,p]),k="producers"===b?x.Z:m.Z,w="producers"===b?"text-corporate-blue":"text-orange-600";return 0===r.length&&0===p?(0,a.jsx)("div",{className:"relative rounded-2xl border border-gray-200/50 dark:border-gray-700/50 bg-gradient-to-br from-white via-white to-gray-50/50 dark:from-gray-900 dark:via-gray-900 dark:to-gray-800/50 shadow-xl overflow-hidden backdrop-blur-sm",children:(0,a.jsxs)("div",{className:"relative p-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,a.jsx)(k,{className:"w-5 h-5 ".concat(w)}),(0,a.jsx)("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:t})]}),(0,a.jsx)("div",{className:"flex items-center justify-center h-48",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(k,{className:"w-12 h-12 text-gray-300 dark:text-gray-600 mx-auto mb-2"}),(0,a.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["No ","producers"===b?"producers":"demanders"," yet"]})]})})]})}):(0,a.jsx)("div",{className:"relative rounded-2xl border border-gray-200/50 dark:border-gray-700/50 bg-gradient-to-br from-white via-white to-gray-50/50 dark:from-gray-900 dark:via-gray-900 dark:to-gray-800/50 shadow-xl overflow-hidden backdrop-blur-sm",children:(0,a.jsxs)("div",{className:"relative p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(k,{className:"w-5 h-5 ".concat(w)}),(0,a.jsx)("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:t})]}),(0,a.jsxs)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Total: ",(0,a.jsx)("span",{className:"font-mono font-semibold text-gray-900 dark:text-white",children:h(f)})]})]}),(0,a.jsx)("div",{className:"h-64",children:(0,a.jsx)(i.h,{width:"100%",height:"100%",children:(0,a.jsxs)(o.u,{children:[(0,a.jsx)(l.by,{data:N,cx:"50%",cy:"50%",labelLine:!1,label:e=>{let{cx:t,cy:r,midAngle:s,innerRadius:n,outerRadius:i,percent:o,index:l}=e;if(o<.05)return null;let d=Math.PI/180,c=n+(i-n)*.5;return(0,a.jsx)("text",{x:t+c*Math.cos(-s*d),y:r+c*Math.sin(-s*d),fill:"white",textAnchor:"middle",dominantBaseline:"central",className:"text-xs font-semibold",style:{textShadow:"0 1px 2px rgba(0,0,0,0.5)"},children:"".concat((100*o).toFixed(0),"%")})},outerRadius:90,innerRadius:40,paddingAngle:2,dataKey:"value",onMouseEnter:(e,t)=>j(t),onMouseLeave:()=>j(null),animationBegin:0,animationDuration:800,children:N.map((e,t)=>(0,a.jsx)(d.b,{fill:e.color,stroke:v===t?"#fff":"transparent",strokeWidth:v===t?3:0,style:{filter:v===t?"brightness(1.1)":"none",cursor:e.corporation_id?"pointer":"default",transition:"all 0.2s ease"}},"cell-".concat(t)))}),(0,a.jsx)(c.u,{content:(0,a.jsx)(e=>{let{active:t,payload:r}=e;if(t&&r&&r.length){let e=r[0].payload,t=f>0?(e.value/f*100).toFixed(1):"0.0";return(0,a.jsxs)("div",{className:"rounded-lg px-4 py-3 text-xs shadow-2xl border border-gray-700 bg-gray-900 text-white",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:e.color}}),(0,a.jsx)("span",{className:"font-semibold",children:e.name})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("div",{className:"flex justify-between gap-4",children:[(0,a.jsxs)("span",{className:"text-gray-400",children:[y,":"]}),(0,a.jsx)("span",{className:"font-mono font-semibold",children:h(e.value)})]}),(0,a.jsxs)("div",{className:"flex justify-between gap-4",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Share:"}),(0,a.jsxs)("span",{className:"font-mono font-semibold",children:[t,"%"]})]})]})]})}return null},{})})]})})}),(0,a.jsx)("div",{className:"mt-4 space-y-2 max-h-40 overflow-y-auto",children:N.map((e,t)=>{let r=f>0?(e.value/f*100).toFixed(1):"0.0";return(0,a.jsxs)("div",{className:"flex items-center justify-between p-2 rounded-lg transition-colors ".concat(v===t?"bg-gray-100 dark:bg-gray-800":""),onMouseEnter:()=>j(t),onMouseLeave:()=>j(null),children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 min-w-0",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:e.color}}),e.corporation_id?(0,a.jsxs)(n.default,{href:"/corporation/".concat(e.corporation_id),className:"flex items-center gap-2 min-w-0 hover:text-corporate-blue dark:hover:text-corporate-blue-light transition-colors",children:[e.corporation_logo?(0,a.jsx)("img",{src:e.corporation_logo,alt:e.name,className:"w-5 h-5 rounded object-cover flex-shrink-0",onError:e=>{e.currentTarget.src="/defaultpfp.jpg"}}):(0,a.jsx)("div",{className:"w-5 h-5 rounded bg-gray-200 dark:bg-gray-700 flex items-center justify-center flex-shrink-0",children:(0,a.jsx)(u.Z,{className:"w-3 h-3 text-gray-400"})}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:e.name})]}):(0,a.jsx)("span",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 truncate",children:e.name})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3 flex-shrink-0",children:[(0,a.jsx)("span",{className:"text-sm font-mono text-gray-600 dark:text-gray-400",children:h(e.value)}),(0,a.jsxs)("span",{className:"text-xs font-semibold text-gray-500 dark:text-gray-500 w-12 text-right",children:[r,"%"]})]})]},t)})})]})})}},3114:function(e,t,r){r.d(t,{Z:function(){return v}});var a=r(37821),s=r(58078),n=r(91045),i=r(34999),o=r(92113),l=r(39478),d=r(26025),c=r(8635),x=r(88840),m=r(77271),u=r(12758),g=r(33338),h=r(26200),p=r(21996);let f=[{label:"24H",value:"24h",hours:24},{label:"48H",value:"48h",hours:48},{label:"4D",value:"96h",hours:96},{label:"7D",value:"7d",hours:168},{label:"30D",value:"30d",hours:720}],b=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(e),y=e=>"".concat(e>=0?"+":"").concat(e.toFixed(2),"%");function v(e){let{currentPrice:t,fetchHistory:r,title:v="Price History",priceLabel:j="Price"}=e,[N,k]=(0,s.useState)("96h"),[w,S]=(0,s.useState)(!0),[P,D]=(0,s.useState)(null),[F,M]=(0,s.useState)([]),C=f.find(e=>e.value===N);(0,s.useEffect)(()=>{(async()=>{S(!0),D(null);try{let e=await r(C.hours,1e3);M(e)}catch(e){console.error("Failed to fetch price history:",e),D("Failed to load price history")}finally{S(!1)}})()},[C.hours,r]);let L=(0,s.useMemo)(()=>{if(0===F.length){let e=Date.now();return[{time:"Start",price:t,timestamp:e-36e5*C.hours},{time:"Now",price:t,timestamp:e}]}return[...F].sort((e,t)=>new Date(e.recorded_at).getTime()-new Date(t.recorded_at).getTime()).map(e=>{let t=new Date(e.recorded_at),r=C.hours;return{time:r<=48?t.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}):r<=168?t.toLocaleDateString("en-US",{weekday:"short",hour:"numeric",hour12:!0}):t.toLocaleDateString("en-US",{month:"short",day:"numeric"}),price:"string"==typeof e.price?parseFloat(e.price):e.price,timestamp:t.getTime(),supply:e.supply,demand:e.demand}})},[F,t,C.hours]),Z=(0,s.useMemo)(()=>{if(L.length<2)return{startPrice:t,endPrice:t,change:0,changePercent:0,high:t,low:t,isPositive:!0};let e=L.map(e=>e.price),r=e[0],a=e[e.length-1],s=a-r;return{startPrice:r,endPrice:a,change:s,changePercent:(a-r)/r*100,high:Math.max(...e),low:Math.min(...e),isPositive:s>=0}},[L,t]),E=(0,s.useMemo)(()=>{if(0===L.length)return[.9*t,1.1*t];let e=L.map(e=>e.price),r=Math.min(...e),a=Math.max(...e),s=(a-r)*.1||.05*a;return[Math.max(0,r-s),a+s]},[L,t]),R="priceGradient-".concat(Math.random().toString(36).substr(2,9)),_=Z.isPositive?"#10b981":"#ef4444",U=Z.isPositive?"#10b981":"#ef4444",T=Z.isPositive?"rgba(16, 185, 129, 0.05)":"rgba(239, 68, 68, 0.05)";return(0,a.jsxs)("div",{className:"relative rounded-2xl border border-gray-200/50 dark:border-gray-700/50 bg-gradient-to-br from-white via-white to-gray-50/50 dark:from-gray-900 dark:via-gray-900 dark:to-gray-800/50 shadow-2xl overflow-hidden backdrop-blur-sm",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-corporate-blue/5 via-transparent to-corporate-blue-light/5 dark:from-corporate-blue/10 dark:via-transparent dark:to-corporate-blue-dark/10 pointer-events-none"}),(0,a.jsx)("div",{className:"absolute inset-0 ring-1 ring-inset ring-white/20 dark:ring-gray-700/30 pointer-events-none"}),(0,a.jsxs)("div",{className:"relative p-6",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 rounded-lg ".concat(Z.isPositive?"bg-emerald-100 dark:bg-emerald-900/30":"bg-red-100 dark:bg-red-900/30"),children:Z.isPositive?(0,a.jsx)(u.Z,{className:"w-5 h-5 text-emerald-600 dark:text-emerald-400"}):(0,a.jsx)(g.Z,{className:"w-5 h-5 text-red-600 dark:text-red-400"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:v}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-0.5",children:[(0,a.jsx)("span",{className:"text-2xl font-bold font-mono text-gray-900 dark:text-white",children:b(t)}),(0,a.jsx)("span",{className:"text-sm font-semibold ".concat(Z.isPositive?"text-emerald-600 dark:text-emerald-400":"text-red-600 dark:text-red-400"),children:y(Z.changePercent)})]})]})]}),(0,a.jsx)("div",{className:"flex items-center gap-0.5 sm:gap-1 p-1 bg-gray-100 dark:bg-gray-800 rounded-lg overflow-x-auto",children:f.map(e=>(0,a.jsx)("button",{onClick:()=>k(e.value),className:"px-2 sm:px-3 py-1.5 text-[10px] sm:text-xs font-semibold rounded-md transition-all duration-200 flex-shrink-0 ".concat(N===e.value?"bg-white dark:bg-gray-700 text-corporate-blue dark:text-corporate-blue-light shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"),children:e.label},e.value))})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2 sm:gap-3 mb-4 sm:mb-6",children:[(0,a.jsxs)("div",{className:"text-center p-2 rounded-lg bg-gray-50 dark:bg-gray-800/50",children:[(0,a.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Open"}),(0,a.jsx)("p",{className:"text-sm font-bold text-gray-900 dark:text-white font-mono",children:b(Z.startPrice)})]}),(0,a.jsxs)("div",{className:"text-center p-2 rounded-lg bg-gray-50 dark:bg-gray-800/50",children:[(0,a.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"High"}),(0,a.jsx)("p",{className:"text-sm font-bold text-emerald-600 dark:text-emerald-400 font-mono",children:b(Z.high)})]}),(0,a.jsxs)("div",{className:"text-center p-2 rounded-lg bg-gray-50 dark:bg-gray-800/50",children:[(0,a.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Low"}),(0,a.jsx)("p",{className:"text-sm font-bold text-red-600 dark:text-red-400 font-mono",children:b(Z.low)})]}),(0,a.jsxs)("div",{className:"text-center p-2 rounded-lg bg-gray-50 dark:bg-gray-800/50",children:[(0,a.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Change"}),(0,a.jsxs)("p",{className:"text-sm font-bold font-mono ".concat(Z.isPositive?"text-emerald-600 dark:text-emerald-400":"text-red-600 dark:text-red-400"),children:[Z.change>=0?"+":"",b(Z.change)]})]})]}),(0,a.jsx)("div",{className:"h-64 sm:h-80",children:w?(0,a.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,a.jsxs)("div",{className:"flex items-center gap-2 text-gray-500 dark:text-gray-400",children:[(0,a.jsx)(h.Z,{className:"w-5 h-5 animate-pulse"}),(0,a.jsx)("span",{children:"Loading chart data..."})]})}):P?(0,a.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-red-500 dark:text-red-400",children:P}),(0,a.jsx)("button",{onClick:()=>k(N),className:"mt-2 text-sm text-corporate-blue hover:underline",children:"Retry"})]})}):(0,a.jsx)(n.h,{width:"100%",height:"100%",children:(0,a.jsxs)(i.T,{data:L,margin:{top:10,right:10,left:0,bottom:0},children:[(0,a.jsx)("defs",{children:(0,a.jsxs)("linearGradient",{id:R,x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,a.jsx)("stop",{offset:"0%",stopColor:U,stopOpacity:.3}),(0,a.jsx)("stop",{offset:"100%",stopColor:T,stopOpacity:0})]})}),(0,a.jsx)(o.q,{strokeDasharray:"3 3",stroke:"rgba(156, 163, 175, 0.2)",vertical:!1}),(0,a.jsx)(l.K,{dataKey:"time",axisLine:!1,tickLine:!1,tick:{fontSize:11,fill:"#9ca3af"},interval:"preserveStartEnd",minTickGap:30}),(0,a.jsx)(d.B,{domain:E,axisLine:!1,tickLine:!1,tick:{fontSize:11,fill:"#9ca3af"},tickFormatter:e=>"$".concat(e.toFixed(2)),width:60}),(0,a.jsx)(c.u,{content:(0,a.jsx)(e=>{let{active:t,payload:r,label:s}=e;if(t&&r&&r.length){let e=r[0].payload;return(0,a.jsxs)("div",{className:"rounded-lg px-4 py-3 text-xs shadow-2xl border border-gray-700 bg-gray-900 text-white max-w-[560px]",children:[(0,a.jsx)("p",{className:"text-[10px] text-gray-400 mb-1",children:e.time}),(0,a.jsx)("p",{className:"text-lg font-bold font-mono",children:b(e.price)}),(void 0!==e.supply||void 0!==e.demand)&&(0,a.jsxs)("div",{className:"mt-2 grid grid-cols-2 gap-2",children:[void 0!==e.supply&&(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"text-[10px] text-gray-400",children:"Supply"}),(0,a.jsx)("p",{className:"font-mono",children:Math.round(e.supply).toLocaleString()})]}),void 0!==e.demand&&(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"text-[10px] text-gray-400",children:"Demand"}),(0,a.jsx)("p",{className:"font-mono",children:Math.round(e.demand).toLocaleString()})]})]})]})}return null},{})}),(0,a.jsx)(x.db,{y:Z.startPrice,stroke:"rgba(156, 163, 175, 0.5)",strokeDasharray:"5 5"}),(0,a.jsx)(m.uN,{type:"monotone",dataKey:"price",stroke:_,strokeWidth:2,fill:"url(#".concat(R,")"),animationDuration:750})]})})}),(0,a.jsxs)("div",{className:"mt-4 flex items-center justify-between text-xs text-gray-500 dark:text-gray-400",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(p.Z,{className:"w-3.5 h-3.5"}),(0,a.jsxs)("span",{children:["Last ",C.label.toLowerCase()]})]}),(0,a.jsx)("div",{children:L.length>0&&F.length>0&&(0,a.jsxs)("span",{children:[F.length," data points"]})})]})]})]})}},79778:function(e,t,r){r.d(t,{Z:function(){return u}});var a=r(37821),s=r(58078),n=r(32993),i=r(82206),o=r(94547);r(81584);var l=r(61228),d=r(40398),c=r(58504);let x={production:"Prod",retail:"Retail",service:"Svc",extraction:"Ext"},m={chainNode:(0,s.memo)(function(e){let{data:t}=e,r=(0,c.useRouter)(),s="central"===t.role;return(0,a.jsxs)("div",{className:"\n        px-3 py-2 rounded-lg border-2 shadow-md\n        ".concat((()=>{switch(t.nodeType){case"resource":return"bg-amber-100 dark:bg-amber-900/50 border-amber-300 dark:border-amber-700";case"product":return"bg-indigo-100 dark:bg-indigo-900/50 border-indigo-300 dark:border-indigo-700";case"sector":return"bg-gray-100 dark:bg-gray-800/80 border-gray-300 dark:border-gray-600";default:return"bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600"}})(),"\n        ").concat(t.href?"cursor-pointer hover:shadow-lg hover:scale-105 transition-all":"","\n        ").concat(s?"ring-2 ring-offset-2 ring-blue-500 dark:ring-offset-gray-900":"","\n        min-w-[100px] max-w-[160px]\n      "),onClick:()=>{t.href&&r.push(t.href)},children:[(0,a.jsx)(n.HH,{type:"target",position:n.Ly.Left,className:"!bg-gray-400 dark:!bg-gray-500 !w-2 !h-2"}),(0,a.jsxs)("div",{className:"flex flex-col items-center gap-1",children:[(0,a.jsx)("span",{className:"text-xs font-semibold text-center leading-tight ".concat((()=>{switch(t.nodeType){case"resource":return"text-amber-800 dark:text-amber-200";case"product":return"text-indigo-800 dark:text-indigo-200";case"sector":return"text-gray-800 dark:text-gray-200";default:return"text-gray-900 dark:text-gray-100"}})()),children:t.label}),t.unitTypes.length>0&&(0,a.jsx)("div",{className:"flex flex-wrap gap-1 justify-center mt-1",children:t.unitTypes.map(e=>(0,a.jsx)("span",{className:"px-1.5 py-0.5 text-[10px] font-medium rounded text-white",style:{backgroundColor:l.$b[e]},children:x[e]},e))}),s&&(0,a.jsx)("span",{className:"text-[9px] text-gray-500 dark:text-gray-400 uppercase tracking-wide mt-0.5",children:"product"===t.nodeType?"Product":"Resource"})]}),(0,a.jsx)(n.HH,{type:"source",position:n.Ly.Right,className:"!bg-gray-400 dark:!bg-gray-500 !w-2 !h-2"})]})})};function u(e){let{type:t,name:r}=e,{config:c,loading:x}=(0,d.ZV)(),u=(0,s.useMemo)(()=>(0,l.X2)(t,r,c),[t,r,c]),[g,h,p]=(0,n.Rr)(u.nodes),[f,b,y]=(0,n.ll)(u.edges);(0,s.useEffect)(()=>{h(u.nodes),b(u.edges)},[u,h,b]);let v=u.nodes.length>0;return x?(0,a.jsx)("div",{className:"h-[250px] w-full rounded-2xl border border-gray-200/50 dark:border-gray-700/50 bg-gradient-to-br from-white via-white to-gray-50/50 dark:from-gray-900 dark:via-gray-900 dark:to-gray-800/50 shadow-lg flex items-center justify-center",children:(0,a.jsx)("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"Loading production chain..."})}):v?(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,a.jsx)("h3",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300",children:"Production Chain"}),(0,a.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"(Click nodes to navigate)"})]}),(0,a.jsx)("div",{className:"h-[280px] w-full rounded-2xl border border-gray-200/50 dark:border-gray-700/50 bg-gradient-to-br from-white via-white to-gray-50/50 dark:from-gray-900 dark:via-gray-900 dark:to-gray-800/50 shadow-lg overflow-hidden",children:(0,a.jsxs)(n.x$,{nodes:g,edges:f,onNodesChange:p,onEdgesChange:y,nodeTypes:m,fitView:!0,fitViewOptions:{padding:.2,minZoom:.5,maxZoom:1.5},minZoom:.3,maxZoom:2,proOptions:{hideAttribution:!0},nodesDraggable:!1,nodesConnectable:!1,elementsSelectable:!1,panOnDrag:!0,zoomOnScroll:!0,preventScrolling:!1,children:[(0,a.jsx)(i.A,{variant:i.T.Dots,gap:16,size:1,color:"rgba(156, 163, 175, 0.3)",className:"dark:!bg-gray-900"}),(0,a.jsx)(o.Z,{showZoom:!0,showFitView:!0,showInteractive:!1,className:"!bg-white/90 dark:!bg-gray-800/90 !border-gray-200 dark:!border-gray-700 !shadow-md"})]})}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-4 mt-3 text-xs text-gray-600 dark:text-gray-400",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded bg-amber-200 dark:bg-amber-800 border border-amber-400 dark:border-amber-600"}),(0,a.jsx)("span",{children:"Resource"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded bg-indigo-200 dark:bg-indigo-800 border border-indigo-400 dark:border-indigo-600"}),(0,a.jsx)("span",{children:"Product"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded bg-gray-200 dark:bg-gray-700 border border-gray-400 dark:border-gray-500"}),(0,a.jsx)("span",{children:"Sector"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3 ml-2 border-l border-gray-300 dark:border-gray-600 pl-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("span",{className:"px-1.5 py-0.5 text-[10px] font-medium rounded text-white bg-blue-500",children:"Prod"}),(0,a.jsx)("span",{children:"Production"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("span",{className:"px-1.5 py-0.5 text-[10px] font-medium rounded text-white bg-orange-500",children:"Ext"}),(0,a.jsx)("span",{children:"Extraction"})]}),(0,a.jsx)("div",{className:"flex items-center gap-1",children:(0,a.jsx)("span",{className:"px-1.5 py-0.5 text-[10px] font-medium rounded text-white bg-green-500",children:"Retail"})}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("span",{className:"px-1.5 py-0.5 text-[10px] font-medium rounded text-white bg-purple-500",children:"Svc"}),(0,a.jsx)("span",{children:"Service"})]})]})]})]}):(0,a.jsx)("div",{className:"h-[250px] w-full rounded-2xl border border-gray-200/50 dark:border-gray-700/50 bg-gradient-to-br from-white via-white to-gray-50/50 dark:from-gray-900 dark:via-gray-900 dark:to-gray-800/50 shadow-lg flex items-center justify-center",children:(0,a.jsx)("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"No production chain data available"})})}},40398:function(e,t,r){r.d(t,{ZV:function(){return o}});var a=r(58078),s=r(64790);let n=null,i=null;function o(){let[e,t]=(0,a.useState)(n),[r,o]=(0,a.useState)(!n),[l,d]=(0,a.useState)(null),c=(0,a.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!e&&n){t(n),o(!1);return}if(i){try{let e=await i;t(e),o(!1)}catch(e){d(e.message||"Failed to fetch sector configuration"),o(!1)}return}o(!0),d(null),i=s.cW.getConfig();try{let e=await i;n=e,e.version,t(e)}catch(e){console.error("Failed to fetch sector config:",e),d(e.message||"Failed to fetch sector configuration")}finally{o(!1),i=null}},[]),x=(0,a.useCallback)(async()=>{n=null,await c(!0)},[c]);(0,a.useEffect)(()=>{c()},[c]);let m=(0,a.useMemo)(()=>({getSectorProduct:t=>{var r;return e&&(null===(r=e.sectors[t])||void 0===r?void 0:r.producedProduct)||null},getSectorResource:t=>{var r;return e&&(null===(r=e.sectors[t])||void 0===r?void 0:r.primaryResource)||null},getProductReferenceValue:t=>{var r,a;return e&&null!==(a=null===(r=e.products[t])||void 0===r?void 0:r.referenceValue)&&void 0!==a?a:1e3},getResourceBasePrice:t=>{var r,a;return e&&null!==(a=null===(r=e.resources[t])||void 0===r?void 0:r.basePrice)&&void 0!==a?a:100},getSectorsProducingProduct:t=>{if(!e)return[];let r=[];for(let[a,s]of Object.entries(e.sectors))s.producedProduct===t&&r.push(a);return r},getSectorsDemandingProduct:t=>{if(!e)return[];let r=[];for(let[a,s]of Object.entries(e.sectors)){let e=[];for(let r of["production","retail","service","extraction"]){let a=s.units[r];a.isEnabled&&a.inputs.some(e=>"product"===e.type&&e.name===t)&&e.push(r)}e.length>0&&r.push({sector:a,unitTypes:e})}return r},getSectorsExtractingResource:t=>{if(!e)return[];let r=[];for(let[a,s]of Object.entries(e.sectors))s.units.extraction.outputs.some(e=>"resource"===e.type&&e.name===t)&&r.push(a);return r},getSectorsDemandingResource:t=>{if(!e)return[];let r=[];for(let[a,s]of Object.entries(e.sectors)){let e=[];for(let r of["production","retail","service","extraction"]){let a=s.units[r];a.isEnabled&&a.inputs.some(e=>"resource"===e.type&&e.name===t)&&e.push(r)}e.length>0&&r.push({sector:a,unitTypes:e})}return r},getUnitInputs:(t,r)=>{var a,s;return e&&(null===(s=e.sectors[t])||void 0===s?void 0:null===(a=s.units[r])||void 0===a?void 0:a.inputs)||[]},getUnitOutputs:(t,r)=>{var a,s;return e&&(null===(s=e.sectors[t])||void 0===s?void 0:null===(a=s.units[r])||void 0===a?void 0:a.outputs)||[]}}),[e]);return{config:e,loading:r,error:l,refetch:x,...m}}},36330:function(e,t,r){function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if("number"==typeof e&&Number.isFinite(e))return e;if("string"==typeof e){let r=parseFloat(e);return Number.isFinite(r)?r:t}return t}function s(e,t,r){let s=Math.round(100*a(e,0))/100,n=r||function(e){let t=(e||"").toLowerCase();return t.includes("us")||t.startsWith("en-us")?"USD":t.includes("gb")||t.startsWith("en-gb")?"GBP":t.includes("de")||t.startsWith("de")||t.includes("fr")||t.startsWith("fr")?"EUR":t.includes("jp")||t.startsWith("ja")?"JPY":t.includes("cn")||t.startsWith("zh-cn")?"CNY":"USD"}(t);try{return new Intl.NumberFormat(t||"en-US",{style:"currency",currency:n,minimumFractionDigits:2,maximumFractionDigits:2}).format(s)}catch(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(s)}}function n(e,t){let r=a(e,0);try{return new Intl.NumberFormat(t||"en-US").format(r)}catch(e){return new Intl.NumberFormat("en-US").format(r)}}function i(e,t,r){let s=Math.max(0,a(e,0))/Math.max(1e-4,a(t,1e-4)),n=Math.max(0,Math.min(1,a(r,.5)));return s>1.1?"low":s<.8||n>=.7?"high":"medium"}r.d(t,{Fs:function(){return i},K$:function(){return n},t$:function(){return s}})}}]);