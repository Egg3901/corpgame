"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4790],{64790:function(a,t,e){e.d(t,{Fi:function(){return v},Il:function(){return m},QT:function(){return f},Sb:function(){return g},V7:function(){return S},aZ:function(){return y},bf:function(){return d},cW:function(){return C},kv:function(){return r},lC:function(){return u},profileAPI:function(){return s},tO:function(){return w},tz:function(){return h},w_:function(){return l},y7:function(){return p}});var n=e(39190),o=e(82949);let i=()=>{if(o.env.NEXT_PUBLIC_API_URL)return o.env.NEXT_PUBLIC_API_URL;{let{hostname:a,port:t,origin:e,protocol:n}=window.location;return"localhost"===a||"127.0.0.1"===a?"3001"===t?e:"".concat(n,"//").concat(a,":3001"):e}};console.log("API URL Detection:",{protocol:window.location.protocol,hostname:window.location.hostname,port:window.location.port,detectedUrl:i()});let c=n.Z.create({headers:{"Content-Type":"application/json"},timeout:1e4});c.interceptors.request.use(a=>{a.baseURL?a.baseURL||(a.baseURL=o.env.NEXT_PUBLIC_API_URL||"http://localhost:3001"):a.baseURL=i();{let t=localStorage.getItem("token");t&&(a.headers.Authorization="Bearer ".concat(t))}return a}),c.interceptors.response.use(a=>a,a=>("ECONNREFUSED"===a.code?console.error("Connection refused - is the backend server running?"):"Network Error"===a.message&&console.error("Network error - check CORS settings and server availability"),Promise.reject(a)));let r={register:async a=>{try{return(await c.post("/api/auth/register",a)).data}catch(a){throw console.error("Registration API error:",a),a}},login:async a=>{try{return(await c.post("/api/auth/login",a)).data}catch(a){throw console.error("Login API error:",a),a}},getMe:async()=>{try{return(await c.get("/api/auth/me")).data}catch(a){throw console.error("GetMe API error:",a),a}}},s={getById:async a=>(await c.get("/api/profile/".concat(a))).data,getHistory:async a=>(await c.get("/api/profile/".concat(a,"/history"))).data,uploadAvatar:async a=>{console.log("API: Starting avatar upload for file:",a.name,"size:",a.size);let t=new FormData;t.append("avatar",a);let e=await c.post("/api/profile/avatar",t,{headers:{"Content-Type":"multipart/form-data"}});return console.log("API: Avatar upload response:",e.data),e.data},updateProfile:async a=>(await c.patch("/api/profile/update",a)).data},p={getAll:async()=>(await c.get("/api/corporation")).data,getList:async a=>{let t=new URLSearchParams;return a.page&&t.append("page",String(a.page)),a.limit&&t.append("limit",String(a.limit)),a.sort&&t.append("sort",a.sort),a.dir&&t.append("dir",a.dir),a.sector&&t.append("sector",a.sector),a.q&&t.append("q",a.q),a.ceo&&t.append("ceo",a.ceo),(await c.get("/api/corporation/list".concat(t.toString()?"?".concat(t.toString()):""))).data},getById:async a=>(await c.get("/api/corporation/".concat(a))).data,create:async a=>(await c.post("/api/corporation",a)).data,uploadLogo:async(a,t)=>{let e=new FormData;return e.append("logo",t),(await c.post("/api/corporation/".concat(a,"/logo"),e,{headers:{"Content-Type":"multipart/form-data"}})).data},update:async(a,t)=>(await c.patch("/api/corporation/".concat(a),t)).data,delete:async a=>{await c.delete("/api/corporation/".concat(a))},getShareholders:async a=>(await p.getById(a)).shareholders||[]},d={getByUserId:async a=>(await c.get("/api/portfolio/".concat(a))).data},l={buy:async(a,t)=>(await c.post("/api/shares/".concat(a,"/buy"),{shares:t})).data,sell:async(a,t)=>(await c.post("/api/shares/".concat(a,"/sell"),{shares:t})).data,issue:async(a,t)=>(await c.post("/api/shares/".concat(a,"/issue"),{shares:t})).data,getPriceHistory:async(a,t,e)=>{let n=new URLSearchParams;t&&n.append("hours",t.toString()),e&&n.append("limit",e.toString());let o=n.toString();return(await c.get("/api/shares/".concat(a,"/history").concat(o?"?".concat(o):""))).data},getValuation:async a=>(await c.get("/api/shares/".concat(a,"/valuation"))).data},u={report:async a=>(await c.post("/api/issues/report",a)).data},g={getAllUsers:async()=>(await c.get("/api/admin/users")).data,toggleAdminStatus:async a=>(await c.patch("/api/admin/users/".concat(a,"/admin"))).data,deleteUser:async a=>{await c.delete("/api/admin/users/".concat(a))},getReportedChats:async a=>{let t=new URLSearchParams;a&&t.append("include_reviewed","true");let e=t.toString();return(await c.get("/api/admin/reported-chats".concat(e?"?".concat(e):""))).data},clearReportedChat:async a=>(await c.delete("/api/admin/reported-chats/".concat(a))).data,getConversation:async(a,t,e,n)=>{let o=new URLSearchParams;e&&o.append("limit",e.toString()),n&&o.append("offset",n.toString());let i=o.toString();return(await c.get("/api/admin/conversation/".concat(a,"/").concat(t).concat(i?"?".concat(i):""))).data},runTurn:async()=>(await c.post("/api/admin/run-turn")).data,recalculatePrices:async()=>(await c.post("/api/admin/recalculate-prices")).data,setGameTime:async(a,t)=>(await c.post("/api/admin/set-game-time",{year:a,quarter:t})).data,getTransactions:async a=>{let t=new URLSearchParams;(null==a?void 0:a.user_id)&&t.append("user_id",a.user_id.toString()),(null==a?void 0:a.corporation_id)&&t.append("corporation_id",a.corporation_id.toString()),(null==a?void 0:a.type)&&t.append("type",a.type),(null==a?void 0:a.search)&&t.append("search",a.search),(null==a?void 0:a.from_date)&&t.append("from_date",a.from_date),(null==a?void 0:a.to_date)&&t.append("to_date",a.to_date),(null==a?void 0:a.limit)&&t.append("limit",a.limit.toString()),(null==a?void 0:a.offset)&&t.append("offset",a.offset.toString());let e=t.toString();return(await c.get("/api/admin/transactions".concat(e?"?".concat(e):""))).data},forceStockSplit:async a=>(await c.post("/api/admin/force-stock-split/".concat(a))).data,resetBoard:async a=>(await c.post("/api/admin/corporation/".concat(a,"/reset-board"))).data,forceEndVote:async(a,t)=>(await c.post("/api/admin/corporation/".concat(a,"/force-end-vote/").concat(t))).data,searchCorporations:async a=>{let t=a?"?q=".concat(encodeURIComponent(a)):"";return(await c.get("/api/admin/corporations/search".concat(t))).data},deleteUserShares:async(a,t,e)=>(await c.delete("/api/admin/corporation/".concat(a,"/shares/").concat(t),{data:{amount:e}})).data,deletePublicShares:async(a,t)=>(await c.delete("/api/admin/corporation/".concat(a,"/public-shares"),{data:{amount:t}})).data,searchUsers:async a=>{let t=a?"?q=".concat(encodeURIComponent(a)):"";return(await c.get("/api/admin/users/search".concat(t))).data},addCashToAllUsers:async a=>(await c.post("/api/admin/users/add-cash-all",{amount:a})).data,addCashToUser:async(a,t)=>(await c.post("/api/admin/users/".concat(a,"/add-cash"),{amount:t})).data,addCapitalToAllCorporations:async a=>(await c.post("/api/admin/corporations/add-capital-all",{amount:a})).data,addCapitalToCorporation:async(a,t)=>(await c.post("/api/admin/corporations/".concat(a,"/add-capital"),{amount:t})).data,migrateManufacturingToLightIndustry:async()=>(await c.post("/api/admin/migrate-manufacturing-to-light-industry")).data,resetUser:async a=>(await c.post("/api/admin/users/".concat(a,"/reset"))).data,deploy:async()=>(await c.post("/api/admin/deploy")).data,getLastDeployment:async()=>(await c.get("/api/admin/deploy/last")).data},m={send:async a=>(await c.post("/api/messages",a)).data,getAll:async(a,t,e,n)=>{let o=new URLSearchParams;a&&o.append("type",a),t&&o.append("limit",t.toString()),e&&o.append("offset",e.toString()),void 0!==n&&o.append("include_read",n.toString());let i=o.toString();return(await c.get("/api/messages".concat(i?"?".concat(i):""))).data},getById:async a=>(await c.get("/api/messages/".concat(a))).data,getConversation:async(a,t,e)=>{let n=new URLSearchParams;t&&n.append("limit",t.toString()),e&&n.append("offset",e.toString());let o=n.toString();return(await c.get("/api/messages/conversation/".concat(a).concat(o?"?".concat(o):""))).data},markAsRead:async a=>(await c.patch("/api/messages/".concat(a,"/read"))).data,markConversationAsRead:async a=>(await c.patch("/api/messages/conversation/".concat(a,"/read"))).data,getUnreadCount:async()=>(await c.get("/api/messages/unread/count")).data,delete:async a=>(await c.delete("/api/messages/".concat(a))).data,reportConversation:async(a,t)=>(await c.post("/api/messages/conversation/".concat(a,"/report"),{reason:t})).data},y={transfer:async a=>(await c.post("/api/cash/transfer",a)).data},w={getBoard:async a=>(await c.get("/api/board/".concat(a))).data,getProposals:async a=>(await c.get("/api/board/".concat(a,"/proposals"))).data,createProposal:async(a,t)=>(await c.post("/api/board/".concat(a,"/proposals"),t)).data,castVote:async(a,t,e)=>(await c.post("/api/board/".concat(a,"/proposals/").concat(t,"/vote"),{vote:e})).data,resignCeo:async a=>(await c.post("/api/board/".concat(a,"/ceo/resign"))).data},h={getTime:async()=>(await c.get("/api/game/time")).data},f={getCommodities:async()=>(await c.get("/api/markets/commodities")).data,getMarketMetadata:async()=>(await c.get("/api/markets/metadata")).data,getResourceDetail:async function(a){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"demanders";return(await c.get("/api/markets/resource/".concat(encodeURIComponent(a)),{params:{page:t,limit:e,filter:n}})).data},getResourcePriceHistory:async function(a){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:96,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;return(await c.get("/api/markets/resource/".concat(encodeURIComponent(a),"/history"),{params:{hours:t,limit:e}})).data},getResourcePieData:async a=>(await c.get("/api/markets/resource/".concat(encodeURIComponent(a),"/pie-data"))).data,getProductDetail:async function(a){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"suppliers";return(await c.get("/api/markets/product/".concat(encodeURIComponent(a)),{params:{page:t,limit:e,tab:n}})).data},getProductPriceHistory:async function(a){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:96,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;return(await c.get("/api/markets/product/".concat(encodeURIComponent(a),"/history"),{params:{hours:t,limit:e}})).data},getProductPieData:async a=>(await c.get("/api/markets/product/".concat(encodeURIComponent(a),"/pie-data"))).data,getStates:async()=>(await c.get("/api/markets/states")).data,getState:async a=>(await c.get("/api/markets/states/".concat(a))).data,enterMarket:async(a,t,e)=>(await c.post("/api/markets/states/".concat(a,"/enter"),{sector_type:t,corporation_id:e})).data,buildUnit:async(a,t)=>(await c.post("/api/markets/entries/".concat(a,"/build"),{unit_type:t})).data,getCorporationFinances:async a=>(await c.get("/api/markets/corporation/".concat(a,"/finances"))).data,getCorporationEntries:async a=>(await c.get("/api/markets/corporation/".concat(a,"/entries"))).data,abandonSector:async a=>(await c.delete("/api/markets/entries/".concat(a,"/abandon"))).data,abandonUnit:async(a,t)=>(await c.delete("/api/markets/entries/".concat(a,"/units/").concat(t))).data,getSectorRules:async()=>(await c.get("/api/markets/config")).data,updateSectorRules:async a=>(await c.put("/api/markets/config",a)).data},v={getAllActions:async a=>(await c.get("/api/corporate-actions/".concat(a))).data,getActiveActions:async a=>(await c.get("/api/corporate-actions/".concat(a,"/active"))).data,activateSupplyRush:async a=>(await c.post("/api/corporate-actions/".concat(a,"/supply-rush"))).data,activateMarketingCampaign:async a=>(await c.post("/api/corporate-actions/".concat(a,"/marketing-campaign"))).data},S=function(a){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/defaultpfp.jpg";if(!a||""===a.trim())return t;let e=a.trim();return e.startsWith("http://")||e.startsWith("https://")||e.startsWith("/")?e:"/"+e},C={getConfig:async()=>(await c.get("/api/sector-config")).data,getVersion:async()=>(await c.get("/api/sector-config/version")).data,getAdminConfig:async()=>(await c.get("/api/sector-config/admin")).data,updateUnitConfig:async(a,t,e)=>(await c.put("/api/sector-config/admin/unit/".concat(encodeURIComponent(a),"/").concat(t),e)).data,updateInput:async(a,t)=>(await c.put("/api/sector-config/admin/input/".concat(a),{consumption_rate:t})).data,updateOutput:async(a,t)=>(await c.put("/api/sector-config/admin/output/".concat(a),{output_rate:t})).data,updateProduct:async(a,t)=>(await c.put("/api/sector-config/admin/products/".concat(encodeURIComponent(a)),t)).data,updateResource:async(a,t)=>(await c.put("/api/sector-config/admin/resources/".concat(encodeURIComponent(a)),t)).data,createInput:async a=>(await c.post("/api/sector-config/admin/input",a)).data,deleteInput:async a=>(await c.delete("/api/sector-config/admin/input/".concat(a))).data,createOutput:async a=>(await c.post("/api/sector-config/admin/output",a)).data,deleteOutput:async a=>(await c.delete("/api/sector-config/admin/output/".concat(a))).data,updateProducedProduct:async(a,t)=>(await c.put("/api/sector-config/admin/sectors/".concat(encodeURIComponent(a),"/product"),{producedProduct:t})).data}}}]);