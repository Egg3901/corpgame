(()=>{var e={};e.id=204,e.ids=[204],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},98216:e=>{"use strict";e.exports=require("net")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},48400:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>c,routeModule:()=>g,tree:()=>n}),r(23515),r(92902),r(12874);var a=r(27105),s=r(15265),o=r(90157),i=r.n(o),l=r(44665),d={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);r.d(t,d);let n=["",{children:["corporation",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,23515)),"C:\\Users\\rainf\\wip\\frontend\\app\\corporation\\[id]\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,92902)),"C:\\Users\\rainf\\wip\\frontend\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,12874,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\rainf\\wip\\frontend\\app\\corporation\\[id]\\page.tsx"],x="/corporation/[id]/page",m={require:r,loadChunk:()=>Promise.resolve()},g=new a.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/corporation/[id]/page",pathname:"/corporation/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:n}})},43191:(e,t,r)=>{Promise.resolve().then(r.bind(r,52235))},52235:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>eL});var a=r(19899),s=r(5507),o=r(76153),i=r(54175),l=r(65559),d=r(21842),n=r(66409),c=r(26435),x=r(77395),m=r(98412),g=r(91990),h=r(51762),p=r(87167),u=r(68053),b=r(18255),y=r(70021),v=r(25452),k=r(64276),f=r(47061),j=r(9930),N=r(85517),w=r(98494),_=r(6234),S=r(37067),C=r(61278);let P=(0,C.Z)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);var E=r(94672),M=r(1614),Z=r(88408),$=r(80433),O=r(41393),T=r(19804),D=r(37657),L=r(89205),A=r(40527),F=r(84909),I=r(51721),R=r(99993);let q=(0,C.Z)("arrow-up",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]),U=(0,C.Z)("arrow-down",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]),z=(0,C.Z)("crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]),H=(0,C.Z)("users-round",[["path",{d:"M18 21a8 8 0 0 0-16 0",key:"3ypg7q"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3",key:"10s06x"}]]);var V=r(65790);let B=(0,C.Z)("percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]),W=(0,C.Z)("gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]),G=(0,C.Z)("split",[["path",{d:"M16 3h5v5",key:"1806ms"}],["path",{d:"M8 3H3v5",key:"15dfkv"}],["path",{d:"M12 22v-8.3a4 4 0 0 0-1.172-2.872L3 3",key:"1qrqzj"}],["path",{d:"m15 9 6-6",key:"ko1vev"}]]);var K=r(16903),Y=r(32070);let Q=(0,C.Z)("thumbs-up",[["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}],["path",{d:"M7 10v12",key:"1qc93n"}]]),X=(0,C.Z)("thumbs-down",[["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}],["path",{d:"M17 14V2",key:"8ymqnk"}]]),J=(0,C.Z)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);var ee=r(30467),et=r(41963);let er=(0,C.Z)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),ea={AL:"Alabama",AK:"Alaska",AZ:"Arizona",AR:"Arkansas",CA:"California",CO:"Colorado",CT:"Connecticut",DE:"Delaware",FL:"Florida",GA:"Georgia",HI:"Hawaii",ID:"Idaho",IL:"Illinois",IN:"Indiana",IA:"Iowa",KS:"Kansas",KY:"Kentucky",LA:"Louisiana",ME:"Maine",MD:"Maryland",MA:"Massachusetts",MI:"Michigan",MN:"Minnesota",MS:"Mississippi",MO:"Missouri",MT:"Montana",NE:"Nebraska",NV:"Nevada",NH:"New Hampshire",NJ:"New Jersey",NM:"New Mexico",NY:"New York",NC:"North Carolina",ND:"North Dakota",OH:"Ohio",OK:"Oklahoma",OR:"Oregon",PA:"Pennsylvania",RI:"Rhode Island",SC:"South Carolina",SD:"South Dakota",TN:"Tennessee",TX:"Texas",UT:"Utah",VT:"Vermont",VA:"Virginia",WA:"Washington",WV:"West Virginia",WI:"Wisconsin",WY:"Wyoming"};function es({corporationId:e,corporationName:t,viewerUserId:r,isAdmin:o=!1}){let[l,n]=(0,s.useState)(null),[c,x]=(0,s.useState)([]),[m,g]=(0,s.useState)(!0),[h,p]=(0,s.useState)(""),[u,b]=(0,s.useState)(!1),[y,v]=(0,s.useState)(!1),[k,j]=(0,s.useState)(!1),[N,w]=(0,s.useState)(null),[_,C]=(0,s.useState)(!1),[P,E]=(0,s.useState)("ceo_nomination"),[M,Z]=(0,s.useState)(""),[O,L]=(0,s.useState)(""),[A,F]=(0,s.useState)(""),[I,R]=(0,s.useState)(3),[q,U]=(0,s.useState)(""),[es,eo]=(0,s.useState)(1e5),[ei,el]=(0,s.useState)(0),[ed,en]=(0,s.useState)(0),[ec,ex]=(0,s.useState)("diversified"),em=(0,s.useCallback)(async()=>{try{let[t,r]=await Promise.all([d.tO.getBoard(e),d.tO.getProposals(e)]);n(t),x(r)}catch(e){console.error("Failed to fetch board data:",e),p(e.response?.data?.error||"Failed to load board data")}finally{g(!1)}},[e]),eg=async t=>{if(t.preventDefault(),l){j(!0);try{let t;switch(P){case"ceo_nomination":if(!M){alert("Please select a nominee"),j(!1);return}t={proposal_type:"ceo_nomination",proposal_data:{nominee_id:Number(M)}};break;case"sector_change":if(!O){alert("Please select a sector"),j(!1);return}t={proposal_type:"sector_change",proposal_data:{new_sector:O}};break;case"hq_change":if(!A){alert("Please select a state"),j(!1);return}t={proposal_type:"hq_change",proposal_data:{new_state:A}};break;case"board_size":t={proposal_type:"board_size",proposal_data:{new_size:I}};break;case"appoint_member":if(!q){alert("Please select an appointee"),j(!1);return}t={proposal_type:"appoint_member",proposal_data:{appointee_id:Number(q)}};break;case"ceo_salary_change":if(es<0){alert("Salary must be non-negative"),j(!1);return}if(es>1e7){alert("Salary cannot exceed $10,000,000"),j(!1);return}t={proposal_type:"ceo_salary_change",proposal_data:{new_salary:es}};break;case"dividend_change":if(ei<0||ei>100){alert("Dividend percentage must be between 0 and 100"),j(!1);return}t={proposal_type:"dividend_change",proposal_data:{new_percentage:ei}};break;case"special_dividend":if(ed<0||ed>100){alert("Capital percentage must be between 0 and 100"),j(!1);return}t={proposal_type:"special_dividend",proposal_data:{capital_percentage:ed}};break;case"stock_split":t={proposal_type:"stock_split",proposal_data:{}};break;case"focus_change":if(!ec){alert("Please select a focus"),j(!1);return}t={proposal_type:"focus_change",proposal_data:{new_focus:ec}};break;default:return}await d.tO.createProposal(e,t),b(!1),eb(),await em()}catch(e){alert(e.response?.data?.error||"Failed to create proposal")}finally{j(!1)}}},eh=async(t,r)=>{w(t);try{await d.tO.castVote(e,t,r),await em()}catch(e){alert(e.response?.data?.error||"Failed to cast vote")}finally{w(null)}},ep=async()=>{if(confirm("Are you sure you want to resign as CEO? The largest shareholder will become Acting CEO."))try{await d.tO.resignCeo(e),await em()}catch(e){alert(e.response?.data?.error||"Failed to resign")}},eu=async()=>{if(confirm("Are you sure you want to reset the board? This will remove all appointed board members. Only the CEO will remain. This action cannot be undone.")){C(!0);try{let t=await d.Sb.resetBoard(e);alert(`Board reset successfully. ${t.removed_count} member(s) removed.`),await em()}catch(e){alert(e.response?.data?.error||"Failed to reset board")}finally{C(!1)}}},eb=()=>{E("ceo_nomination"),Z(""),L(""),F(""),R(3),U(""),eo(l?.corporation.ceo_salary||1e5),el(0),en(0),ex(l?.corporation.focus||"diversified")},ey=e=>{let t=new Date,r=new Date(e).getTime()-t.getTime();if(r<=0)return"Expired";let a=Math.floor(r/36e5),s=Math.floor(r%36e5/6e4);return a>0?`${a}h ${s}m remaining`:`${s}m remaining`},ev=e=>{switch(e.proposal_type){case"ceo_nomination":return`Elect ${e.proposal_data.nominee_name||"a shareholder"} as CEO`;case"sector_change":return`Change sector to ${e.proposal_data.new_sector}`;case"hq_change":return`Move HQ to ${ea[e.proposal_data.new_state||""]||e.proposal_data.new_state}`;case"board_size":return`Change board size to ${e.proposal_data.new_size} members`;case"appoint_member":return`Appoint ${e.proposal_data.appointee_name||"a shareholder"} to the board`;case"ceo_salary_change":return`Change CEO salary to $${(e.proposal_data.new_salary||0).toLocaleString()}/96h`;case"dividend_change":return`Change dividend percentage to ${(e.proposal_data.new_percentage||0).toFixed(2)}%`;case"special_dividend":return`Pay special dividend of ${(e.proposal_data.capital_percentage||0).toFixed(2)}% of capital`;case"stock_split":return"Execute 2:1 stock split (double shares, halve price)";case"focus_change":return`Change corporate focus to ${({extraction:"Extraction",production:"Production",retail:"Retail",service:"Service",diversified:"Diversified"})[e.proposal_data.new_focus||""]||e.proposal_data.new_focus}`;default:return"Unknown proposal"}},ek=e=>{switch(e){case"ceo_nomination":return a.jsx(z,{className:"w-4 h-4"});case"sector_change":return a.jsx(f.Z,{className:"w-4 h-4"});case"hq_change":return a.jsx($.Z,{className:"w-4 h-4"});case"board_size":return a.jsx(H,{className:"w-4 h-4"});case"appoint_member":return a.jsx(V.Z,{className:"w-4 h-4"});case"ceo_salary_change":return a.jsx(T.Z,{className:"w-4 h-4"});case"dividend_change":return a.jsx(B,{className:"w-4 h-4"});case"special_dividend":return a.jsx(W,{className:"w-4 h-4"});case"stock_split":return a.jsx(G,{className:"w-4 h-4"});case"focus_change":return a.jsx(K.Z,{className:"w-4 h-4"});default:return a.jsx(D.Z,{className:"w-4 h-4"})}};if(m)return a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:"Loading board data..."})});if(h||!l)return a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx("div",{className:"text-red-600 dark:text-red-400",children:h||"Failed to load board data"})});let ef=c.filter(e=>"active"===e.status),ej=c.filter(e=>"active"!==e.status);return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"relative rounded-2xl border border-gray-200/50 dark:border-gray-700/50 bg-gradient-to-br from-white via-white to-gray-50/50 dark:from-gray-900 dark:via-gray-900 dark:to-gray-800/50 shadow-2xl overflow-hidden backdrop-blur-sm",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-corporate-blue/5 via-transparent to-corporate-blue-light/5 dark:from-corporate-blue/10 dark:via-transparent dark:to-corporate-blue-dark/10 pointer-events-none"}),a.jsx("div",{className:"absolute inset-0 ring-1 ring-inset ring-white/20 dark:ring-gray-700/30 pointer-events-none"}),(0,a.jsxs)("div",{className:"relative p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[a.jsx(D.Z,{className:"w-5 h-5 text-corporate-blue"}),"Board of Directors"]}),(0,a.jsxs)("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[l.board_members.length," of ",l.corporation.board_size," seats"]})]}),a.jsx("div",{className:"grid gap-4",children:l.board_members.map((e,t)=>(0,a.jsxs)("div",{className:`flex items-center justify-between p-4 rounded-xl border transition-all ${e.is_ceo||e.is_acting_ceo?"border-corporate-blue/30 bg-corporate-blue/5 dark:bg-corporate-blue/10":"border-gray-200/60 dark:border-gray-700/50 bg-white/50 dark:bg-gray-800/50"}`,children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"relative",children:[a.jsx("img",{src:e.profile_image_url||"/defaultpfp.jpg",alt:e.username,className:"w-12 h-12 rounded-full object-cover ring-2 ring-gray-200/50 dark:ring-gray-700/50",onError:e=>{e.currentTarget.src="/defaultpfp.jpg"}}),(e.is_ceo||e.is_acting_ceo)&&a.jsx("div",{className:"absolute -top-1 -right-1 w-5 h-5 bg-corporate-blue rounded-full flex items-center justify-center",children:a.jsx(z,{className:"w-3 h-3 text-white"})})]}),(0,a.jsxs)("div",{children:[a.jsx(i.default,{href:`/profile/${e.profile_id}`,className:"font-bold text-gray-900 dark:text-white hover:text-corporate-blue dark:hover:text-corporate-blue-light transition-colors",children:e.player_name||e.username}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400",children:[(0,a.jsxs)("span",{children:[e.shares.toLocaleString()," shares"]}),e.is_ceo&&a.jsx("span",{className:"px-2 py-0.5 bg-corporate-blue text-white text-xs font-bold rounded",children:"CEO"}),e.is_acting_ceo&&a.jsx("span",{className:"px-2 py-0.5 bg-amber-500 text-white text-xs font-bold rounded",children:"Acting CEO"})]})]})]}),(0,a.jsxs)("div",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400",children:["Seat #",t+1]})]},e.user_id))}),l.is_ceo&&l.effective_ceo&&!l.effective_ceo.isActing&&a.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:a.jsx("button",{onClick:ep,className:"px-4 py-2 text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:"Resign as CEO"})}),o&&a.jsx("div",{className:"mt-4 pt-4 border-t-2 border-red-200 dark:border-red-800",children:(0,a.jsxs)("div",{className:"bg-red-50 dark:bg-red-900/20 p-3 rounded-lg",children:[a.jsx("h4",{className:"text-xs font-bold uppercase tracking-wider text-red-700 dark:text-red-400 mb-2",children:"Admin Controls"}),a.jsx("button",{onClick:eu,disabled:_,className:"w-full px-4 py-2 text-sm bg-red-600 text-white hover:bg-red-700 disabled:opacity-50 rounded-lg transition-colors font-semibold",children:_?"Resetting Board...":"Reset Board Members"}),a.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 mt-2",children:"This will remove all appointed board members. Only the CEO will remain."})]})})]})]}),(0,a.jsxs)("div",{className:"relative rounded-2xl border border-gray-200/50 dark:border-gray-700/50 bg-gradient-to-br from-white via-white to-gray-50/50 dark:from-gray-900 dark:via-gray-900 dark:to-gray-800/50 shadow-2xl overflow-hidden backdrop-blur-sm",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-corporate-blue/5 via-transparent to-corporate-blue-light/5 dark:from-corporate-blue/10 dark:via-transparent dark:to-corporate-blue-dark/10 pointer-events-none"}),a.jsx("div",{className:"absolute inset-0 ring-1 ring-inset ring-white/20 dark:ring-gray-700/30 pointer-events-none"}),(0,a.jsxs)("div",{className:"relative p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[a.jsx(Y.Z,{className:"w-5 h-5 text-corporate-blue"}),"Active Proposals"]}),l.is_on_board&&(0,a.jsxs)("button",{onClick:()=>b(!u),className:"px-4 py-2 bg-corporate-blue text-white rounded-lg hover:bg-corporate-blue-dark transition-colors flex items-center gap-2 text-sm font-semibold",children:[a.jsx(S.Z,{className:"w-4 h-4"}),"New Proposal"]})]}),u&&l.is_on_board&&(0,a.jsxs)("form",{onSubmit:eg,className:"mb-6 p-4 rounded-xl border border-corporate-blue/30 bg-corporate-blue/5 dark:bg-corporate-blue/10",children:[a.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-4",children:"Create New Proposal"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Proposal Type"}),(0,a.jsxs)("select",{value:P,onChange:e=>E(e.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[a.jsx("option",{value:"ceo_nomination",children:"Nominate CEO"}),a.jsx("option",{value:"sector_change",children:"Change Sector"}),a.jsx("option",{value:"hq_change",children:"Change HQ State"}),a.jsx("option",{value:"board_size",children:"Change Board Size"}),a.jsx("option",{value:"appoint_member",children:"Appoint Board Member"}),a.jsx("option",{value:"ceo_salary_change",children:"Change CEO Salary"}),a.jsx("option",{value:"dividend_change",children:"Change Dividend Percentage"}),a.jsx("option",{value:"special_dividend",children:"Pay Special Dividend"}),a.jsx("option",{value:"stock_split",children:"Stock Split (2:1)"}),a.jsx("option",{value:"focus_change",children:"Change Corporate Focus"})]})]}),"ceo_nomination"===P&&(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"CEO Nominee (must be shareholder)"}),(0,a.jsxs)("select",{value:M,onChange:e=>Z(e.target.value?Number(e.target.value):""),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[a.jsx("option",{value:"",children:"Select nominee..."}),l.shareholders.map(e=>(0,a.jsxs)("option",{value:e.user_id,children:[e.player_name||e.username," (",e.shares.toLocaleString()," shares)"]},e.user_id))]})]}),"sector_change"===P&&(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"New Sector"}),(0,a.jsxs)("select",{value:O,onChange:e=>L(e.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[a.jsx("option",{value:"",children:"Select sector..."}),l.sectors.map(e=>a.jsx("option",{value:e,children:e},e))]})]}),"hq_change"===P&&(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"New HQ State"}),(0,a.jsxs)("select",{value:A,onChange:e=>F(e.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[a.jsx("option",{value:"",children:"Select state..."}),l.us_states.map(e=>a.jsx("option",{value:e,children:ea[e]||e},e))]})]}),"board_size"===P&&(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"New Board Size (3-7)"}),a.jsx("input",{type:"number",min:3,max:7,value:I,onChange:e=>R(Number(e.target.value)),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),"appoint_member"===P&&(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Appointee (must be shareholder)"}),(0,a.jsxs)("select",{value:q,onChange:e=>U(e.target.value?Number(e.target.value):""),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[a.jsx("option",{value:"",children:"Select appointee..."}),l.shareholders.filter(e=>!l.board_members.some(t=>t.user_id===e.user_id)).map(e=>(0,a.jsxs)("option",{value:e.user_id,children:[e.player_name||e.username," (",e.shares.toLocaleString()," shares)"]},e.user_id))]})]}),"ceo_salary_change"===P&&(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"New CEO Salary (per 96 hours)"}),(0,a.jsxs)("div",{className:"relative",children:[a.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 dark:text-gray-400",children:"$"}),a.jsx("input",{type:"number",min:0,max:1e7,step:1e3,value:es,onChange:e=>eo(Number(e.target.value)),className:"w-full pl-7 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Current salary: $",(l.corporation.ceo_salary||1e5).toLocaleString(),"/96h ($",((l.corporation.ceo_salary||1e5)/96).toLocaleString(void 0,{maximumFractionDigits:2}),"/hr)"]}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["New hourly rate: $",(es/96).toLocaleString(void 0,{maximumFractionDigits:2}),"/hr"]}),0===es&&a.jsx("p",{className:"text-xs text-amber-600 dark:text-amber-400 mt-1 font-semibold",children:"⚠️ Setting salary to $0 means CEO will not be paid"})]}),"dividend_change"===P&&(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"New Dividend Percentage (0-100%)"}),(0,a.jsxs)("div",{className:"relative",children:[a.jsx("input",{type:"number",min:0,max:100,step:.1,value:ei,onChange:e=>el(Number(e.target.value)),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),a.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 dark:text-gray-400",children:"%"})]}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Current: ",(l.corporation.dividend_percentage||0).toFixed(2),"% of total profit"]}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"This percentage of total profit will be paid as dividends hourly to shareholders"})]}),"special_dividend"===P&&(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Capital Percentage (0-100%)"}),(0,a.jsxs)("div",{className:"relative",children:[a.jsx("input",{type:"number",min:0,max:100,step:.1,value:ed,onChange:e=>en(Number(e.target.value)),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),a.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 dark:text-gray-400",children:"%"})]}),l.corporation.special_dividend_last_paid_at&&(0,a.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Last special dividend: $",(l.corporation.special_dividend_last_amount||0).toLocaleString()," paid"," ",(()=>{let e=new Date(l.corporation.special_dividend_last_paid_at),t=(new Date().getTime()-e.getTime())/36e5;if(t<96){let e=Math.ceil(96-t);return`${e} hours ago (${e}h cooldown remaining)`}return`${Math.floor(t/24)} days ago`})()]}),l.corporation.special_dividend_last_paid_at&&(()=>{let e=new Date(l.corporation.special_dividend_last_paid_at);return(new Date().getTime()-e.getTime())/36e5<96?a.jsx("p",{className:"text-xs text-amber-600 dark:text-amber-400 mt-1 font-semibold",children:"⚠️ Special dividend can only be paid once every 96 hours"}):null})(),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"This percentage of corporation capital will be paid as a one-time special dividend to all shareholders"})]}),"stock_split"===P&&(0,a.jsxs)("div",{className:"p-4 rounded-lg bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(G,{className:"w-5 h-5 text-amber-600 dark:text-amber-400"}),a.jsx("span",{className:"font-semibold text-amber-800 dark:text-amber-200",children:"2:1 Stock Split"})]}),a.jsx("p",{className:"text-sm text-amber-700 dark:text-amber-300",children:"This will double all outstanding shares and halve the share price. For example: 500,000 shares at $10 each becomes 1,000,000 shares at $5 each."}),a.jsx("p",{className:"text-xs text-amber-600 dark:text-amber-400 mt-2",children:"Total market capitalization remains unchanged."})]}),"focus_change"===P&&(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"New Corporate Focus"}),(0,a.jsxs)("select",{value:ec,onChange:e=>ex(e.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[a.jsx("option",{value:"diversified",children:"Diversified (All unit types)"}),a.jsx("option",{value:"production",children:"Production (Production + Extraction)"}),a.jsx("option",{value:"retail",children:"Retail (Retail only)"}),a.jsx("option",{value:"service",children:"Service (Service only)"}),a.jsx("option",{value:"extraction",children:"Extraction (Extraction only)"})]}),(0,a.jsxs)("div",{className:"mt-3 p-3 rounded-lg bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800",children:[a.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300 mb-2",children:a.jsx("strong",{children:"Focus determines what units the corporation can build:"})}),(0,a.jsxs)("ul",{className:"text-xs text-blue-600 dark:text-blue-400 space-y-1 ml-4 list-disc",children:[(0,a.jsxs)("li",{children:[a.jsx("strong",{children:"Diversified:"})," Retail, Production, Service, Extraction"]}),(0,a.jsxs)("li",{children:[a.jsx("strong",{children:"Production:"})," Production, Extraction"]}),(0,a.jsxs)("li",{children:[a.jsx("strong",{children:"Retail:"})," Retail only"]}),(0,a.jsxs)("li",{children:[a.jsx("strong",{children:"Service:"})," Service only"]}),(0,a.jsxs)("li",{children:[a.jsx("strong",{children:"Extraction:"})," Extraction only"]})]})]}),l?.corporation.focus&&(0,a.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:["Current focus: ",a.jsx("span",{className:"font-semibold capitalize",children:l.corporation.focus})]})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx("button",{type:"submit",disabled:k,className:"px-4 py-2 bg-corporate-blue text-white rounded-lg hover:bg-corporate-blue-dark disabled:opacity-50 transition-colors text-sm font-semibold",children:k?"Creating...":"Create Proposal"}),a.jsx("button",{type:"button",onClick:()=>{b(!1),eb()},className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors text-sm",children:"Cancel"})]})]})]}),0===ef.length?a.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center py-8",children:"No active proposals at this time."}):a.jsx("div",{className:"space-y-4",children:ef.map(e=>{let t=l.is_on_board&&!e.user_vote;return(0,a.jsxs)("div",{className:`p-4 rounded-xl border transition-all ${t?"border-corporate-blue/60 bg-corporate-blue/5 dark:bg-corporate-blue/10 ring-2 ring-corporate-blue/20":"border-gray-200/60 dark:border-gray-700/50 bg-white/50 dark:bg-gray-800/50"}`,children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-corporate-blue/10 flex items-center justify-center text-corporate-blue",children:ek(e.proposal_type)}),(0,a.jsxs)("div",{children:[a.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:ev(e)}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Proposed by ",e.proposer?.player_name||e.proposer?.username||"Unknown"]})]})]}),a.jsx("div",{className:"text-right",children:(0,a.jsxs)("div",{className:"text-xs font-semibold text-amber-600 dark:text-amber-400 flex items-center gap-1",children:[a.jsx(Y.Z,{className:"w-3 h-3"}),ey(e.expires_at)]})})]}),(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsxs)("div",{className:"flex justify-between text-xs mb-1",children:[(0,a.jsxs)("span",{className:"text-emerald-600 dark:text-emerald-400 font-semibold",children:["Aye: ",e.votes.aye]}),(0,a.jsxs)("span",{className:"text-red-600 dark:text-red-400 font-semibold",children:["Nay: ",e.votes.nay]})]}),a.jsx("div",{className:"h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:e.votes.total>0&&a.jsx("div",{className:"h-full bg-emerald-500 transition-all",style:{width:`${e.votes.aye/e.votes.total*100}%`}})})]}),e.voter_details&&a.jsx("div",{className:"mb-3 p-3 rounded-lg bg-gray-50 dark:bg-gray-800/50 border border-gray-200/50 dark:border-gray-700/50",children:(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"font-semibold text-emerald-600 dark:text-emerald-400 mb-1",children:["Aye (",e.voter_details.aye.length,")"]}),e.voter_details.aye.length>0?a.jsx("ul",{className:"space-y-1",children:e.voter_details.aye.map(e=>a.jsx("li",{className:"text-gray-700 dark:text-gray-300",children:a.jsx(i.default,{href:`/profile/${e.profile_id}`,className:"hover:text-corporate-blue dark:hover:text-corporate-blue-light transition-colors",children:e.player_name||e.username})},e.user_id))}):a.jsx("p",{className:"text-gray-400 dark:text-gray-500 italic",children:"None"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"font-semibold text-red-600 dark:text-red-400 mb-1",children:["Nay (",e.voter_details.nay.length,")"]}),e.voter_details.nay.length>0?a.jsx("ul",{className:"space-y-1",children:e.voter_details.nay.map(e=>a.jsx("li",{className:"text-gray-700 dark:text-gray-300",children:a.jsx(i.default,{href:`/profile/${e.profile_id}`,className:"hover:text-corporate-blue dark:hover:text-corporate-blue-light transition-colors",children:e.player_name||e.username})},e.user_id))}):a.jsx("p",{className:"text-gray-400 dark:text-gray-500 italic",children:"None"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"font-semibold text-gray-500 dark:text-gray-400 mb-1",children:["Not Voted (",e.voter_details.abstained.length,")"]}),e.voter_details.abstained.length>0?a.jsx("ul",{className:"space-y-1",children:e.voter_details.abstained.map(e=>a.jsx("li",{className:"text-gray-700 dark:text-gray-300",children:a.jsx(i.default,{href:`/profile/${e.profile_id}`,className:"hover:text-corporate-blue dark:hover:text-corporate-blue-light transition-colors",children:e.player_name||e.username})},e.user_id))}):a.jsx("p",{className:"text-gray-400 dark:text-gray-500 italic",children:"All voted"})]})]})}),l.is_on_board&&a.jsx("div",{className:"flex gap-2",children:e.user_vote?(0,a.jsxs)("div",{className:`w-full px-4 py-2 rounded-lg text-sm font-semibold flex items-center gap-2 ${"aye"===e.user_vote?"bg-emerald-100 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-300":"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300"}`,children:["aye"===e.user_vote?a.jsx(Q,{className:"w-4 h-4"}):a.jsx(X,{className:"w-4 h-4"}),"You voted: ",e.user_vote.toUpperCase()]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("button",{onClick:()=>eh(e.id,"aye"),disabled:N===e.id,className:"flex-1 px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 disabled:opacity-50 transition-colors flex items-center justify-center gap-2 text-sm font-semibold",children:[a.jsx(Q,{className:"w-4 h-4"}),"Vote Aye"]}),(0,a.jsxs)("button",{onClick:()=>eh(e.id,"nay"),disabled:N===e.id,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 transition-colors flex items-center justify-center gap-2 text-sm font-semibold",children:[a.jsx(X,{className:"w-4 h-4"}),"Vote Nay"]})]})})]},e.id)})})]})]}),(0,a.jsxs)("div",{className:"relative rounded-2xl border border-gray-200/50 dark:border-gray-700/50 bg-gradient-to-br from-white via-white to-gray-50/50 dark:from-gray-900 dark:via-gray-900 dark:to-gray-800/50 shadow-2xl overflow-hidden backdrop-blur-sm",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-corporate-blue/5 via-transparent to-corporate-blue-light/5 dark:from-corporate-blue/10 dark:via-transparent dark:to-corporate-blue-dark/10 pointer-events-none"}),a.jsx("div",{className:"absolute inset-0 ring-1 ring-inset ring-white/20 dark:ring-gray-700/30 pointer-events-none"}),(0,a.jsxs)("div",{className:"relative p-6",children:[(0,a.jsxs)("button",{onClick:()=>v(!y),className:"w-full flex items-center justify-between text-xl font-bold text-gray-900 dark:text-white",children:[(0,a.jsxs)("span",{className:"flex items-center gap-2",children:[a.jsx(J,{className:"w-5 h-5 text-corporate-blue"}),"Vote History",(0,a.jsxs)("span",{className:"text-sm font-normal text-gray-500 dark:text-gray-400",children:["(",ej.length,")"]})]}),y?a.jsx(ee.Z,{className:"w-5 h-5"}):a.jsx(et.Z,{className:"w-5 h-5"})]}),y&&a.jsx("div",{className:"mt-4 space-y-3",children:0===ej.length?a.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center py-4",children:"No past proposals."}):ej.map(e=>(0,a.jsxs)("div",{className:`p-3 rounded-lg border ${"passed"===e.status?"border-emerald-200 dark:border-emerald-800/50 bg-emerald-50/50 dark:bg-emerald-900/20":"border-red-200 dark:border-red-800/50 bg-red-50/50 dark:bg-red-900/20"}`,children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:["passed"===e.status?a.jsx(J,{className:"w-4 h-4 text-emerald-600 dark:text-emerald-400"}):a.jsx(er,{className:"w-4 h-4 text-red-600 dark:text-red-400"}),a.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:ev(e)})]}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[e.votes.aye," - ",e.votes.nay]})]}),a.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:e.resolved_at?new Date(e.resolved_at).toLocaleDateString():new Date(e.created_at).toLocaleDateString()})]},e.id))})]})]})]})}var eo=r(33928),ei=r(65830),el=r(94409),ed=r(10692),en=r(62352),ec=r(64512),ex=r(51840),em=r(1086),eg=r(4964),eh=r(65295);let ep=[{label:"24H",value:"24h",hours:24},{label:"48H",value:"48h",hours:48},{label:"4D",value:"96h",hours:96},{label:"7D",value:"7d",hours:168},{label:"30D",value:"30d",hours:720}],eu=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(e),eb=e=>`${e>=0?"+":""}${e.toFixed(2)}%`;function ey({corporationId:e,currentPrice:t}){let[r,o]=(0,s.useState)("96h"),[i,l]=(0,s.useState)(!0),[d,n]=(0,s.useState)(null),[c,x]=(0,s.useState)([]),m=ep.find(e=>e.value===r),g=(0,s.useMemo)(()=>{if(0===c.length){let e=Date.now();return[{time:"Start",price:t,timestamp:e-36e5*m.hours,capital:0},{time:"Now",price:t,timestamp:e,capital:0}]}return[...c].sort((e,t)=>new Date(e.recorded_at).getTime()-new Date(t.recorded_at).getTime()).map(e=>{let t=new Date(e.recorded_at),r=m.hours;return{time:r<=48?t.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}):r<=168?t.toLocaleDateString("en-US",{weekday:"short",hour:"numeric",hour12:!0}):t.toLocaleDateString("en-US",{month:"short",day:"numeric"}),price:"string"==typeof e.share_price?parseFloat(e.share_price):e.share_price,timestamp:t.getTime(),capital:"string"==typeof e.capital?parseFloat(e.capital):e.capital}})},[c,t,m.hours]),h=(0,s.useMemo)(()=>{if(g.length<2)return{startPrice:t,endPrice:t,change:0,changePercent:0,high:t,low:t,isPositive:!0};let e=g.map(e=>e.price),r=e[0],a=e[e.length-1],s=a-r;return{startPrice:r,endPrice:a,change:s,changePercent:(a-r)/r*100,high:Math.max(...e),low:Math.min(...e),isPositive:s>=0}},[g,t]),p=(0,s.useMemo)(()=>{if(0===g.length)return[.9*t,1.1*t];let e=g.map(e=>e.price),r=Math.min(...e),a=Math.max(...e),s=(a-r)*.1||.05*a;return[Math.max(0,r-s),a+s]},[g,t]),u=`priceGradient-${e}`,b=h.isPositive?"#10b981":"#ef4444",y=h.isPositive?"#10b981":"#ef4444",v=h.isPositive?"rgba(16, 185, 129, 0.05)":"rgba(239, 68, 68, 0.05)";return(0,a.jsxs)("div",{className:"relative rounded-2xl border border-gray-200/50 dark:border-gray-700/50 bg-gradient-to-br from-white via-white to-gray-50/50 dark:from-gray-900 dark:via-gray-900 dark:to-gray-800/50 shadow-2xl overflow-hidden backdrop-blur-sm",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-corporate-blue/5 via-transparent to-corporate-blue-light/5 dark:from-corporate-blue/10 dark:via-transparent dark:to-corporate-blue-dark/10 pointer-events-none"}),a.jsx("div",{className:"absolute inset-0 ring-1 ring-inset ring-white/20 dark:ring-gray-700/30 pointer-events-none"}),(0,a.jsxs)("div",{className:"relative p-6",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`p-2 rounded-lg ${h.isPositive?"bg-emerald-100 dark:bg-emerald-900/30":"bg-red-100 dark:bg-red-900/30"}`,children:h.isPositive?a.jsx(L.Z,{className:"w-5 h-5 text-emerald-600 dark:text-emerald-400"}):a.jsx(eg.Z,{className:"w-5 h-5 text-red-600 dark:text-red-400"})}),(0,a.jsxs)("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Stock Price"}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-0.5",children:[a.jsx("span",{className:"text-2xl font-bold font-mono text-gray-900 dark:text-white",children:eu(t)}),a.jsx("span",{className:`text-sm font-semibold ${h.isPositive?"text-emerald-600 dark:text-emerald-400":"text-red-600 dark:text-red-400"}`,children:eb(h.changePercent)})]})]})]}),a.jsx("div",{className:"flex items-center gap-1 p-1 bg-gray-100 dark:bg-gray-800 rounded-lg",children:ep.map(e=>a.jsx("button",{onClick:()=>o(e.value),className:`px-3 py-1.5 text-xs font-semibold rounded-md transition-all duration-200 ${r===e.value?"bg-white dark:bg-gray-700 text-corporate-blue dark:text-corporate-blue-light shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:e.label},e.value))})]}),(0,a.jsxs)("div",{className:"grid grid-cols-4 gap-3 mb-6",children:[(0,a.jsxs)("div",{className:"text-center p-2 rounded-lg bg-gray-50 dark:bg-gray-800/50",children:[a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Open"}),a.jsx("p",{className:"text-sm font-bold text-gray-900 dark:text-white font-mono",children:eu(h.startPrice)})]}),(0,a.jsxs)("div",{className:"text-center p-2 rounded-lg bg-gray-50 dark:bg-gray-800/50",children:[a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"High"}),a.jsx("p",{className:"text-sm font-bold text-emerald-600 dark:text-emerald-400 font-mono",children:eu(h.high)})]}),(0,a.jsxs)("div",{className:"text-center p-2 rounded-lg bg-gray-50 dark:bg-gray-800/50",children:[a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Low"}),a.jsx("p",{className:"text-sm font-bold text-red-600 dark:text-red-400 font-mono",children:eu(h.low)})]}),(0,a.jsxs)("div",{className:"text-center p-2 rounded-lg bg-gray-50 dark:bg-gray-800/50",children:[a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Change"}),(0,a.jsxs)("p",{className:`text-sm font-bold font-mono ${h.isPositive?"text-emerald-600 dark:text-emerald-400":"text-red-600 dark:text-red-400"}`,children:[h.change>=0?"+":"",eu(h.change)]})]})]}),a.jsx("div",{className:"h-64 sm:h-80",children:i?a.jsx("div",{className:"flex items-center justify-center h-full",children:(0,a.jsxs)("div",{className:"flex items-center gap-2 text-gray-500 dark:text-gray-400",children:[a.jsx(eh.Z,{className:"w-5 h-5 animate-pulse"}),a.jsx("span",{children:"Loading chart data..."})]})}):d?a.jsx("div",{className:"flex items-center justify-center h-full",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("p",{className:"text-red-500 dark:text-red-400",children:d}),a.jsx("button",{onClick:()=>o(r),className:"mt-2 text-sm text-corporate-blue hover:underline",children:"Retry"})]})}):a.jsx(eo.h,{width:"100%",height:"100%",children:(0,a.jsxs)(ei.T,{data:g,margin:{top:10,right:10,left:0,bottom:0},children:[a.jsx("defs",{children:(0,a.jsxs)("linearGradient",{id:u,x1:"0",y1:"0",x2:"0",y2:"1",children:[a.jsx("stop",{offset:"0%",stopColor:y,stopOpacity:.3}),a.jsx("stop",{offset:"100%",stopColor:v,stopOpacity:0})]})}),a.jsx(el.q,{strokeDasharray:"3 3",stroke:"rgba(156, 163, 175, 0.2)",vertical:!1}),a.jsx(ed.K,{dataKey:"time",axisLine:!1,tickLine:!1,tick:{fontSize:11,fill:"#9ca3af"},interval:"preserveStartEnd",minTickGap:30}),a.jsx(en.B,{domain:p,axisLine:!1,tickLine:!1,tick:{fontSize:11,fill:"#9ca3af"},tickFormatter:e=>`$${e.toFixed(2)}`,width:60}),a.jsx(ec.u,{content:a.jsx(({active:e,payload:t,label:r})=>{if(e&&t&&t.length){let e=t[0].payload;return(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl border border-gray-200 dark:border-gray-700 p-3",children:[a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:e.time}),a.jsx("p",{className:"text-lg font-bold text-gray-900 dark:text-white font-mono",children:eu(e.price)}),e.capital>0&&(0,a.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Capital: ",eu(e.capital)]})]})}return null},{})}),a.jsx(ex.db,{y:h.startPrice,stroke:"rgba(156, 163, 175, 0.5)",strokeDasharray:"5 5"}),a.jsx(em.uN,{type:"monotone",dataKey:"price",stroke:b,strokeWidth:2,fill:`url(#${u})`,animationDuration:750})]})})}),(0,a.jsxs)("div",{className:"mt-4 flex items-center justify-between text-xs text-gray-500 dark:text-gray-400",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[a.jsx(Y.Z,{className:"w-3.5 h-3.5"}),(0,a.jsxs)("span",{children:["Last ",m.label.toLowerCase()]})]}),a.jsx("div",{children:g.length>0&&c.length>0&&(0,a.jsxs)("span",{children:[c.length," data points"]})})]})]})]})}var ev=r(4393);let ek=e=>isFinite(e)&&e>0?e:0,ef={retail:200,service:150};var ej=r(80943);let eN={Technology:"Rare Earth",Finance:null,Healthcare:null,"Light Industry":null,Manufacturing:null,Energy:null,Retail:null,"Real Estate":null,Transportation:null,Media:null,Telecommunications:"Copper",Agriculture:"Fertile Land",Defense:null,Hospitality:null,Construction:null,Pharmaceuticals:"Chemical Compounds",Mining:null,"Heavy Industry":null},ew={Technology:"Technology Products",Finance:null,Healthcare:null,"Light Industry":"Manufactured Goods",Manufacturing:"Manufactured Goods",Energy:"Electricity",Retail:null,"Real Estate":null,Transportation:"Logistics Capacity",Media:null,Telecommunications:null,Agriculture:"Food Products",Defense:"Defense Equipment",Hospitality:null,Construction:"Construction Capacity",Pharmaceuticals:"Pharmaceutical Products",Mining:null,"Heavy Industry":"Steel"},e_={Technology:null,Finance:["Technology Products"],Healthcare:["Pharmaceutical Products"],"Light Industry":["Steel"],Manufacturing:["Steel"],Energy:null,Retail:["Manufactured Goods"],"Real Estate":["Construction Capacity"],Transportation:["Steel"],Media:["Technology Products"],Telecommunications:["Technology Products"],Agriculture:null,Defense:["Steel"],Hospitality:["Food Products"],Construction:["Steel"],Pharmaceuticals:null,Mining:null,"Heavy Industry":null},eS={retail:200,service:150},eC={Oil:a.jsx(c.Z,{className:"w-4 h-4"}),"Iron Ore":a.jsx(x.Z,{className:"w-4 h-4"}),"Rare Earth":a.jsx(m.Z,{className:"w-4 h-4"}),Copper:a.jsx(g.Z,{className:"w-4 h-4"}),"Fertile Land":a.jsx(h.Z,{className:"w-4 h-4"}),Lumber:a.jsx(p.Z,{className:"w-4 h-4"}),"Chemical Compounds":a.jsx(u.Z,{className:"w-4 h-4"}),Coal:a.jsx(b.Z,{className:"w-4 h-4"})},eP={Oil:"text-slate-700 dark:text-slate-300 bg-slate-100 dark:bg-slate-800","Iron Ore":"text-red-700 dark:text-red-300 bg-red-100 dark:bg-red-800","Rare Earth":"text-violet-700 dark:text-violet-300 bg-violet-100 dark:bg-violet-800",Copper:"text-orange-700 dark:text-orange-300 bg-orange-100 dark:bg-orange-800","Fertile Land":"text-lime-700 dark:text-lime-300 bg-lime-100 dark:bg-lime-800",Lumber:"text-amber-700 dark:text-amber-300 bg-amber-100 dark:bg-amber-800","Chemical Compounds":"text-cyan-700 dark:text-cyan-300 bg-cyan-100 dark:bg-cyan-800",Coal:"text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-800"},eE={"Technology Products":a.jsx(m.Z,{className:"w-4 h-4"}),"Manufactured Goods":a.jsx(y.Z,{className:"w-4 h-4"}),Electricity:a.jsx(v.Z,{className:"w-4 h-4"}),"Food Products":a.jsx(k.Z,{className:"w-4 h-4"}),"Construction Capacity":a.jsx(f.Z,{className:"w-4 h-4"}),"Pharmaceutical Products":a.jsx(j.Z,{className:"w-4 h-4"}),"Defense Equipment":a.jsx(N.Z,{className:"w-4 h-4"}),"Logistics Capacity":a.jsx(w.Z,{className:"w-4 h-4"}),Steel:a.jsx(_.Z,{className:"w-4 h-4"})},eM={"Technology Products":"text-indigo-700 dark:text-indigo-300 bg-indigo-100 dark:bg-indigo-900/50","Manufactured Goods":"text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-800",Electricity:"text-yellow-700 dark:text-yellow-300 bg-yellow-100 dark:bg-yellow-900/50","Food Products":"text-green-700 dark:text-green-300 bg-green-100 dark:bg-green-900/50","Construction Capacity":"text-stone-700 dark:text-stone-300 bg-stone-100 dark:bg-stone-800","Pharmaceutical Products":"text-rose-700 dark:text-rose-300 bg-rose-100 dark:bg-rose-900/50","Defense Equipment":"text-red-700 dark:text-red-300 bg-red-100 dark:bg-red-900/50","Logistics Capacity":"text-blue-700 dark:text-blue-300 bg-blue-100 dark:bg-blue-900/50",Steel:"text-zinc-700 dark:text-zinc-300 bg-zinc-100 dark:bg-zinc-800"},eZ={retail:{baseRevenue:500,baseCost:300},production:{baseRevenue:800,baseCost:600},service:{baseRevenue:400,baseCost:200},extraction:{baseRevenue:400,baseCost:700}},e$={Technology:null,Finance:null,Healthcare:null,"Light Industry":null,Manufacturing:null,Energy:["Oil"],Retail:null,"Real Estate":null,Transportation:null,Media:null,Telecommunications:null,Agriculture:["Fertile Land","Lumber"],Defense:null,Hospitality:null,Construction:["Lumber"],Pharmaceuticals:["Chemical Compounds"],Mining:["Iron Ore","Coal","Copper","Rare Earth"],"Heavy Industry":null},eO=e=>{let t=e$[e];return null!==t&&t.length>0},eT={"Technology Products":5e3,"Manufactured Goods":1500,Electricity:200,"Food Products":500,"Construction Capacity":2500,"Pharmaceutical Products":8e3,"Defense Equipment":15e3,"Logistics Capacity":1e3,Steel:850},eD={AL:"Alabama",AK:"Alaska",AZ:"Arizona",AR:"Arkansas",CA:"California",CO:"Colorado",CT:"Connecticut",DE:"Delaware",FL:"Florida",GA:"Georgia",HI:"Hawaii",ID:"Idaho",IL:"Illinois",IN:"Indiana",IA:"Iowa",KS:"Kansas",KY:"Kentucky",LA:"Louisiana",ME:"Maine",MD:"Maryland",MA:"Massachusetts",MI:"Michigan",MN:"Minnesota",MS:"Mississippi",MO:"Missouri",MT:"Montana",NE:"Nebraska",NV:"Nevada",NH:"New Hampshire",NJ:"New Jersey",NM:"New Mexico",NY:"New York",NC:"North Carolina",ND:"North Dakota",OH:"Ohio",OK:"Oklahoma",OR:"Oregon",PA:"Pennsylvania",RI:"Rhode Island",SC:"South Carolina",SD:"South Dakota",TN:"Tennessee",TX:"Texas",UT:"Utah",VT:"Vermont",VA:"Virginia",WA:"Washington",WV:"West Virginia",WI:"Wisconsin",WY:"Wyoming"};function eL(){let e=(0,o.useRouter)(),t=parseInt((0,o.useParams)().id,10),{config:r}=(0,ej.ZV)(),[m,g]=(0,s.useState)(null),[h,p]=(0,s.useState)(null),[u,y]=(0,s.useState)(!0),[v,k]=(0,s.useState)(""),[j,N]=(0,s.useState)(!1),[w,C]=(0,s.useState)(""),[z,H]=(0,s.useState)(""),[V,B]=(0,s.useState)(""),[W,G]=(0,s.useState)(!1),[K,Y]=(0,s.useState)(0),[Q,X]=(0,s.useState)("overview"),[J,ee]=(0,s.useState)(null),[et,er]=(0,s.useState)(null),[ea,eo]=(0,s.useState)(null),[ei,el]=(0,s.useState)(null),[ed,en]=(0,s.useState)([]),[ec,ex]=(0,s.useState)({}),[em,eg]=(0,s.useState)({}),[eh,ep]=(0,s.useState)(null),[eu,eb]=(0,s.useState)(null),eL=e=>{let t=eh?.sector_unit_flows?.[e]?.production;if(t)return t;let r=eN[e]||null,a=ew[e]||null,s=e_[e]||null,o={};return o.Electricity=.5,s&&s.forEach(e=>{o[e]=.5}),{inputs:{resources:r?{[r]:.5}:{},products:o},outputs:{resources:{},products:a?{[a]:1}:{}}}},eA=e=>{let t=ew[e],r=eL(e),a=eZ.production.baseRevenue,s=eZ.production.baseCost;if(t){let e=r?.outputs.products?.[t]??1;a=(em[t]?.currentPrice??eT[t]??eZ.production.baseRevenue)*e,s=400,Object.entries(r?.inputs.resources||{}).forEach(([e,t])=>{let r=ec[e]?.currentPrice??0;s+=t*r}),Object.entries(r?.inputs.products||{Electricity:.5}).forEach(([e,r])=>{let a=em[e]?.currentPrice??eT[e]??0;s+=r*a*("Electricity"===t&&"Electricity"===e?.1:1)})}return{unitRevenuePerHour:a,unitCostPerHour:s,productionFlow:r}},eF=(e,t)=>{let r=eS[t],a=e_[e]||[],s=0,o=0;for(let r of a){let a=em[r]?.currentPrice??eT[r]??0,i="retail"===t?2:"Electricity"===r?.5:1.5;"Defense"===e&&("retail"===t||"Electricity"!==r)&&(i=1);let l="retail"===t?.995:"Electricity"===r?1:.995;"Defense"===e&&("retail"===t||"Electricity"!==r)&&(l=.8);let d=a*i*l;s+=d,"Defense"===e&&("retail"===t||"Electricity"!==r)?o+=1*d:o+=a*i}return{unitRevenuePerHour:Math.max(o,s*(1+("retail"===t?.05:.1))),unitCostPerHour:r+s}},eI=async()=>{if(confirm("Are you sure you want to delete this corporation? This action cannot be undone.")){N(!0);try{await d.y7.delete(t),e.push("/stock-market")}catch(e){console.error("Failed to delete corporation:",e),alert(e.response?.data?.error||"Failed to delete corporation"),N(!1)}}},eR=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(e),eq=(0,s.useMemo)(()=>{if(ea)return{revenue:ea.display_revenue,variableCosts:ea.display_costs,fixedCosts:ea.ceo_salary_96h,operatingIncome:ea.operating_income_96h,dividends:ea.dividend_payout_96h,retainedEarnings:ea.net_income_96h,netIncome:ea.net_income_96h,sectors:[],periodHours:96,errors:[]};let e=ed.map(e=>({sector_type:e.sector_type,retail_count:e.retail_count,production_count:e.production_count,service_count:e.service_count,extraction_count:e.extraction_count||0}));return function(e){let t=[],r=e.periodHours&&e.periodHours>0?Math.floor(e.periodHours):96,a=e.unitEconomics,s=e.sectorUnitFlows||{},o=e.commodityPrices||{},i=e.productPrices||{},l=e.fixedCosts||{},d=[];e.entries.forEach((e,n)=>{let c=e.sector_type;c&&s[c]||t.push(`missing_flow_${c||n}`);let x={retail:ek(e.retail_count||0),production:ek(e.production_count||0),service:ek(e.service_count||0),extraction:ek(e.extraction_count||0)},m=s[c]||{retail:{inputs:{resources:{},products:{}},outputs:{resources:{},products:{}}},production:{inputs:{resources:{},products:{}},outputs:{resources:{},products:{}}},service:{inputs:{resources:{},products:{}},outputs:{resources:{},products:{}}},extraction:{inputs:{resources:{},products:{}},outputs:{resources:{},products:{}}}},g=0,h=0,p={retail:{revenue:0,cost:0,units:x.retail||0,producedUnits:0,demandedUnits:0},production:{revenue:0,cost:0,units:x.production||0,producedUnits:0,demandedUnits:0},service:{revenue:0,cost:0,units:x.service||0,producedUnits:0,demandedUnits:0},extraction:{revenue:0,cost:0,units:x.extraction||0,producedUnits:0,demandedUnits:0}};if((x.retail||0)>0){let e=m.retail,t=ef.retail,a=0,s=0;Object.keys(e.inputs.products||{}).forEach(e=>{let t=i[e]?.currentPrice||0,r=2;"Defense"===c&&(r=1);let o=.995;"Defense"===c&&(o=.8);let l=t*r*o;a+=l,"Defense"===c?s+=1*l:s+=t*r});let o=Math.max(s,1.1*a),l=t+a,d=o*r*(x.retail||0),n=l*r*(x.retail||0);g+=d,h+=n,p.retail.revenue+=d,p.retail.cost+=n,p.retail.demandedUnits=Math.round(Object.values(e.inputs.products||{}).reduce((e,t)=>e+t,0)*(x.retail||0)*r)}if((x.production||0)>0){let e=m.production,t=a.production.baseRevenue,s=a.production.baseCost,l=Object.keys(e.outputs.products||{})[0]||null;if(l){let r=e.outputs.products[l]||0;t=(i[l]?.currentPrice||0)*r,s=0,Object.entries(e.inputs.resources||{}).forEach(([e,t])=>{let r=o[e]?.currentPrice||0;s+=t*r}),Object.entries(e.inputs.products||{}).forEach(([e,t])=>{let r=i[e]?.currentPrice||0;s+=t*r})}let d=t*r*(x.production||0),n=s*r*(x.production||0);g+=d,h+=n,p.production.revenue+=d,p.production.cost+=n,p.production.producedUnits=Math.round((e.outputs.products&&l&&e.outputs.products[l]||0)*(x.production||0)*r),p.production.demandedUnits=Math.round(Object.values(e.inputs.products||{}).reduce((e,t)=>e+t,0)*(x.production||0)*r)}if((x.service||0)>0){let e=m.service,t=ef.service,a=0,s=0;Object.keys(e.inputs.products||{}).forEach(e=>{let t=i[e]?.currentPrice||0,r="Electricity"===e?.5:1.5;"Defense"===c&&"Electricity"!==e&&(r=1);let o="Electricity"===e?1:.995;"Defense"===c&&"Electricity"!==e&&(o=.8);let l=t*r*o;a+=l,"Defense"===c&&"Electricity"!==e?s+=1*l:s+=t*r});let o=Math.max(s,1.1*a),l=t+a,d=o*r*(x.service||0),n=l*r*(x.service||0);g+=d,h+=n,p.service.revenue+=d,p.service.cost+=n,p.service.demandedUnits=Math.round(Object.values(e.inputs.products||{}).reduce((e,t)=>e+t,0)*(x.service||0)*r)}if((x.extraction||0)>0){let e=m.extraction,t=Object.keys(e.outputs.resources||{})[0]||null,s=a.extraction.baseRevenue,i=a.extraction.baseCost;if(t){let r=e.outputs.resources[t]||0;s=(o[t]?.currentPrice||0)*r}let l=s*r*(x.extraction||0),d=i*r*(x.extraction||0);g+=l,h+=d,p.extraction.revenue+=l,p.extraction.cost+=d,p.extraction.producedUnits=Math.round((e.outputs.resources&&t&&e.outputs.resources[t]||0)*(x.extraction||0)*r),p.extraction.demandedUnits=0}let u=ek(l.perPeriod||0),b=g-(h+u);d.push({sector:c,revenue:g,variableCosts:h,fixedCosts:u,netIncome:b,unitBreakdown:p})});let n=d.reduce((e,t)=>e+t.revenue,0),c=d.reduce((e,t)=>e+t.variableCosts,0),x=ek((l.ceoSalary||0)+(l.overhead||0)),m=d.reduce((e,t)=>e+t.fixedCosts,0)+x,g=n-(c+m),h=ek(e.dividendPercentage||0),p=g>0?h/100*g:0,u=g-p;return{revenue:n,variableCosts:c,fixedCosts:m,operatingIncome:g,dividends:p,retainedEarnings:u,netIncome:u,sectors:d,periodHours:r,errors:t}}({entries:e,sectorUnitFlows:eh?.sector_unit_flows||{},commodityPrices:Object.fromEntries(Object.entries(ec).map(([e,t])=>[e,{currentPrice:t.currentPrice}])),productPrices:Object.fromEntries(Object.entries(em).map(([e,t])=>[e,{currentPrice:t.currentPrice}])),unitEconomics:eZ,periodHours:96,fixedCosts:{ceoSalary:m?.ceo_salary||0},dividendPercentage:m?.dividend_percentage||0})},[ea,ed,eh,ec,em,m]),eU=(0,s.useMemo)(()=>{if(!r)return;let e={};for(let[t,a]of Object.entries(r.products))e[t]=a.referenceValue;return e},[r]),ez=async()=>{if(!m||!w)return;let e=parseInt(w,10);if(isNaN(e)||e<=0){alert("Please enter a valid number of shares");return}if(e>m.public_shares){alert(`Only ${m.public_shares.toLocaleString()} public shares available`);return}G(!0);try{let t=await d.w_.buy(m.id,e);alert(`Successfully purchased ${e.toLocaleString()} shares at ${eR(t.price_per_share)} each. Total: ${eR(t.total_cost)}`);let r=await d.y7.getById(m.id);g(r);let a=r.shareholders?.find(e=>e.user_id===h);Y(a?.shares||0),C("")}catch(e){alert(e.response?.data?.error||"Failed to buy shares")}finally{G(!1)}},eH=async()=>{if(!m||!z)return;let e=parseInt(z,10);if(isNaN(e)||e<=0){alert("Please enter a valid number of shares");return}if(e>K){alert(`You only own ${K.toLocaleString()} shares`);return}G(!0);try{let t=await d.w_.sell(m.id,e);alert(`Successfully sold ${e.toLocaleString()} shares at ${eR(t.price_per_share)} each. Total: ${eR(t.total_revenue)}`);let r=await d.y7.getById(m.id);g(r);let a=r.shareholders?.find(e=>e.user_id===h);Y(a?.shares||0),H("")}catch(e){alert(e.response?.data?.error||"Failed to sell shares")}finally{G(!1)}},eV=async()=>{if(!m||!V)return;let e=parseInt(V,10);if(isNaN(e)||e<=0){alert("Please enter a valid number of shares");return}let t=Math.floor(.1*m.shares);if(e>t){alert(`Cannot issue more than ${t.toLocaleString()} shares (10% of ${m.shares.toLocaleString()} outstanding)`);return}G(!0);try{let t=await d.w_.issue(m.id,e);alert(`Successfully issued ${e.toLocaleString()} shares at ${eR(t.price_per_share)} each. Capital raised: ${eR(t.total_capital_raised)}`);let r=await d.y7.getById(m.id);g(r),B("")}catch(e){alert(e.response?.data?.error||"Failed to issue shares")}finally{G(!1)}},eB=async(e,r,a)=>{if(m&&confirm(`Are you sure you want to abandon 1 ${r} unit in ${a}? This action cannot be undone.`)){ee(`${e}-${r}`);try{await d.QT.abandonUnit(e,r);let[a,s]=await Promise.all([d.y7.getById(t),d.QT.getCorporationFinances(t).catch(()=>null)]);g(a),s&&(eo(s.finances),el(s.balance_sheet||null),en(s.market_entries||[]))}catch(e){alert(e.response?.data?.error||"Failed to abandon unit")}finally{ee(null)}}},eW=async(e,r)=>{if(m){er(`${e}-${r}`);try{await d.QT.buildUnit(e,r);let[a,s]=await Promise.all([d.y7.getById(t),d.QT.getCorporationFinances(t).catch(()=>null)]);g(a),s&&(eo(s.finances),el(s.balance_sheet||null),en(s.market_entries||[]))}catch(e){alert(e.response?.data?.error||"Failed to build unit")}finally{er(null)}}};if(u)return a.jsx(l.Z,{children:a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-gray-100 dark:from-gray-950 dark:via-gray-900 dark:to-gray-950 flex items-center justify-center",children:a.jsx("div",{className:"text-lg text-gray-600 dark:text-gray-200",children:"Loading corporation..."})})});if(v||!m)return a.jsx(l.Z,{children:a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-gray-100 dark:from-gray-950 dark:via-gray-900 dark:to-gray-950 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("p",{className:"text-xl text-red-600 dark:text-red-400 mb-4",children:v||"Corporation not found"}),a.jsx(i.default,{href:"/stock-market",className:"text-corporate-blue hover:underline",children:"Return to Stock Market"})]})})});let eG=h===m.ceo_id,eK=(m.shareholders?.reduce((e,t)=>e+t.shares,0)||0)+m.public_shares,eY=eK>0?eK:m.shares,eQ=Math.abs(m.shares-eK)>1&&eK>0,eX=eY*m.share_price,eJ=m.public_shares/eY*100;return a.jsx(l.Z,{children:(0,a.jsxs)("div",{className:"relative mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-10 space-y-6",children:[(0,a.jsxs)("div",{className:"relative rounded-2xl border border-gray-200/50 dark:border-gray-700/50 bg-gradient-to-br from-white via-white to-gray-50/50 dark:from-gray-900 dark:via-gray-900 dark:to-gray-800/50 shadow-2xl overflow-hidden backdrop-blur-sm",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-corporate-blue/5 via-transparent to-corporate-blue-light/5 dark:from-corporate-blue/10 dark:via-transparent dark:to-corporate-blue-dark/10 pointer-events-none"}),a.jsx("div",{className:"absolute inset-0 ring-1 ring-inset ring-white/20 dark:ring-gray-700/30 pointer-events-none"}),a.jsx("div",{className:"relative p-6",children:(0,a.jsxs)("div",{className:"flex items-start gap-6",children:[(0,a.jsxs)("div",{className:"flex-shrink-0 relative",children:[a.jsx("div",{className:"absolute -inset-1 bg-gradient-to-br from-corporate-blue/30 to-corporate-blue-light/40 rounded-xl blur-xl opacity-50"}),m.logo?(0,a.jsxs)(a.Fragment,{children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-corporate-blue/20 to-corporate-blue-light/30 rounded-xl blur-sm opacity-0 hover:opacity-100 transition-opacity"}),a.jsx("img",{src:m.logo,alt:m.name,className:"relative w-24 h-24 rounded-xl object-cover ring-2 ring-gray-200/50 dark:ring-gray-700/50 shadow-lg",onError:e=>{e.currentTarget.src="/defaultpfp.jpg"}})]}):a.jsx("div",{className:"relative w-24 h-24 rounded-xl bg-gradient-to-br from-gray-200 to-gray-300 dark:from-gray-700 dark:to-gray-800 flex items-center justify-center ring-2 ring-gray-200/50 dark:ring-gray-700/50 shadow-lg",children:a.jsx(f.Z,{className:"w-12 h-12 text-gray-400 dark:text-gray-500"})})]}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-2",children:a.jsx(i.default,{href:`/corporation/${m.id}`,className:"hover:text-corporate-blue dark:hover:text-corporate-blue-light transition-colors",children:m.name})}),m.type&&a.jsx("span",{className:"inline-block px-3 py-1 text-xs font-bold uppercase tracking-[0.1em] bg-corporate-blue/10 dark:bg-corporate-blue/20 text-corporate-blue dark:text-corporate-blue-light rounded-lg mb-2",children:m.type})]}),eG&&(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("button",{onClick:()=>e.push("/states"),className:"px-4 py-2 bg-corporate-blue text-white rounded-lg hover:bg-corporate-blue-dark transition-colors flex items-center gap-2 shadow-sm hover:shadow-md",children:[a.jsx(S.Z,{className:"w-4 h-4"}),"Build Sector"]}),(0,a.jsxs)("button",{onClick:()=>e.push(`/corporation/${m.id}/edit`),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors flex items-center gap-2 shadow-sm hover:shadow-md",children:[a.jsx(P,{className:"w-4 h-4"}),"Edit"]}),(0,a.jsxs)("button",{onClick:eI,disabled:j,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 transition-colors flex items-center gap-2 shadow-sm hover:shadow-md",children:[a.jsx(E.Z,{className:"w-4 h-4"}),j?"Deleting...":"Delete"]})]})]}),m.ceo&&(0,a.jsxs)("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-400 mb-2 flex-wrap",children:[a.jsx(M.Z,{className:"w-4 h-4"}),a.jsx("span",{className:"text-xs font-bold uppercase tracking-[0.1em]",children:"CEO:"}),a.jsx(i.default,{href:`/profile/${m.ceo.profile_id}`,className:"font-semibold hover:text-corporate-blue dark:hover:text-corporate-blue-light transition-colors",children:m.ceo.player_name||m.ceo.username}),void 0!==m.ceo_salary&&m.ceo_salary>0?(0,a.jsxs)("span",{className:"px-2 py-0.5 text-xs font-semibold bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300 rounded-full",title:`$${((m.ceo_salary||1e5)/96).toLocaleString(void 0,{maximumFractionDigits:2})} per hour`,children:["Salary: $",(m.ceo_salary||1e5).toLocaleString(),"/96h"]}):a.jsx("span",{className:"px-2 py-0.5 text-xs font-semibold bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 rounded-full",children:"No Salary"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 flex-wrap text-sm text-gray-500 dark:text-gray-500",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(Z.Z,{className:"w-4 h-4"}),(0,a.jsxs)("span",{className:"text-xs font-bold uppercase tracking-[0.1em]",children:["Founded ",new Date(m.created_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]})]}),m.hq_state&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx($.Z,{className:"w-4 h-4"}),(0,a.jsxs)("span",{className:"text-xs font-bold uppercase tracking-[0.1em]",children:["HQ: ",eD[m.hq_state]||m.hq_state]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(O.Z,{className:"w-4 h-4"}),a.jsx("span",{className:`text-xs font-bold uppercase tracking-[0.1em] px-2 py-0.5 rounded-full ${"diversified"===m.focus?"bg-gradient-to-r from-purple-500 to-indigo-500 text-white":"production"===m.focus?"bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-300":"retail"===m.focus?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300":"service"===m.focus?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300":"extraction"===m.focus?"bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-300":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400"}`,children:m.focus?m.focus.charAt(0).toUpperCase()+m.focus.slice(1):"Diversified"})]})]})]})]})})]}),(0,a.jsxs)("div",{className:"relative rounded-2xl border border-gray-200/50 dark:border-gray-700/50 bg-gradient-to-br from-white via-white to-gray-50/50 dark:from-gray-900 dark:via-gray-900 dark:to-gray-800/50 shadow-2xl overflow-hidden backdrop-blur-sm",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-corporate-blue/5 via-transparent to-corporate-blue-light/5 dark:from-corporate-blue/10 dark:via-transparent dark:to-corporate-blue-dark/10 pointer-events-none"}),a.jsx("div",{className:"absolute inset-0 ring-1 ring-inset ring-white/20 dark:ring-gray-700/30 pointer-events-none"}),a.jsx("div",{className:"relative border-b border-gray-200 dark:border-gray-700",children:(0,a.jsxs)("div",{className:"flex",children:[a.jsx("button",{onClick:()=>X("overview"),className:`flex-1 px-6 py-4 text-sm font-semibold transition-colors ${"overview"===Q?"text-corporate-blue dark:text-corporate-blue-light border-b-2 border-corporate-blue dark:border-corporate-blue-light bg-corporate-blue/5 dark:bg-corporate-blue/10":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:"Overview"}),a.jsx("button",{onClick:()=>X("sectors"),className:`flex-1 px-6 py-4 text-sm font-semibold transition-colors ${"sectors"===Q?"text-corporate-blue dark:text-corporate-blue-light border-b-2 border-corporate-blue dark:border-corporate-blue-light bg-corporate-blue/5 dark:bg-corporate-blue/10":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:"Sectors"}),a.jsx("button",{onClick:()=>X("board"),className:`flex-1 px-6 py-4 text-sm font-semibold transition-colors ${"board"===Q?"text-corporate-blue dark:text-corporate-blue-light border-b-2 border-corporate-blue dark:border-corporate-blue-light bg-corporate-blue/5 dark:bg-corporate-blue/10":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:"Board"}),a.jsx("button",{onClick:()=>X("finance"),className:`flex-1 px-6 py-4 text-sm font-semibold transition-colors ${"finance"===Q?"text-corporate-blue dark:text-corporate-blue-light border-b-2 border-corporate-blue dark:border-corporate-blue-light bg-corporate-blue/5 dark:bg-corporate-blue/10":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:"Finance"})]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:["overview"===Q&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"relative rounded-2xl border border-gray-200/50 dark:border-gray-700/50 bg-gradient-to-br from-white via-white to-gray-50/50 dark:from-gray-900 dark:via-gray-900 dark:to-gray-800/50 shadow-2xl overflow-hidden backdrop-blur-sm",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-corporate-blue/5 via-transparent to-corporate-blue-light/5 dark:from-corporate-blue/10 dark:via-transparent dark:to-corporate-blue-dark/10 pointer-events-none"}),a.jsx("div",{className:"absolute inset-0 ring-1 ring-inset ring-white/20 dark:ring-gray-700/30 pointer-events-none"}),(0,a.jsxs)("div",{className:"relative p-6",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-6",children:"Financial Overview"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"relative rounded-xl border border-white/60 bg-white/70 dark:border-gray-800/70 dark:bg-gray-800/60 p-5 shadow-sm hover:shadow-md transition-shadow",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xs font-bold uppercase tracking-[0.1em] text-gray-600 dark:text-gray-400 mb-2",children:[a.jsx(T.Z,{className:"w-4 h-4"}),"Share Price"]}),a.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white font-mono",children:eR(m.share_price)})]}),(0,a.jsxs)("div",{className:"relative rounded-xl border border-white/60 bg-white/70 dark:border-gray-800/70 dark:bg-gray-800/60 p-5 shadow-sm hover:shadow-md transition-shadow",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xs font-bold uppercase tracking-[0.1em] text-gray-600 dark:text-gray-400 mb-2",children:[a.jsx(D.Z,{className:"w-4 h-4"}),"Total Shares"]}),a.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white font-mono",children:eY.toLocaleString()})]}),(0,a.jsxs)("div",{className:"relative rounded-xl border border-white/60 bg-white/70 dark:border-gray-800/70 dark:bg-gray-800/60 p-5 shadow-sm hover:shadow-md transition-shadow",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xs font-bold uppercase tracking-[0.1em] text-gray-600 dark:text-gray-400 mb-2",children:[a.jsx(L.Z,{className:"w-4 h-4"}),"Market Cap"]}),a.jsx("p",{className:"text-3xl font-bold text-corporate-blue dark:text-corporate-blue-light font-mono",children:(0,n.E)(eX)})]}),(0,a.jsxs)("div",{className:"relative rounded-xl border border-white/60 bg-white/70 dark:border-gray-800/70 dark:bg-gray-800/60 p-5 shadow-sm hover:shadow-md transition-shadow",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xs font-bold uppercase tracking-[0.1em] text-gray-600 dark:text-gray-400 mb-2",children:[a.jsx(D.Z,{className:"w-4 h-4"}),"Public Shares"]}),a.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white font-mono",children:m.public_shares.toLocaleString()}),(0,a.jsxs)("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mt-1",children:["(",eJ.toFixed(1),"%)"]})]}),(0,a.jsxs)("div",{className:"relative rounded-xl border border-white/60 bg-white/70 dark:border-gray-800/70 dark:bg-gray-800/60 p-5 shadow-sm hover:shadow-md transition-shadow",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xs font-bold uppercase tracking-[0.1em] text-gray-600 dark:text-gray-400 mb-2",children:[a.jsx(T.Z,{className:"w-4 h-4"}),"Corporate Capital"]}),a.jsx("p",{className:"text-3xl font-bold text-emerald-600 dark:text-emerald-400 font-mono",children:(0,n.E)(ei?.cash??m.capital??0)})]})]})]})]}),a.jsx(ey,{corporationId:m.id,currentPrice:m.share_price}),(0,a.jsxs)("div",{className:"relative rounded-2xl border border-gray-200/50 dark:border-gray-700/50 bg-gradient-to-br from-white via-white to-gray-50/50 dark:from-gray-900 dark:via-gray-900 dark:to-gray-800/50 shadow-2xl overflow-hidden backdrop-blur-sm",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-corporate-blue/5 via-transparent to-corporate-blue-light/5 dark:from-corporate-blue/10 dark:via-transparent dark:to-corporate-blue-dark/10 pointer-events-none"}),a.jsx("div",{className:"absolute inset-0 ring-1 ring-inset ring-white/20 dark:ring-gray-700/30 pointer-events-none"}),(0,a.jsxs)("div",{className:"relative p-6",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:"Shareholders"}),eQ&&eG&&(0,a.jsxs)("div",{className:"mb-4 p-3 bg-amber-50 dark:bg-amber-900/30 border border-amber-200 dark:border-amber-700 rounded-lg text-sm text-amber-800 dark:text-amber-200",children:[a.jsx("strong",{children:"Note:"})," Total shares recorded (",m.shares.toLocaleString(),") differs from actual distribution (",eK.toLocaleString(),"). An admin can fix this via the fix-all-shares endpoint."]}),m.shareholders&&m.shareholders.length>0?a.jsx("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full border-collapse",children:[a.jsx("thead",{children:(0,a.jsxs)("tr",{className:"border-b-2 border-gray-200/80 dark:border-gray-700/80 bg-gradient-to-b from-gray-50/80 to-gray-100/60 dark:from-gray-800/60 dark:to-gray-800/40 backdrop-blur-sm",children:[a.jsx("th",{className:"text-left py-4 px-4 text-xs font-bold uppercase tracking-[0.15em] text-gray-600 dark:text-gray-400",children:"Shareholder"}),a.jsx("th",{className:"text-right py-4 px-4 text-xs font-bold uppercase tracking-[0.15em] text-gray-600 dark:text-gray-400",children:"Shares"}),a.jsx("th",{className:"text-right py-4 px-4 text-xs font-bold uppercase tracking-[0.15em] text-gray-600 dark:text-gray-400",children:"Ownership"}),a.jsx("th",{className:"text-right py-4 px-4 text-xs font-bold uppercase tracking-[0.15em] text-gray-600 dark:text-gray-400",children:"Value"})]})}),(0,a.jsxs)("tbody",{className:"divide-y divide-gray-200/60 dark:divide-gray-700/50",children:[m.shareholders.sort((e,t)=>t.shares-e.shares).map((e,t)=>{let r=e.shares/eY*100,s=e.shares*m.share_price,o=e.user_id===m.ceo_id;return(0,a.jsxs)("tr",{className:`
                                  transition-all duration-200 ease-out
                                  ${t%2==0?"bg-white/40 dark:bg-gray-900/30":"bg-gray-50/30 dark:bg-gray-800/20"}
                                  ${o?"bg-corporate-blue/10 dark:bg-corporate-blue/20 border-l-4 border-corporate-blue":""}
                                `,children:[a.jsx("td",{className:"py-4 px-4",children:e.user?(0,a.jsxs)(i.default,{href:`/profile/${e.user.profile_id}`,className:"flex items-center gap-3 hover:text-corporate-blue dark:hover:text-corporate-blue-light transition-colors group",children:[e.user.profile_image_url&&a.jsx("img",{src:e.user.profile_image_url,alt:e.user.username,className:"w-10 h-10 rounded-full object-cover ring-2 ring-gray-200/50 dark:ring-gray-700/50 group-hover:ring-corporate-blue/50 transition-all shadow-sm",onError:e=>{e.currentTarget.src="/defaultpfp.jpg"}}),a.jsx("div",{children:(0,a.jsxs)("div",{className:"font-bold text-gray-900 dark:text-white",children:[e.user.player_name||e.user.username,o&&a.jsx("span",{className:"ml-2 text-xs font-bold uppercase tracking-[0.05em] bg-corporate-blue text-white px-2 py-0.5 rounded",children:"CEO"})]})})]}):a.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Unknown User"})}),a.jsx("td",{className:"text-right py-4 px-4 font-bold text-gray-900 dark:text-white font-mono",children:e.shares.toLocaleString()}),(0,a.jsxs)("td",{className:"text-right py-4 px-4 text-gray-700 dark:text-gray-300 font-semibold",children:[r.toFixed(2),"%"]}),a.jsx("td",{className:"text-right py-4 px-4 font-bold text-gray-900 dark:text-white font-mono",children:eR(s)})]},e.id)}),(0,a.jsxs)("tr",{className:"bg-gray-50/50 dark:bg-gray-700/30 border-t-2 border-gray-200/80 dark:border-gray-700/80",children:[a.jsx("td",{className:"py-4 px-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-gray-300 to-gray-400 dark:from-gray-600 dark:to-gray-700 flex items-center justify-center ring-2 ring-gray-200/50 dark:ring-gray-700/50 shadow-sm",children:a.jsx(D.Z,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"font-bold text-gray-900 dark:text-white",children:"Public Market"}),a.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Available for purchase"})]})]})}),a.jsx("td",{className:"text-right py-4 px-4 font-bold text-gray-900 dark:text-white font-mono",children:m.public_shares.toLocaleString()}),(0,a.jsxs)("td",{className:"text-right py-4 px-4 text-gray-700 dark:text-gray-300 font-semibold",children:[eJ.toFixed(2),"%"]}),a.jsx("td",{className:"text-right py-4 px-4 font-bold text-gray-900 dark:text-white font-mono",children:eR(m.public_shares*m.share_price)})]})]})]})}):a.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No shareholders yet."})]})]})]}),"sectors"===Q&&(0,a.jsxs)("div",{className:"relative rounded-2xl border border-gray-200/50 dark:border-gray-700/50 bg-gradient-to-br from-white via-white to-gray-50/50 dark:from-gray-900 dark:via-gray-900 dark:to-gray-800/50 shadow-2xl overflow-visible backdrop-blur-sm",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-corporate-blue/5 via-transparent to-corporate-blue-light/5 dark:from-corporate-blue/10 dark:via-transparent dark:to-corporate-blue-dark/10 pointer-events-none"}),a.jsx("div",{className:"absolute inset-0 ring-1 ring-inset ring-white/20 dark:ring-gray-700/30 pointer-events-none"}),(0,a.jsxs)("div",{className:"relative p-6",children:[(0,a.jsxs)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2 flex items-center gap-2",children:[a.jsx(b.Z,{className:"w-5 h-5 text-corporate-blue"}),"Sector Operations"]}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-6",children:"All sectors the corporation operates in, organized by state"}),0===ed.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[a.jsx(b.Z,{className:"h-12 w-12 text-gray-300 dark:text-gray-600 mx-auto mb-4"}),a.jsx("p",{className:"text-lg font-medium text-gray-900 dark:text-white mb-1",children:"No Sector Operations"}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6 text-sm",children:"This corporation hasn't entered any markets yet."}),(0,a.jsxs)(i.default,{href:"/states",className:"inline-flex items-center gap-2 bg-corporate-blue text-white px-5 py-2.5 rounded-lg font-semibold hover:bg-corporate-blue-dark transition-colors text-sm",children:[a.jsx($.Z,{className:"w-4 h-4"}),"Browse States"]})]}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"rounded-xl border border-white/60 bg-white/70 dark:border-gray-800/70 dark:bg-gray-800/60 p-4 shadow-sm group relative",children:[a.jsx("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"States"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:new Set(ed.map(e=>e.state_code)).size}),a.jsx("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 hidden group-hover:block z-50 pointer-events-none",children:a.jsx("div",{className:"bg-gray-900 text-white text-xs rounded-lg px-3 py-2 whitespace-nowrap shadow-lg",children:"Number of US states with market presence"})})]}),(0,a.jsxs)("div",{className:"rounded-xl border border-white/60 bg-white/70 dark:border-gray-800/70 dark:bg-gray-800/60 p-4 shadow-sm group relative",children:[a.jsx("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Sectors"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:new Set(ed.map(e=>e.sector_type)).size}),a.jsx("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 hidden group-hover:block z-50 pointer-events-none",children:a.jsx("div",{className:"bg-gray-900 text-white text-xs rounded-lg px-3 py-2 whitespace-nowrap shadow-lg",children:"Unique industry sectors operated in"})})]}),(0,a.jsxs)("div",{className:"rounded-xl border border-white/60 bg-white/70 dark:border-gray-800/70 dark:bg-gray-800/60 p-4 shadow-sm group relative",children:[a.jsx("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Total Units"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:ed.reduce((e,t)=>e+t.retail_count+t.production_count+t.service_count+(t.extraction_count||0),0)}),a.jsx("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 hidden group-hover:block z-50 pointer-events-none",children:a.jsx("div",{className:"bg-gray-900 text-white text-xs rounded-lg px-3 py-2 whitespace-nowrap shadow-lg",children:"All business units: Retail + Production + Service + Extraction"})})]}),(0,a.jsxs)("div",{className:"rounded-xl border border-white/60 bg-white/70 dark:border-gray-800/70 dark:bg-gray-800/60 p-4 shadow-sm group relative",children:[a.jsx("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Production"}),a.jsx("p",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:ed.reduce((e,t)=>e+t.production_count,0)}),a.jsx("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 hidden group-hover:block z-50 pointer-events-none",children:(0,a.jsxs)("div",{className:"bg-gray-900 text-white text-xs rounded-lg px-3 py-2 whitespace-nowrap shadow-lg",children:["Manufacturing units: $",eZ.production.baseRevenue,"/hr revenue \xd7 multiplier"]})})]}),(0,a.jsxs)("div",{className:"rounded-xl border border-white/60 bg-white/70 dark:border-gray-800/70 dark:bg-gray-800/60 p-4 shadow-sm group relative",children:[a.jsx("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Extraction"}),a.jsx("p",{className:"text-2xl font-bold text-amber-600 dark:text-amber-400",children:ed.reduce((e,t)=>e+(t.extraction_count||0),0)}),a.jsx("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 hidden group-hover:block z-50 pointer-events-none",children:(0,a.jsxs)("div",{className:"bg-gray-900 text-white text-xs rounded-lg px-3 py-2 whitespace-nowrap shadow-lg",children:["Resource extraction units: $",eZ.extraction.baseRevenue,"/hr revenue \xd7 multiplier"]})})]})]}),(()=>{let e={};return ed.forEach(t=>{let r=t.state_code;e[r]||(e[r]=[]),e[r].push(t)}),Object.entries(e).map(([e,t])=>{let r=t[0]?.state_name||eD[e]||e,s=t[0]?.state_multiplier||1,o=0,l=0;t.forEach(e=>{if(e.retail_count>0){let{unitRevenuePerHour:t,unitCostPerHour:r}=eF(e.sector_type,"retail");o+=t*e.retail_count*96,l+=r*e.retail_count*96}if(e.production_count>0){let{unitRevenuePerHour:t,unitCostPerHour:r}=eA(e.sector_type);o+=96*t*e.production_count,l+=96*r*e.production_count}if(e.service_count>0){let{unitRevenuePerHour:t,unitCostPerHour:r}=eF(e.sector_type,"service");o+=t*e.service_count*96,l+=r*e.service_count*96}if(e.extraction_count&&e.extraction_count>0){let t=e$[e.sector_type],r=0;if(t&&t.length>0){let e=t[0];ec[e]&&(r=192*ec[e].currentPrice)}0===r&&(r=96*eZ.extraction.baseRevenue);let a=96*eZ.extraction.baseCost;o+=r*e.extraction_count,l+=a*e.extraction_count}});let d=o-l,n=t.reduce((e,t)=>e+t.retail_count,0),c=t.reduce((e,t)=>e+t.production_count,0),x=t.reduce((e,t)=>e+t.service_count,0),g=t.reduce((e,t)=>e+(t.extraction_count||0),0);return(0,a.jsxs)("div",{className:"rounded-xl border border-gray-200 dark:border-gray-700 overflow-visible",children:[a.jsx("div",{className:"bg-gray-50 dark:bg-gray-800/50 px-4 py-3 border-b border-gray-200 dark:border-gray-700",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)(i.default,{href:`/states/${e}`,className:"flex items-center gap-2 hover:text-corporate-blue dark:hover:text-corporate-blue-light transition-colors",children:[a.jsx($.Z,{className:"w-4 h-4 text-corporate-blue"}),a.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:r}),(0,a.jsxs)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["(",e,")"]}),(0,a.jsxs)("span",{className:"text-xs font-medium px-2 py-0.5 rounded-full bg-corporate-blue/10 text-corporate-blue dark:text-corporate-blue-light group relative cursor-help",children:[s.toFixed(1),"x",a.jsx("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 hidden group-hover:block z-50 pointer-events-none",children:a.jsx("div",{className:"bg-gray-900 text-white text-xs rounded-lg px-3 py-2 whitespace-nowrap shadow-lg",children:"State capacity multiplier - affects max units per sector (not revenue)"})})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"text-right group relative",children:[a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Revenue"}),a.jsx("p",{className:"text-sm font-bold text-emerald-600 dark:text-emerald-400 font-mono",children:eR(o)}),a.jsx("div",{className:"absolute bottom-full right-0 mb-2 hidden group-hover:block z-50 pointer-events-none",children:(0,a.jsxs)("div",{className:"bg-gray-900 text-white text-xs rounded-lg px-3 py-2 shadow-lg text-left max-w-xs",children:[a.jsx("p",{className:"font-medium mb-1",children:"96-hour Revenue Breakdown"}),a.jsx("p",{className:"text-gray-400 text-xs mb-1",children:"(No state multiplier on revenue - multipliers affect capacity only)"}),(0,a.jsxs)("div",{className:"space-y-1",children:[n>0&&(0,a.jsxs)("p",{children:["Retail: ",n," \xd7 $",eZ.retail.baseRevenue,"/hr \xd7 96hr"]}),c>0&&(0,a.jsxs)("p",{children:["Production: ",c," units (dynamic pricing)"]}),x>0&&(0,a.jsxs)("p",{children:["Service: ",x," \xd7 $",eZ.service.baseRevenue,"/hr \xd7 96hr"]}),g>0&&(0,a.jsxs)("p",{children:["Extraction: ",g," units (dynamic pricing)"]})]}),(0,a.jsxs)("p",{className:"border-t border-gray-700 mt-1 pt-1 font-semibold",children:["Total: ",eR(o)]})]})})]}),(0,a.jsxs)("div",{className:"text-right group relative",children:[a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Profit"}),a.jsx("p",{className:`text-sm font-bold font-mono ${d>=0?"text-emerald-600 dark:text-emerald-400":"text-red-600 dark:text-red-400"}`,children:eR(d)}),a.jsx("div",{className:"absolute bottom-full right-0 mb-2 hidden group-hover:block z-50 pointer-events-none",children:(0,a.jsxs)("div",{className:"bg-gray-900 text-white text-xs rounded-lg px-3 py-2 whitespace-nowrap shadow-lg text-left",children:[a.jsx("p",{className:"font-medium mb-1",children:"Net = Revenue - Costs"}),(0,a.jsxs)("p",{className:"text-emerald-400",children:["Revenue: ",eR(o)]}),(0,a.jsxs)("p",{className:"text-red-400",children:["Costs: ",eR(l)]}),(0,a.jsxs)("p",{className:"border-t border-gray-700 mt-1 pt-1",children:["Net: ",eR(d)]})]})})]})]})]})}),a.jsx("div",{className:"divide-y divide-gray-100 dark:divide-gray-700/50",children:t.map(e=>{let t=eN[e.sector_type],o=eO(e.sector_type),i=e$[e.sector_type];e.retail_count,e.production_count,e.service_count,e.extraction_count;let l=0,d=0,n=eA(e.sector_type);if(e.retail_count>0){let{unitRevenuePerHour:t,unitCostPerHour:r}=eF(e.sector_type,"retail");l+=t*e.retail_count*96,d+=r*e.retail_count*96}if(e.production_count>0&&(l+=96*n.unitRevenuePerHour*e.production_count,d+=96*n.unitCostPerHour*e.production_count),e.service_count>0){let{unitRevenuePerHour:t,unitCostPerHour:r}=eF(e.sector_type,"service");l+=t*e.service_count*96,d+=r*e.service_count*96}if(e.extraction_count&&e.extraction_count>0){let t=0;if(i&&i.length>0){let e=i[0];ec[e]&&(t=192*ec[e].currentPrice)}0===t&&(t=96*eZ.extraction.baseRevenue);let r=96*eZ.extraction.baseCost;l+=t*e.extraction_count,d+=r*e.extraction_count}let c=l-d;return a.jsx(ev.Z,{sectorType:e.sector_type,stateCode:e.state_code,stateName:r,stateMultiplier:s,enteredDate:e.created_at,units:{retail:e.retail_count,production:e.production_count,service:e.service_count,extraction:e.extraction_count||0},corporation:m?{id:m.id,name:m.name,logo:m.logo}:null,canExtract:o,extractableResources:i,requiredResource:t||null,producedProduct:ew[e.sector_type]||null,productDemands:e_[e.sector_type]||null,revenue:l,profit:c,showActions:m&&h===m.ceo_id,onAbandonUnit:t=>eB(e.id,t,e.sector_type),onBuildUnit:t=>eW(e.id,t),abandoningUnit:J?.startsWith(`${e.id}-`)?J.split("-")[1]:null,building:et?.startsWith(`${e.id}-`)?et.split("-")[1]:null,canBuild:m&&h===m.ceo_id&&(m.capital??0)>=1e4,buildCost:1e4,formatCurrency:eR,calculateUnitProfit:t=>{if("retail"===t||"service"===t){let{unitRevenuePerHour:r,unitCostPerHour:a}=eF(e.sector_type,t);return(r-a)*96}return"production"===t?(n.unitRevenuePerHour-n.unitCostPerHour)*96:"extraction"===t?i&&i.length>0&&ec[i[0]]?192*ec[i[0]].currentPrice-96*eZ.extraction.baseCost:(eZ.extraction.baseRevenue-eZ.extraction.baseCost)*96:0},UNIT_ECONOMICS:eZ,SECTORS_CAN_EXTRACT:e$,commodityPrices:ec,productPrices:em,EXTRACTION_OUTPUT_RATE:2,unitFlows:eh?.sector_unit_flows?.[e.sector_type],productReferenceValues:eU},e.id)})})]},e)})})(),(0,a.jsxs)("div",{className:"rounded-xl border border-white/60 bg-white/70 dark:border-gray-800/70 dark:bg-gray-800/60 p-6 shadow-sm mt-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[a.jsx(c.Z,{className:"w-5 h-5 text-amber-600"}),"Resource Inputs Required",a.jsx("span",{className:"text-xs font-normal text-gray-500 dark:text-gray-400 ml-2",children:"(for production units)"})]}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:(()=>{let e={};return(ed.forEach(t=>{if(t.production_count>0){let r=eL(t.sector_type),a=r?.inputs.resources;if(a)Object.entries(a).forEach(([r,a])=>{e[r]=(e[r]||0)+a*t.production_count});else{let r=eN[t.sector_type];r&&(e[r]=(e[r]||0)+t.production_count)}}}),0===Object.keys(e).length)?a.jsx("div",{className:"col-span-full text-center py-4",children:a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No production units requiring resources"})}):Object.entries(e).map(([e,t])=>(0,a.jsxs)("div",{className:`rounded-lg p-4 group relative ${eP[e]||"bg-gray-100 dark:bg-gray-800"}`,children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[eC[e],a.jsx("span",{className:"font-medium text-sm",children:e})]}),a.jsx("p",{className:"text-2xl font-bold",children:t.toLocaleString(void 0,{maximumFractionDigits:2})}),a.jsx("p",{className:"text-xs opacity-75",children:"units required / hr"}),a.jsx("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 hidden group-hover:block z-50 pointer-events-none",children:(0,a.jsxs)("div",{className:"bg-gray-900 text-white text-xs rounded-lg px-3 py-2 whitespace-nowrap shadow-lg",children:[(0,a.jsxs)("p",{className:"font-medium",children:[e," Demand"]}),(0,a.jsxs)("p",{children:[t.toLocaleString(void 0,{maximumFractionDigits:2})," units/hr needed across production"]}),a.jsx("p",{className:"text-gray-400 mt-1",children:"efficiency = min(1, available / total demand)"})]})})]},e))})()})]}),(0,a.jsxs)("div",{className:"rounded-xl border border-white/60 bg-white/70 dark:border-gray-800/70 dark:bg-gray-800/60 p-6 shadow-sm mt-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[a.jsx(x.Z,{className:"w-5 h-5 text-amber-600"}),"Extraction Output",a.jsx("span",{className:"text-xs font-normal text-gray-500 dark:text-gray-400 ml-2",children:"(resources extracted)"})]}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:(()=>{let e={};return(ed.forEach(t=>{let r=e$[t.sector_type];r&&(t.extraction_count||0)>0&&r.forEach(r=>{e[r]=(e[r]||0)+(t.extraction_count||0)})}),0===Object.keys(e).length)?a.jsx("div",{className:"col-span-full text-center py-4",children:a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No extraction units producing resources"})}):Object.entries(e).map(([e,t])=>(0,a.jsxs)("div",{className:`rounded-lg p-4 group relative ${eP[e]||"bg-gray-100 dark:bg-gray-800"}`,children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[eC[e],a.jsx("span",{className:"font-medium text-sm",children:e})]}),a.jsx("p",{className:"text-2xl font-bold",children:t}),a.jsx("p",{className:"text-xs opacity-75",children:"units extracted"}),a.jsx("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 hidden group-hover:block z-50 pointer-events-none",children:(0,a.jsxs)("div",{className:"bg-gray-900 text-white text-xs rounded-lg px-3 py-2 whitespace-nowrap shadow-lg",children:[(0,a.jsxs)("p",{className:"font-medium",children:[e," Extraction"]}),(0,a.jsxs)("p",{children:[t," extraction units producing this resource"]}),a.jsx("p",{className:"text-emerald-400 mt-1",children:"Adds to state/national resource pool"})]})})]},e))})()})]}),(0,a.jsxs)("div",{className:"rounded-xl border border-white/60 bg-white/70 dark:border-gray-800/70 dark:bg-gray-800/60 p-6 shadow-sm mt-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[a.jsx(A.Z,{className:"w-5 h-5 text-emerald-600"}),"Product Output"]}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:(()=>{let e={};return(ed.forEach(t=>{if(t.production_count>0){let r=eL(t.sector_type),a=r?.outputs.products;if(a)Object.entries(a).forEach(([r,a])=>{e[r]=(e[r]||0)+a*t.production_count});else{let r=ew[t.sector_type];r&&(e[r]=(e[r]||0)+1*t.production_count)}}}),0===Object.keys(e).length)?a.jsx("div",{className:"col-span-full text-center py-4",children:a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No production units creating products"})}):Object.entries(e).map(([e,t])=>(0,a.jsxs)("div",{className:`rounded-lg p-4 ${eM[e]||"bg-gray-100 dark:bg-gray-800"}`,children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[eE[e],a.jsx("span",{className:"font-medium text-sm",children:e})]}),a.jsx("p",{className:"text-2xl font-bold",children:t.toLocaleString(void 0,{maximumFractionDigits:2})}),a.jsx("p",{className:"text-xs opacity-75",children:"units produced / hr"})]},e))})()})]}),(0,a.jsxs)("div",{className:"rounded-xl border border-white/60 bg-white/70 dark:border-gray-800/70 dark:bg-gray-800/60 p-6 shadow-sm mt-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[a.jsx(_.Z,{className:"w-5 h-5 text-orange-600"}),"Product Inputs Required",a.jsx("span",{className:"text-xs font-normal text-gray-500 dark:text-gray-400 ml-2",children:"(from national pool)"})]}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:(()=>{let e={};return(ed.forEach(t=>{if(t.production_count>0){let r=eL(t.sector_type),a=r?.inputs.products;if(a)Object.entries(a).forEach(([r,a])=>{e[r]=(e[r]||0)+a*t.production_count});else{let r=e_[t.sector_type];r&&r.forEach(r=>{e[r]=(e[r]||0)+.5*t.production_count}),e.Electricity=(e.Electricity||0)+.5*t.production_count}}}),0===Object.keys(e).length)?a.jsx("div",{className:"col-span-full text-center py-4",children:a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No production units requiring products"})}):Object.entries(e).map(([e,t])=>(0,a.jsxs)("div",{className:`rounded-lg p-4 ${eM[e]||"bg-gray-100 dark:bg-gray-800"}`,children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[eE[e],a.jsx("span",{className:"font-medium text-sm",children:e})]}),a.jsx("p",{className:"text-2xl font-bold",children:t.toLocaleString(void 0,{maximumFractionDigits:2})}),a.jsx("p",{className:"text-xs opacity-75",children:"units needed / hr"})]},e))})()})]})]})]})]}),"finance"===Q&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"relative rounded-2xl border border-gray-200/50 dark:border-gray-700/50 bg-gradient-to-br from-white via-white to-gray-50/50 dark:from-gray-900 dark:via-gray-900 dark:to-gray-800/50 shadow-2xl overflow-hidden backdrop-blur-sm",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-corporate-blue/5 via-transparent to-corporate-blue-light/5 dark:from-corporate-blue/10 dark:via-transparent dark:to-corporate-blue-dark/10 pointer-events-none"}),a.jsx("div",{className:"absolute inset-0 ring-1 ring-inset ring-white/20 dark:ring-gray-700/30 pointer-events-none"}),(0,a.jsxs)("div",{className:"relative p-6",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-6",children:"Finance & Capital"}),eG?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"rounded-xl border border-white/60 bg-white/70 dark:border-gray-800/70 dark:bg-gray-800/60 p-6 shadow-sm",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[a.jsx(S.Z,{className:"w-5 h-5 text-corporate-blue"}),"Issue New Shares"]}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Issue new shares at market price to raise capital. You can issue up to 10% of current outstanding shares."}),a.jsx("div",{className:"space-y-4",children:(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"issueShares",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Number of Shares to Issue"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx("input",{type:"number",id:"issueShares",min:"1",max:Math.floor(.1*m.shares),value:V,onChange:e=>B(e.target.value),placeholder:"Shares",className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm focus:ring-2 focus:ring-corporate-blue focus:border-transparent",disabled:W}),(0,a.jsxs)("button",{onClick:eV,disabled:W||!V||!m,className:"px-6 py-2 bg-corporate-blue text-white rounded-lg hover:bg-corporate-blue-dark disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-2 text-sm font-semibold",children:[a.jsx(S.Z,{className:"w-4 h-4"}),"Issue"]})]}),V&&!isNaN(parseInt(V,10))&&m&&(0,a.jsxs)("div",{className:"mt-2 space-y-1 text-sm",children:[(0,a.jsxs)("p",{className:"text-gray-600 dark:text-gray-400",children:["Issue Price: ",a.jsx("span",{className:"font-semibold",children:eR(m.share_price)})]}),(0,a.jsxs)("p",{className:"text-gray-600 dark:text-gray-400",children:["Capital Raised: ",a.jsx("span",{className:"font-semibold",children:eR(parseInt(V,10)*m.share_price)})]}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Max issueable: ",Math.floor(.1*m.shares).toLocaleString()," shares (10% of ",m.shares.toLocaleString(),")"]})]})]})})]}),(0,a.jsxs)("div",{className:"rounded-xl border border-white/60 bg-white/70 dark:border-gray-800/70 dark:bg-gray-800/60 p-6 shadow-sm",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[a.jsx(T.Z,{className:"w-5 h-5 text-corporate-blue"}),"Corporate Capital"]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Current Capital"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white font-mono",children:(0,n.E)(ei?.cash??m.capital??0)})]}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Market Cap"}),a.jsx("p",{className:"text-2xl font-bold text-corporate-blue dark:text-corporate-blue-light font-mono",children:(0,n.E)(eX)})]})]})]})]}):a.jsx("div",{className:"rounded-xl border border-white/60 bg-white/70 dark:border-gray-800/70 dark:bg-gray-800/60 p-6 shadow-sm text-center",children:a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Only the CEO can manage corporate finance and issue shares."})})]})]}),(0,a.jsxs)("div",{className:"relative rounded-2xl border border-gray-200/50 dark:border-gray-700/50 bg-gradient-to-br from-white via-white to-gray-50/50 dark:from-gray-900 dark:via-gray-900 dark:to-gray-800/50 shadow-2xl overflow-hidden backdrop-blur-sm mt-6",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-corporate-blue/5 via-transparent to-corporate-blue-light/5 dark:from-corporate-blue/10 dark:via-transparent dark:to-corporate-blue-dark/10 pointer-events-none"}),a.jsx("div",{className:"absolute inset-0 ring-1 ring-inset ring-white/20 dark:ring-gray-700/30 pointer-events-none"}),(0,a.jsxs)("div",{className:"relative p-6",children:[(0,a.jsxs)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2 flex items-center gap-2",children:[a.jsx(F.Z,{className:"w-5 h-5 text-corporate-blue"}),"Financial Statement"]}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-6",children:"96-hour projection based on market operations"}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[a.jsx(T.Z,{className:"w-4 h-4 text-corporate-blue"}),"Balance Sheet"]}),(0,a.jsxs)("div",{className:"rounded-xl border border-white/60 bg-white/70 dark:border-gray-800/70 dark:bg-gray-800/60 p-4 shadow-sm",children:[a.jsx("h4",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:"Assets"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center py-1 border-b border-gray-200 dark:border-gray-700",children:[a.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Cash"}),a.jsx("span",{className:"text-sm font-semibold text-gray-900 dark:text-white font-mono",children:(0,n.E)(ei?.cash??m.capital??0)})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center py-1 border-b border-gray-200 dark:border-gray-700",children:[a.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Business Units"}),a.jsx("span",{className:"text-sm font-semibold text-gray-900 dark:text-white font-mono",children:eR(ei?.businessUnitAssets||0)})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center pt-2 border-t-2 border-gray-300 dark:border-gray-600",children:[a.jsx("span",{className:"text-sm font-bold text-gray-900 dark:text-white",children:"Total Assets"}),a.jsx("span",{className:"text-sm font-bold text-corporate-blue dark:text-corporate-blue-light font-mono",children:eR(ei?.totalAssets||m.capital||0)})]})]})]}),(0,a.jsxs)("div",{className:"rounded-xl border border-white/60 bg-white/70 dark:border-gray-800/70 dark:bg-gray-800/60 p-4 shadow-sm",children:[a.jsx("h4",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:"Liabilities & Equity"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center py-1 border-b border-gray-200 dark:border-gray-700",children:[a.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Liabilities"}),a.jsx("span",{className:"text-sm font-semibold text-gray-900 dark:text-white font-mono",children:eR(ei?.totalLiabilities||0)})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center py-1 border-b border-gray-200 dark:border-gray-700",children:[a.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Shareholders' Equity"}),a.jsx("span",{className:"text-sm font-semibold text-gray-900 dark:text-white font-mono",children:eR(ei?.shareholdersEquity||m.capital||0)})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center py-1 border-b border-gray-200 dark:border-gray-700",children:[a.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Book Value/Share"}),a.jsx("span",{className:"text-sm font-semibold text-emerald-600 dark:text-emerald-400 font-mono",children:eR(ei?.bookValuePerShare||0)})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center pt-2 border-t-2 border-gray-300 dark:border-gray-600",children:[a.jsx("span",{className:"text-sm font-bold text-gray-900 dark:text-white",children:"Total L&E"}),a.jsx("span",{className:"text-sm font-bold text-corporate-blue dark:text-corporate-blue-light font-mono",children:eR(ei?.totalAssets||m.capital||0)})]})]})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[a.jsx(L.Z,{className:"w-4 h-4 text-corporate-blue"}),"Income Statement"]}),(0,a.jsxs)("div",{className:"rounded-xl border border-white/60 bg-white/70 dark:border-gray-800/70 dark:bg-gray-800/60 p-4 shadow-sm",children:[(0,a.jsxs)("div",{className:"grid grid-cols-[1fr,auto,auto] gap-2 pb-2 mb-2 border-b border-gray-200 dark:border-gray-700",children:[a.jsx("div",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400"}),a.jsx("div",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 text-right min-w-[80px]",children:"96hr"}),a.jsx("div",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 text-right min-w-[80px]",children:"Hourly"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"grid grid-cols-[1fr,auto,auto] gap-2 items-center py-1 border-b border-gray-200 dark:border-gray-700",children:[a.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Revenue"}),a.jsx("span",{className:"text-sm font-semibold text-emerald-600 dark:text-emerald-400 font-mono text-right min-w-[80px]",children:eR(eq.revenue)}),a.jsx("span",{className:"text-xs text-emerald-600 dark:text-emerald-400 font-mono text-right min-w-[80px]",children:eR(eq.revenue/96)})]}),(0,a.jsxs)("div",{className:"grid grid-cols-[1fr,auto,auto] gap-2 items-center py-1 border-b border-gray-200 dark:border-gray-700",children:[a.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Operating Costs"}),a.jsx("span",{className:"text-sm font-semibold text-red-600 dark:text-red-400 font-mono text-right min-w-[80px]",children:eR(eq.variableCosts)}),a.jsx("span",{className:"text-xs text-red-600 dark:text-red-400 font-mono text-right min-w-[80px]",children:eR(eq.variableCosts/96)})]}),(0,a.jsxs)("div",{className:"grid grid-cols-[1fr,auto,auto] gap-2 items-center py-1 border-b border-gray-200 dark:border-gray-700",children:[a.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"CEO Salary"}),a.jsx("span",{className:`text-sm font-semibold font-mono text-right min-w-[80px] ${(m.ceo_salary||1e5)>0?"text-purple-600 dark:text-purple-400":"text-gray-400 dark:text-gray-500"}`,children:eR(m.ceo_salary??1e5)}),a.jsx("span",{className:`text-xs font-mono text-right min-w-[80px] ${(m.ceo_salary||1e5)>0?"text-purple-600 dark:text-purple-400":"text-gray-400 dark:text-gray-500"}`,children:eR((m.ceo_salary??1e5)/96)})]}),(0,a.jsxs)("div",{className:"grid grid-cols-[1fr,auto,auto] gap-2 items-center py-1 border-b border-gray-200 dark:border-gray-700",children:[a.jsx("span",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300",children:"Operating Income"}),a.jsx("span",{className:`text-sm font-semibold font-mono text-right min-w-[80px] ${(eq.operatingIncome||0)>=0?"text-emerald-600 dark:text-emerald-400":"text-red-600 dark:text-red-400"}`,children:eR(eq.operatingIncome)}),a.jsx("span",{className:`text-xs font-mono text-right min-w-[80px] ${(eq.operatingIncome||0)>=0?"text-emerald-600 dark:text-emerald-400":"text-red-600 dark:text-red-400"}`,children:eR(eq.operatingIncome/96)})]}),(0,a.jsxs)("div",{className:"grid grid-cols-[1fr,auto,auto] gap-2 items-center py-1 border-b border-gray-200 dark:border-gray-700",children:[(0,a.jsxs)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Dividends (",(m.dividend_percentage||0).toFixed(1),"%)"]}),a.jsx("span",{className:`text-sm font-semibold font-mono text-right min-w-[80px] ${eq.dividends>0?"text-amber-600 dark:text-amber-400":"text-gray-400 dark:text-gray-500"}`,children:eq.dividends>0?`-${eR(eq.dividends)}`:"$0.00"}),a.jsx("span",{className:`text-xs font-mono text-right min-w-[80px] ${eq.dividends>0?"text-amber-600 dark:text-amber-400":"text-gray-400 dark:text-gray-500"}`,children:eq.dividends>0?`-${eR(eq.dividends/96)}`:"$0.00"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-[1fr,auto,auto] gap-2 items-center pt-2 border-t-2 border-gray-300 dark:border-gray-600",children:[a.jsx("span",{className:"text-sm font-bold text-gray-900 dark:text-white",children:"Retained Earnings"}),a.jsx("span",{className:`text-sm font-bold font-mono text-right min-w-[80px] ${(eq.retainedEarnings||0)>=0?"text-emerald-600 dark:text-emerald-400":"text-red-600 dark:text-red-400"}`,children:eR(eq.retainedEarnings)}),a.jsx("span",{className:`text-xs font-bold font-mono text-right min-w-[80px] ${(eq.retainedEarnings||0)>=0?"text-emerald-600 dark:text-emerald-400":"text-red-600 dark:text-red-400"}`,children:eR(eq.retainedEarnings/96)})]})]})]})]})]}),(0,a.jsxs)("div",{className:"mt-6 p-4 rounded-lg bg-gray-50 dark:bg-gray-800/50 border border-gray-200 dark:border-gray-700",children:[a.jsx("h4",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:"Stock Price Valuation"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm mb-4",children:[(0,a.jsxs)("div",{children:[a.jsx("span",{className:"text-gray-500 dark:text-gray-400 block text-xs mb-1",children:"Current Price"}),a.jsx("span",{className:"font-mono font-semibold text-lg text-gray-900 dark:text-white",children:eR(m.share_price||0)})]}),(0,a.jsxs)("div",{children:[a.jsx("span",{className:"text-gray-500 dark:text-gray-400 block text-xs mb-1",children:"Book Value/Share"}),a.jsx("span",{className:"font-mono font-semibold text-gray-900 dark:text-white",children:eR(eu?.book_value||ei?.bookValuePerShare||0)})]}),(0,a.jsxs)("div",{children:[a.jsx("span",{className:"text-gray-500 dark:text-gray-400 block text-xs mb-1",children:"Total Shares"}),a.jsx("span",{className:"font-mono font-semibold text-gray-900 dark:text-white",children:eY?.toLocaleString()||0})]}),(0,a.jsxs)("div",{children:[a.jsx("span",{className:"text-gray-500 dark:text-gray-400 block text-xs mb-1",children:"Markets Active"}),a.jsx("span",{className:"font-mono font-semibold text-gray-900 dark:text-white",children:ei?.marketsCount||0})]})]}),eu&&(0,a.jsxs)("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-3 mt-3",children:[a.jsx("h5",{className:"text-xs font-semibold text-gray-600 dark:text-gray-400 mb-2 uppercase tracking-wide",children:"Valuation Components"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3 text-xs",children:[(0,a.jsxs)("div",{className:"group relative",children:[a.jsx("span",{className:"text-gray-500 dark:text-gray-400 block mb-1",children:"Earnings Value"}),a.jsx("span",{className:`font-mono font-medium ${eu.earnings_value>=0?"text-emerald-600 dark:text-emerald-400":"text-red-600 dark:text-red-400"}`,children:eR(eu.earnings_value)}),a.jsx("div",{className:"absolute bottom-full left-0 mb-2 hidden group-hover:block z-[9999] pointer-events-none",children:(0,a.jsxs)("div",{className:"bg-gray-900 text-white text-xs rounded-lg px-3 py-2 shadow-xl whitespace-nowrap",children:[a.jsx("p",{className:"font-medium",children:"Earnings-Based Valuation (96hr)"}),(0,a.jsxs)("p",{className:"text-gray-300",children:["Operating Profit: ",eR(eu.annual_profit)]}),(0,a.jsxs)("p",{className:"text-gray-300",children:["EPS \xd7 P/E (15x) = ",eR(eu.annual_profit/(eY||1))," \xd7 15"]})]})})]}),(0,a.jsxs)("div",{className:"group relative",children:[a.jsx("span",{className:"text-gray-500 dark:text-gray-400 block mb-1",children:"Cash/Share"}),a.jsx("span",{className:"font-mono font-medium text-blue-600 dark:text-blue-400",children:eR(eu.cash_per_share)}),a.jsx("div",{className:"absolute bottom-full left-0 mb-2 hidden group-hover:block z-[9999] pointer-events-none",children:(0,a.jsxs)("div",{className:"bg-gray-900 text-white text-xs rounded-lg px-3 py-2 shadow-xl whitespace-nowrap",children:[a.jsx("p",{className:"font-medium",children:"Cash Position"}),(0,a.jsxs)("p",{className:"text-gray-300",children:["Total Capital: ",eR(ei?.cash||0)]}),(0,a.jsxs)("p",{className:"text-gray-300",children:["Per Share: ",eR(eu.cash_per_share)]})]})})]}),(0,a.jsxs)("div",{className:"group relative",children:[a.jsx("span",{className:"text-gray-500 dark:text-gray-400 block mb-1",children:"Dividend Yield"}),(0,a.jsxs)("span",{className:"font-mono font-medium text-purple-600 dark:text-purple-400",children:[eu.dividend_yield.toFixed(2),"%"]}),a.jsx("div",{className:"absolute bottom-full left-0 mb-2 hidden group-hover:block z-[9999] pointer-events-none",children:(0,a.jsxs)("div",{className:"bg-gray-900 text-white text-xs rounded-lg px-3 py-2 shadow-xl whitespace-nowrap",children:[a.jsx("p",{className:"font-medium",children:"Dividend Information"}),(0,a.jsxs)("p",{className:"text-gray-300",children:["Div/Share (96hr): ",eR(eu.annual_dividend_per_share)]}),(0,a.jsxs)("p",{className:"text-gray-300",children:["Yield: ",eu.dividend_yield.toFixed(2),"%"]})]})})]}),(0,a.jsxs)("div",{className:"group relative",children:[a.jsx("span",{className:"text-gray-500 dark:text-gray-400 block mb-1",children:"Trade Price"}),a.jsx("span",{className:"font-mono font-medium text-amber-600 dark:text-amber-400",children:eu.has_trade_history?eR(eu.trade_weighted_price):"—"}),a.jsx("div",{className:"absolute bottom-full left-0 mb-2 hidden group-hover:block z-[9999] pointer-events-none",children:(0,a.jsxs)("div",{className:"bg-gray-900 text-white text-xs rounded-lg px-3 py-2 shadow-xl whitespace-nowrap",children:[a.jsx("p",{className:"font-medium",children:"Trade History"}),(0,a.jsxs)("p",{className:"text-gray-300",children:[eu.recent_trade_count," recent trades"]}),(0,a.jsxs)("p",{className:"text-gray-300",children:["Weighted avg: ",eR(eu.trade_weighted_price)]})]})})]}),(0,a.jsxs)("div",{className:"group relative",children:[a.jsx("span",{className:"text-gray-500 dark:text-gray-400 block mb-1",children:"Fundamental Value"}),a.jsx("span",{className:"font-mono font-medium text-gray-900 dark:text-white",children:eR(eu.fundamental_value)}),a.jsx("div",{className:"absolute bottom-full left-0 mb-2 hidden group-hover:block z-[9999] pointer-events-none",children:(0,a.jsxs)("div",{className:"bg-gray-900 text-white text-xs rounded-lg px-3 py-2 shadow-xl whitespace-nowrap",children:[a.jsx("p",{className:"font-medium",children:"Fundamental Value"}),(0,a.jsxs)("p",{className:"text-gray-300",children:["45% Book: ",eR(.45*eu.book_value)]}),(0,a.jsxs)("p",{className:`${eu.earnings_value<0?"text-red-400":"text-gray-300"}`,children:["25% Earnings: ",eR(.25*eu.earnings_value)]}),(0,a.jsxs)("p",{className:"text-amber-400",children:["10% Dividend: ",eR(1*eu.annual_dividend_per_share)]})]})})]})]})]}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-3 pt-3 border-t border-gray-200 dark:border-gray-700",children:[a.jsx("strong",{children:"Price Formula:"})," 45% Book Value + 25% Earnings (96hr \xd7 PE 15) + 20% Trade History + 10% Dividend Yield (min $0.01)"]})]})]})]}),ea&&ea.markets_count>0&&(0,a.jsxs)("div",{className:"relative rounded-2xl border border-gray-200/50 dark:border-gray-700/50 bg-gradient-to-br from-white via-white to-gray-50/50 dark:from-gray-900 dark:via-gray-900 dark:to-gray-800/50 shadow-2xl overflow-hidden backdrop-blur-sm mt-6",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-corporate-blue/5 via-transparent to-corporate-blue-light/5 dark:from-corporate-blue/10 dark:via-transparent dark:to-corporate-blue-dark/10 pointer-events-none"}),a.jsx("div",{className:"absolute inset-0 ring-1 ring-inset ring-white/20 dark:ring-gray-700/30 pointer-events-none"}),(0,a.jsxs)("div",{className:"relative p-6",children:[(0,a.jsxs)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[a.jsx(I.Z,{className:"w-5 h-5 text-corporate-blue"}),"Business Units"]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"text-center p-4 rounded-xl bg-pink-50 dark:bg-pink-900/20 border border-pink-200 dark:border-pink-800/30",children:[a.jsx(R.Z,{className:"h-8 w-8 text-pink-500 mx-auto mb-2"}),a.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:ea.total_retail_units}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Retail Units"})]}),(0,a.jsxs)("div",{className:"text-center p-4 rounded-xl bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-800/30",children:[a.jsx(I.Z,{className:"h-8 w-8 text-orange-500 mx-auto mb-2"}),a.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:ea.total_production_units}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Production Units"})]}),(0,a.jsxs)("div",{className:"text-center p-4 rounded-xl bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800/30",children:[a.jsx(O.Z,{className:"h-8 w-8 text-blue-500 mx-auto mb-2"}),a.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:ea.total_service_units}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Service Units"})]}),(0,a.jsxs)("div",{className:"text-center p-4 rounded-xl bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800/30",children:[a.jsx(x.Z,{className:"h-8 w-8 text-amber-600 mx-auto mb-2"}),a.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:ea.total_extraction_units||0}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Extraction Units"})]})]}),(0,a.jsxs)("div",{className:"mt-4 flex justify-between items-center text-sm",children:[(0,a.jsxs)("span",{className:"text-gray-500 dark:text-gray-400",children:["Total: ",(ea.total_retail_units||0)+(ea.total_production_units||0)+(ea.total_service_units||0)+(ea.total_extraction_units||0)," units"]}),(0,a.jsxs)("span",{className:"text-gray-500 dark:text-gray-400",children:[ea.markets_count," market",1!==ea.markets_count?"s":""," active"]})]})]})]}),ed.length>0&&(0,a.jsxs)("div",{className:"relative rounded-2xl border border-gray-200/50 dark:border-gray-700/50 bg-gradient-to-br from-white via-white to-gray-50/50 dark:from-gray-900 dark:via-gray-900 dark:to-gray-800/50 shadow-2xl overflow-hidden backdrop-blur-sm mt-6",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-corporate-blue/5 via-transparent to-corporate-blue-light/5 dark:from-corporate-blue/10 dark:via-transparent dark:to-corporate-blue-dark/10 pointer-events-none"}),a.jsx("div",{className:"absolute inset-0 ring-1 ring-inset ring-white/20 dark:ring-gray-700/30 pointer-events-none"}),(0,a.jsxs)("div",{className:"relative p-6",children:[(0,a.jsxs)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[a.jsx($.Z,{className:"w-5 h-5 text-corporate-blue"}),"Market Presence"]}),a.jsx("div",{className:"grid gap-3 md:grid-cols-2",children:ed.map(e=>(0,a.jsxs)(i.default,{href:`/states/${e.state_code}`,className:"flex items-center justify-between p-4 rounded-xl border border-gray-200 dark:border-gray-700 bg-white/50 dark:bg-gray-800/50 hover:border-corporate-blue/50 dark:hover:border-corporate-blue/50 hover:shadow-lg transition-all group",children:[(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("p",{className:"font-semibold text-gray-900 dark:text-white group-hover:text-corporate-blue transition-colors",children:e.state_name||e.state_code}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.sector_type}),(0,a.jsxs)("div",{className:"flex gap-2 mt-2 text-xs",children:[(e.retail_count||0)>0&&(0,a.jsxs)("span",{className:"px-2 py-0.5 rounded-full bg-pink-100 dark:bg-pink-900/30 text-pink-700 dark:text-pink-300",children:[e.retail_count," retail"]}),(e.production_count||0)>0&&(0,a.jsxs)("span",{className:"px-2 py-0.5 rounded-full bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-300",children:[e.production_count," prod"]}),(e.service_count||0)>0&&(0,a.jsxs)("span",{className:"px-2 py-0.5 rounded-full bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300",children:[e.service_count," svc"]}),(e.extraction_count||0)>0&&(0,a.jsxs)("span",{className:"px-2 py-0.5 rounded-full bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-300",children:[e.extraction_count," ext"]})]})]}),(0,a.jsxs)("div",{className:"text-right ml-4",children:[(0,a.jsxs)("p",{className:"text-lg font-bold text-corporate-blue dark:text-corporate-blue-light",children:[e.state_multiplier?.toFixed(1),"x"]}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"multiplier"})]})]},e.id))})]})]}),(!ea||0===ea.markets_count)&&(0,a.jsxs)("div",{className:"relative rounded-2xl border border-dashed border-corporate-blue/30 bg-corporate-blue/5 dark:bg-corporate-blue/10 mt-6 p-8 text-center",children:[a.jsx($.Z,{className:"h-12 w-12 text-corporate-blue/50 mx-auto mb-3"}),a.jsx("p",{className:"text-lg font-semibold text-corporate-blue dark:text-corporate-blue-light",children:"No market operations yet"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1 mb-4",children:"Enter markets via the States page to generate revenue"}),a.jsx(i.default,{href:"/states",className:"inline-block px-6 py-2 bg-corporate-blue text-white text-sm font-medium rounded-lg hover:bg-corporate-blue-dark transition-colors",children:"View States"})]})]}),"board"===Q&&a.jsx(es,{corporationId:t,corporationName:m.name,viewerUserId:h})]}),"board"!==Q&&a.jsx("div",{className:"space-y-6",children:(0,a.jsxs)("div",{className:"relative rounded-2xl border border-gray-200/50 dark:border-gray-700/50 bg-gradient-to-br from-white via-white to-gray-50/50 dark:from-gray-900 dark:via-gray-900 dark:to-gray-800/50 shadow-2xl overflow-hidden backdrop-blur-sm",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-corporate-blue/5 via-transparent to-corporate-blue-light/5 dark:from-corporate-blue/10 dark:via-transparent dark:to-corporate-blue-dark/10 pointer-events-none"}),a.jsx("div",{className:"absolute inset-0 ring-1 ring-inset ring-white/20 dark:ring-gray-700/30 pointer-events-none"}),(0,a.jsxs)("div",{className:"relative p-6",children:[a.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4",children:"Quick Actions"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-3",children:[a.jsx("div",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300",children:"Trade Shares"}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400",children:"Buy Shares (1.01x price)"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx("input",{type:"number",min:"1",max:m.public_shares,value:w,onChange:e=>C(e.target.value),placeholder:"Shares",className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm focus:ring-2 focus:ring-corporate-blue focus:border-transparent",disabled:W||!h}),(0,a.jsxs)("button",{onClick:ez,disabled:W||!w||!h,className:"px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-1 text-sm font-semibold",children:[a.jsx(q,{className:"w-4 h-4"}),"Buy"]})]}),w&&!isNaN(parseInt(w,10))&&m&&(0,a.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Cost: ",eR(parseInt(w,10)*m.share_price*1.01)]})]}),K>0&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400",children:["Sell Shares (0.99x price) - You own ",K.toLocaleString()]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx("input",{type:"number",min:"1",max:K,value:z,onChange:e=>H(e.target.value),placeholder:"Shares",className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm focus:ring-2 focus:ring-corporate-blue focus:border-transparent",disabled:W||!h}),(0,a.jsxs)("button",{onClick:eH,disabled:W||!z||!h,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-1 text-sm font-semibold",children:[a.jsx(U,{className:"w-4 h-4"}),"Sell"]})]}),z&&!isNaN(parseInt(z,10))&&m&&(0,a.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Revenue: ",eR(parseInt(z,10)*m.share_price*.99)]})]}),!h&&a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 italic",children:"Please log in to trade shares"})]}),(0,a.jsxs)("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4 space-y-2",children:[a.jsx(i.default,{href:"/stock-market",className:"block w-full px-4 py-2 text-center border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors shadow-sm hover:shadow-md font-semibold",children:"View Stock Market"}),m.ceo&&a.jsx(i.default,{href:`/profile/${m.ceo.profile_id}`,className:"block w-full px-4 py-2 text-center border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors shadow-sm hover:shadow-md font-semibold",children:"View CEO Profile"})]})]})]})]})})]})]})})}},40527:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});let a=(0,r(61278).Z)("box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]])},84909:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});let a=(0,r(61278).Z)("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},30467:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});let a=(0,r(61278).Z)("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]])},18255:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});let a=(0,r(61278).Z)("layers",[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]])},25452:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});let a=(0,r(61278).Z)("lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]])},9930:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});let a=(0,r(61278).Z)("pill",[["path",{d:"m10.5 20.5 10-10a4.95 4.95 0 1 0-7-7l-10 10a4.95 4.95 0 1 0 7 7Z",key:"wa1lgi"}],["path",{d:"m8.5 8.5 7 7",key:"rvfmvr"}]])},16903:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});let a=(0,r(61278).Z)("target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]])},98494:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});let a=(0,r(61278).Z)("truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]])},65790:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});let a=(0,r(61278).Z)("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]])},64276:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});let a=(0,r(61278).Z)("utensils-crossed",[["path",{d:"m16 2-2.3 2.3a3 3 0 0 0 0 4.2l1.8 1.8a3 3 0 0 0 4.2 0L22 8",key:"n7qcjb"}],["path",{d:"M15 15 3.3 3.3a4.2 4.2 0 0 0 0 6l7.3 7.3c.7.7 2 .7 2.8 0L15 15Zm0 0 7 7",key:"d0u48b"}],["path",{d:"m2.1 21.8 6.4-6.3",key:"yn04lh"}],["path",{d:"m19 5-7 7",key:"194lzd"}]])},70021:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});let a=(0,r(61278).Z)("wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]])},23515:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});let a=(0,r(2772).createProxy)(String.raw`C:\Users\rainf\wip\frontend\app\corporation\[id]\page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[287,945,175,203,236,491,559,326],()=>r(48400));module.exports=a})();