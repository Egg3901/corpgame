"use strict";exports.id=326,exports.ids=[326],exports.modules={4393:(e,t,r)=>{r.d(t,{Z:()=>m});var s=r(19899),a=r(77395),n=r(47061),l=r(80433),i=r(99993),c=r(94672),o=r(51721),d=r(41393);function x({children:e,className:t}){return s.jsx("div",{className:`absolute bottom-full left-0 mb-2 opacity-0 group-hover:opacity-100 group-focus-within:opacity-100 transition-opacity duration-200 delay-300 z-50 pointer-events-none ${t||""}`,children:s.jsx("div",{className:"rounded-lg px-4 py-3 text-xs shadow-2xl border border-gray-700 bg-gray-900 text-white w-[90vw] max-w-[400px] max-h-[70vh] overflow-y-auto pointer-events-auto",children:e})})}function p({title:e,revenueHr:t,costHr:r,profitHr:a,outputSoldUnits:n,costItems:l,loading:i,note:c,breakdown:o}){let d=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(e),x=e=>new Intl.NumberFormat("en-US",{maximumFractionDigits:2}).format(e),p=r>0?r:l.reduce((e,t)=>e+t.costHr,0),u=l.map(e=>({...e,pct:p>0?e.costHr/p*100:0})),m=o&&0!==o.length?o.reduce((e,t)=>e+t.value,0):null,h=null===m||.01>Math.abs((m||0)-t);return(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[s.jsx("p",{className:"text-sm font-semibold",children:e}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[null!==m&&s.jsx("span",{className:`text-[10px] ${h?"text-emerald-400":"text-red-400"}`,children:h?"Validated":"Mismatch"}),i?s.jsx("span",{className:"text-[10px] text-gray-400",children:"Loading…"}):null]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:[(0,s.jsxs)("div",{className:"text-right",children:[s.jsx("p",{className:"text-[10px] text-gray-400",children:"Revenue/hr"}),s.jsx("p",{className:"font-mono",children:d(t)})]}),(0,s.jsxs)("div",{className:"text-right",children:[s.jsx("p",{className:"text-[10px] text-gray-400",children:"Cost/hr"}),s.jsx("p",{className:"font-mono",children:d(r)})]}),(0,s.jsxs)("div",{className:"text-right",children:[s.jsx("p",{className:"text-[10px] text-gray-400",children:"Profit/hr"}),s.jsx("p",{className:"font-mono",children:d(a)})]}),(0,s.jsxs)("div",{className:"text-right",children:[s.jsx("p",{className:"text-[10px] text-gray-400",children:"Output Sold (u/hr)"}),s.jsx("p",{className:"font-mono",children:x(n)})]})]}),o&&o.length>0&&(0,s.jsxs)("div",{children:[s.jsx("p",{className:"text-[11px] text-gray-300 mb-1",children:"Revenue Breakdown"}),(0,s.jsxs)("div",{className:"space-y-1",children:[o.map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-[11px] text-gray-300",children:e.label}),s.jsx("span",{className:"font-mono text-[11px]",children:d(e.value)})]},e.label)),(0,s.jsxs)("div",{className:"flex items-center justify-between border-t border-gray-700 pt-1 mt-1",children:[s.jsx("span",{className:"text-[11px] text-gray-400",children:"Total"}),s.jsx("span",{className:"font-mono text-[11px]",children:d(m||0)})]})]})]}),(0,s.jsxs)("div",{children:[s.jsx("p",{className:"text-[11px] text-gray-300 mb-1",children:"Cost Breakdown"}),s.jsx("div",{className:"space-y-1",children:0===u.length?s.jsx("p",{className:"text-[11px] text-gray-500",children:"No input cost components"}):(0,s.jsxs)(s.Fragment,{children:[u.map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-[11px] text-gray-300",children:e.name}),(0,s.jsxs)("span",{className:"font-mono text-[11px]",children:[d(e.costHr)," (",x(e.pct),"%)"]})]},e.name)),(0,s.jsxs)("div",{className:"flex items-center justify-between border-t border-gray-700 pt-1 mt-1",children:[s.jsx("span",{className:"text-[11px] text-gray-400",children:"Total"}),s.jsx("span",{className:"font-mono text-[11px]",children:d(p)})]})]})})]}),c?s.jsx("div",{className:"rounded-md border border-gray-700 bg-gray-800 px-2 py-1",children:s.jsx("p",{className:"text-[10px] text-gray-400",children:c})}):null]})}r(5507);var u=r(54175);function m({sectorType:e,stateCode:t,stateName:r,stateMultiplier:m,stateGrowthFactor:h=1,enteredDate:g,units:b,corporation:j,canExtract:f,extractableResources:y,requiredResource:v,producedProduct:N,productDemands:k,revenue:w,profit:U,showActions:M=!1,onAbandonUnit:E,onBuildUnit:H,abandoningUnit:P=null,building:C=null,canBuild:Z=!0,buildCost:O=1e4,formatCurrency:S,calculateUnitProfit:R,UNIT_ECONOMICS:F,SECTORS_CAN_EXTRACT:A,commodityPrices:D,productPrices:$,EXTRACTION_OUTPUT_RATE:I=2,unitFlows:L,productReferenceValues:V}){let B=V||{"Technology Products":5e3,"Manufactured Goods":1500,Electricity:200,"Food Products":500,"Construction Capacity":2500,"Pharmaceutical Products":8e3,"Defense Equipment":15e3,"Logistics Capacity":1e3,Steel:850},T="Defense"===e,z=!("Light Industry"===e||"Heavy Industry"===e||"Mining"===e),G=!!N,q=b.retail+b.production+b.service+b.extraction,W=Math.floor(15*m),Y=W>0?q/W*100:0,J=q>=W,K=(()=>{if(L?.production)return L.production;let e={};return e.Electricity=.5,k&&k.forEach(t=>{e[t]=.5}),{inputs:{resources:v?{[v]:.5}:{},products:e},outputs:{resources:{},products:N?{[N]:1}:{}}}})(),Q=e=>new Intl.NumberFormat("en-US",{maximumFractionDigits:2}).format(e),X=(e,t)=>{if(!e)return null;let r=Object.entries(e.inputs.resources||{}).filter(([,e])=>e>0),s=Object.entries(e.inputs.products||{}).filter(([,e])=>e>0),a=Object.entries(e.outputs.resources||{}).filter(([,e])=>e>0),n=Object.entries(e.outputs.products||{}).filter(([,e])=>e>0);return 0===r.length&&0===s.length&&0===a.length&&0===n.length?null:{inputs:{resources:r.map(([e,r])=>({name:e,perUnit:r,total:r*t})),products:s.map(([e,r])=>({name:e,perUnit:r,total:r*t}))},outputs:{resources:a.map(([e,r])=>({name:e,perUnit:r,total:r*t})),products:n.map(([e,r])=>({name:e,perUnit:r,total:r*t}))}}},_=(t,r,s=!1)=>{let a=[];return Object.entries(t.resources||{}).forEach(([e,t])=>{let r=D?.[e]?.currentPrice??0;a.push({name:e,amount:t,price:r,costHr:t*r})}),Object.entries(t.products||{}).forEach(([t,n])=>{let l=$?.[t]?.currentPrice??B[t]??0,i="Electricity"===r&&"Electricity"===t?.1:1;s&&"Electricity"!==t?i*=.8:"Light Industry"===e&&"Electricity"!==t&&(i=.995),a.push({name:t,amount:n,price:l,costHr:n*l*i})}),a},ee=()=>{if(!y||0===y.length||!D)return F.extraction.baseRevenue;let e=y[0];return D[e]?D[e].currentPrice*I:F.extraction.baseRevenue},et=ee(),er=X(L?.retail,b.retail),es=X(K||void 0,b.production),ea=X(L?.service,b.service),en=X(L?.extraction,b.extraction||0),el=_({resources:Object.fromEntries((er?.inputs.resources||[]).map(e=>[e.name,e.perUnit])),products:Object.fromEntries((er?.inputs.products||[]).map(e=>[e.name,e.perUnit]))},null,T),ei=el.reduce((e,t)=>e+t.costHr,0),ec=(er?.inputs.products||[]).reduce((e,t)=>{let r=$?.[t.name]?.currentPrice??B[t.name]??0,s=(T&&t.name,1);return T&&"Electricity"!==t.name?e+r*t.perUnit*.8*s:e+r*t.perUnit},0),eo=ec||F.retail.baseRevenue,ed=(ei||F.retail.baseCost)/Math.max(1,h),ex=_({resources:Object.fromEntries((ea?.inputs.resources||[]).map(e=>[e.name,e.perUnit])),products:Object.fromEntries((ea?.inputs.products||[]).map(e=>[e.name,e.perUnit]))},null,T),ep=ex.reduce((e,t)=>e+t.costHr,0),eu=(ea?.inputs.products||[]).reduce((e,t)=>{let r=$?.[t.name]?.currentPrice??B[t.name]??0,s=(T&&t.name,1);return T&&"Electricity"!==t.name?e+r*t.perUnit*.8*s:e+r*t.perUnit},0),em=eu||F.service.baseRevenue,eh=(ep||F.service.baseCost)/Math.max(1,h),eg=N?K?.outputs.products?.[N]??1:1,eb=N?$?.[N]?.currentPrice??B[N]??F.production.baseRevenue:0,ej=N?$?.[N]?.referenceValue??B[N]??0:0,ef=F.production.baseRevenue,ey=F.production.baseCost;N&&(ef=ej+eb*eg,ey=400,Object.entries(K?.inputs.resources||{}).forEach(([e,t])=>{let r=D?.[e]?.currentPrice??0;ey+=t*r}),Object.entries(K?.inputs.products||{Electricity:.5}).forEach(([e,t])=>{let r=$?.[e]?.currentPrice??B[e]??0;ey+=t*r*("Electricity"===N&&"Electricity"===e?.1:1)}));let ev=ef-ey,eN=_({resources:Object.fromEntries((en?.inputs.resources||[]).map(e=>[e.name,e.perUnit])),products:Object.fromEntries((en?.inputs.products||[]).map(e=>[e.name,e.perUnit]))}).reduce((e,t)=>e+t.costHr,0),ek=F.extraction.baseCost+eN,ew=y&&y.length>0?D?.[y[0]]?.basePrice??0:0,eU=ew+et,eM=e=>{if(!e)return null;let t=[...e.inputs.resources.map(e=>({name:e.name,perUnit:e.perUnit})),...e.inputs.products.map(e=>({name:e.name,perUnit:e.perUnit}))],r=[...e.outputs.resources.map(e=>({name:e.name,perUnit:e.perUnit})),...e.outputs.products.map(e=>({name:e.name,perUnit:e.perUnit}))],a=t.slice(0,3),n=r.slice(0,3),l=Math.max(0,t.length-a.length),i=Math.max(0,r.length-n.length);return(0,s.jsxs)("div",{className:"mt-2 flex flex-wrap gap-1",children:[a.map(e=>(0,s.jsxs)("span",{className:"px-2 py-0.5 rounded-full text-[10px] bg-amber-100 dark:bg-amber-900/30 text-amber-800 dark:text-amber-200",children:[e.name," ",Q(e.perUnit),"/u/hr"]},`in-${e.name}`)),l>0&&(0,s.jsxs)("span",{className:"px-2 py-0.5 rounded-full text-[10px] bg-amber-50 dark:bg-amber-900/10 text-amber-700 dark:text-amber-300",children:["+",l," in"]}),n.map(e=>(0,s.jsxs)("span",{className:"px-2 py-0.5 rounded-full text-[10px] bg-emerald-100 dark:bg-emerald-900/30 text-emerald-800 dark:text-emerald-200",children:[e.name," ",Q(e.perUnit),"/u/hr"]},`out-${e.name}`)),i>0&&(0,s.jsxs)("span",{className:"px-2 py-0.5 rounded-full text-[10px] bg-emerald-50 dark:bg-emerald-900/10 text-emerald-700 dark:text-emerald-300",children:["+",i," out"]})]})};return(0,s.jsxs)("div",{className:"rounded-xl border border-white/60 bg-white/70 dark:border-gray-800/70 dark:bg-gray-800/60 p-4 shadow-sm",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 sm:gap-4 mb-4",children:[(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:e}),f&&(0,s.jsxs)("span",{className:"text-xs font-normal text-amber-600 dark:text-amber-400 flex items-center gap-1",children:[s.jsx(a.Z,{className:"w-3 h-3"}),"Extraction"]})]}),(0,s.jsxs)("div",{className:"flex flex-wrap items-center gap-x-3 gap-y-1 text-xs text-gray-500 dark:text-gray-400",children:[(0,s.jsxs)("span",{children:["Entered ",new Date(g).toLocaleDateString()]}),s.jsx("span",{className:"hidden sm:inline",children:"•"}),(0,s.jsxs)("span",{className:`font-mono ${J?"text-red-600 dark:text-red-400":Y>=80?"text-amber-600 dark:text-amber-400":"text-gray-500 dark:text-gray-400"}`,children:[q,"/",W," units"]}),J&&s.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300",children:"AT CAPACITY"}),j&&(0,s.jsxs)(s.Fragment,{children:[s.jsx("span",{className:"hidden sm:inline",children:"•"}),(0,s.jsxs)(u.default,{href:`/corporation/${j.id}`,className:"flex items-center gap-1 hover:text-corporate-blue dark:hover:text-corporate-blue-light transition-colors",children:[j.logo?s.jsx("img",{src:j.logo,alt:j.name,className:"w-4 h-4 rounded object-cover",onError:e=>{e.currentTarget.src="/defaultpfp.jpg"}}):s.jsx(n.Z,{className:"w-4 h-4"}),s.jsx("span",{className:"truncate max-w-[120px] sm:max-w-none",children:j.name})]})]}),s.jsx("span",{className:"hidden sm:inline",children:"•"}),(0,s.jsxs)(u.default,{href:`/states/${t}`,className:"flex items-center gap-1 hover:text-corporate-blue dark:hover:text-corporate-blue-light transition-colors",children:[s.jsx(l.Z,{className:"w-3 h-3"}),r]})]})]}),void 0!==w&&void 0!==U&&(0,s.jsxs)("div",{className:"flex items-center gap-3 sm:gap-4 flex-shrink-0",children:[(0,s.jsxs)("div",{className:"text-right group relative",children:[s.jsx("p",{className:"text-sm font-bold text-emerald-600 dark:text-emerald-400 font-mono",children:S(w)}),s.jsx("p",{className:"text-[10px] sm:text-xs text-gray-500 dark:text-gray-400",children:"revenue/96h"})]}),(0,s.jsxs)("div",{className:"text-right group relative",children:[s.jsx("p",{className:`text-sm font-bold font-mono ${U>=0?"text-emerald-600 dark:text-emerald-400":"text-red-600 dark:text-red-400"}`,children:S(U)}),s.jsx("p",{className:"text-[10px] sm:text-xs text-gray-500 dark:text-gray-400",children:"profit/96h"})]})]})]}),(0,s.jsxs)("div",{className:`grid gap-2 sm:gap-3 ${4===[z,G,!0,f].filter(Boolean).length?"grid-cols-2 lg:grid-cols-4":3===[z,G,!0,f].filter(Boolean).length?"grid-cols-1 sm:grid-cols-3":2===[z,G,!0,f].filter(Boolean).length?"grid-cols-2":"grid-cols-1"}`,children:[z&&(0,s.jsxs)("div",{className:"rounded-lg border border-gray-200 dark:border-gray-700 p-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(i.Z,{className:"h-4 w-4 text-pink-500"}),s.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Retail"})]}),s.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:b.retail}),(0,s.jsxs)("div",{className:"group relative inline-block",children:[(0,s.jsxs)("p",{className:"text-xs text-emerald-600 dark:text-emerald-400 cursor-help",children:["+",S(R("retail")*b.retail),"/96hr"]}),s.jsx(x,{children:s.jsx(p,{title:"Retail Financials",revenueHr:eo,costHr:ed,profitHr:eo-ed,outputSoldUnits:Math.round((er?.inputs.products||[]).reduce((e,t)=>e+t.total,0)),costItems:el.map(e=>({name:e.name,costHr:e.costHr})),breakdown:[{label:"Base",value:T?0:F.retail.baseRevenue},{label:T?"Cost-Plus Revenue":"Price \xd7 Output",value:ec}],note:T?"Defense sector: 1.0 consumption, 0.8x wholesale price, 1.0x cost revenue":`Demand-based cost factor applied: \xf7 Growth ${h.toFixed(2)}x (1 + 25% \xd7 sector growth avg)`})})]}),M&&(0,s.jsxs)("div",{className:"mt-2 flex gap-1",children:[H&&s.jsx("button",{onClick:()=>H("retail"),disabled:"retail"===C||!Z||J,className:"flex-1 px-2 py-1 text-xs bg-pink-500 text-white rounded hover:bg-pink-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"retail"===C?"...":J?"At Capacity":`+1 (${S(O)})`}),E&&b.retail>0&&s.jsx("button",{onClick:()=>E("retail"),disabled:"retail"===P,className:"px-2 py-1 text-xs bg-red-600 text-white rounded hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Abandon 1 retail unit",children:"retail"===P?"...":s.jsx(c.Z,{className:"w-3 h-3"})})]})]}),G&&(0,s.jsxs)("div",{className:"rounded-lg border border-gray-200 dark:border-gray-700 p-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(o.Z,{className:"h-4 w-4 text-orange-500"}),s.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Production"})]}),s.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:b.production}),(0,s.jsxs)("div",{className:"group relative inline-block",children:[(0,s.jsxs)("p",{className:"text-xs text-emerald-600 dark:text-emerald-400 cursor-help",children:["+",S(R("production")*b.production),"/96hr"]}),s.jsx(x,{children:s.jsx(p,{title:"Production Financials",revenueHr:ef,costHr:ey,profitHr:ev,outputSoldUnits:Math.round((es?.outputs.products||[]).reduce((e,t)=>e+t.total,0)+(es?.outputs.resources||[]).reduce((e,t)=>e+t.total,0)),costItems:[..._({resources:Object.fromEntries((es?.inputs.resources||[]).map(e=>[e.name,e.perUnit])),products:Object.fromEntries((es?.inputs.products||[]).map(e=>[e.name,e.perUnit]))},N).map(e=>({name:e.name,costHr:e.costHr})),{name:"Labor/Operations",costHr:400}],breakdown:[{label:"Base",value:ej},{label:"Price \xd7 Output",value:eb*eg}]})})]}),M&&(0,s.jsxs)("div",{className:"mt-2 flex gap-1",children:[H&&s.jsx("button",{onClick:()=>H("production"),disabled:"production"===C||!Z||J,className:"flex-1 px-2 py-1 text-xs bg-orange-500 text-white rounded hover:bg-orange-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"production"===C?"...":J?"At Capacity":`+1 (${S(O)})`}),E&&b.production>0&&s.jsx("button",{onClick:()=>E("production"),disabled:"production"===P,className:"px-2 py-1 text-xs bg-red-600 text-white rounded hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Abandon 1 production unit",children:"production"===P?"...":s.jsx(c.Z,{className:"w-3 h-3"})})]})]}),(0,s.jsxs)("div",{className:"rounded-lg border border-gray-200 dark:border-gray-700 p-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(d.Z,{className:"h-4 w-4 text-blue-500"}),s.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Service"})]}),s.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:b.service}),(0,s.jsxs)("div",{className:"group relative inline-block",children:[(0,s.jsxs)("p",{className:"text-xs text-emerald-600 dark:text-emerald-400 cursor-help",children:["+",S(R("service")*b.service),"/96hr"]}),s.jsx(x,{children:s.jsx(p,{title:"Service Financials",revenueHr:em,costHr:eh,profitHr:em-eh,outputSoldUnits:Math.round((ea?.inputs.products||[]).reduce((e,t)=>e+t.total,0)),costItems:ex.map(e=>({name:e.name,costHr:e.costHr})),breakdown:[{label:"Base",value:T?0:F.service.baseRevenue},{label:T?"Cost-Plus Revenue":"Price \xd7 Output",value:eu}],note:T?"Defense sector: 1.0 consumption, 0.8x wholesale price, 1.0x cost revenue":`Demand-based cost factor applied: \xf7 Growth ${h.toFixed(2)}x (1 + 25% \xd7 sector growth avg)`})})]}),M&&(0,s.jsxs)("div",{className:"mt-2 flex gap-1",children:[H&&s.jsx("button",{onClick:()=>H("service"),disabled:"service"===C||!Z||J,className:"flex-1 px-2 py-1 text-xs bg-blue-500 text-white rounded hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"service"===C?"...":J?"At Capacity":`+1 (${S(O)})`}),E&&b.service>0&&s.jsx("button",{onClick:()=>E("service"),disabled:"service"===P,className:"px-2 py-1 text-xs bg-red-600 text-white rounded hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Abandon 1 service unit",children:"service"===P?"...":s.jsx(c.Z,{className:"w-3 h-3"})})]})]}),f&&(0,s.jsxs)("div",{className:"rounded-lg border border-gray-200 dark:border-gray-700 p-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(a.Z,{className:"h-4 w-4 text-amber-500"}),s.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Extraction"})]}),s.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:b.extraction||0}),(0,s.jsxs)("div",{className:"group relative inline-block",children:[(0,s.jsxs)("p",{className:"text-xs text-emerald-600 dark:text-emerald-400 cursor-help",children:["+",S(R("extraction")*(b.extraction||0)),"/96hr"]}),s.jsx(x,{children:s.jsx(p,{title:"Extraction Financials",revenueHr:eU,costHr:ek,profitHr:eU-ek,outputSoldUnits:Math.round((en?.outputs.resources||[]).reduce((e,t)=>e+t.total,0)),costItems:[..._({resources:Object.fromEntries((en?.inputs.resources||[]).map(e=>[e.name,e.perUnit])),products:Object.fromEntries((en?.inputs.products||[]).map(e=>[e.name,e.perUnit]))}).map(e=>({name:e.name,costHr:e.costHr})),{name:"Labor",costHr:F.extraction.baseCost}],breakdown:[{label:"Base Price",value:ew},{label:"Market Revenue",value:ee()},{label:"Total Cost/Unit",value:ek/I}]})})]}),M&&(0,s.jsxs)("div",{className:"mt-2 flex gap-1",children:[H&&s.jsx("button",{onClick:()=>H("extraction"),disabled:"extraction"===C||!Z||J,className:"flex-1 px-2 py-1 text-xs bg-amber-500 text-white rounded hover:bg-amber-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"extraction"===C?"...":J?"At Capacity":`+1 (${S(O)})`}),E&&(b.extraction||0)>0&&s.jsx("button",{onClick:()=>E("extraction"),disabled:"extraction"===P,className:"px-2 py-1 text-xs bg-red-600 text-white rounded hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Abandon 1 extraction unit",children:"extraction"===P?"...":s.jsx(c.Z,{className:"w-3 h-3"})})]})]})]}),(er||es||ea||en)&&(0,s.jsxs)("div",{className:"mt-3 space-y-2",children:[b.retail>0&&er&&(0,s.jsxs)("div",{children:[s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Retail flows"}),eM(er)]}),b.production>0&&es&&(0,s.jsxs)("div",{children:[s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Production flows"}),eM(es)]}),b.service>0&&ea&&(0,s.jsxs)("div",{children:[s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Service flows"}),eM(ea)]}),f&&(b.extraction||0)>0&&en&&(0,s.jsxs)("div",{children:[s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Extraction flows"}),eM(en)]})]})]})}},80943:(e,t,r)=>{r.d(t,{ZV:()=>i});var s=r(5507),a=r(21842);let n=null,l=null;function i(){let[e,t]=(0,s.useState)(n),[r,i]=(0,s.useState)(!n),[c,o]=(0,s.useState)(null),d=(0,s.useCallback)(async(e=!1)=>{if(!e&&n){t(n),i(!1);return}if(l){try{let e=await l;t(e),i(!1)}catch(e){o(e.message||"Failed to fetch sector configuration"),i(!1)}return}i(!0),o(null),l=a.cW.getConfig();try{let e=await l;n=e,e.version,t(e)}catch(e){console.error("Failed to fetch sector config:",e),o(e.message||"Failed to fetch sector configuration")}finally{i(!1),l=null}},[]),x=(0,s.useCallback)(async()=>{n=null,await d(!0)},[d]),p=(0,s.useMemo)(()=>({getSectorProduct:t=>e&&e.sectors[t]?.producedProduct||null,getSectorResource:t=>e&&e.sectors[t]?.primaryResource||null,getProductReferenceValue:t=>e?e.products[t]?.referenceValue??1e3:1e3,getResourceBasePrice:t=>e?e.resources[t]?.basePrice??100:100,getSectorsProducingProduct:t=>{if(!e)return[];let r=[];for(let[s,a]of Object.entries(e.sectors))a.producedProduct===t&&r.push(s);return r},getSectorsDemandingProduct:t=>{if(!e)return[];let r=[];for(let[s,a]of Object.entries(e.sectors)){let e=[];for(let r of["production","retail","service","extraction"]){let s=a.units[r];s.isEnabled&&s.inputs.some(e=>"product"===e.type&&e.name===t)&&e.push(r)}e.length>0&&r.push({sector:s,unitTypes:e})}return r},getSectorsExtractingResource:t=>{if(!e)return[];let r=[];for(let[s,a]of Object.entries(e.sectors))a.units.extraction.outputs.some(e=>"resource"===e.type&&e.name===t)&&r.push(s);return r},getSectorsDemandingResource:t=>{if(!e)return[];let r=[];for(let[s,a]of Object.entries(e.sectors)){let e=[];for(let r of["production","retail","service","extraction"]){let s=a.units[r];s.isEnabled&&s.inputs.some(e=>"resource"===e.type&&e.name===t)&&e.push(r)}e.length>0&&r.push({sector:s,unitTypes:e})}return r},getUnitInputs:(t,r)=>e&&e.sectors[t]?.units[r]?.inputs||[],getUnitOutputs:(t,r)=>e&&e.sectors[t]?.units[r]?.outputs||[]}),[e]);return{config:e,loading:r,error:c,refetch:x,...p}}},41393:(e,t,r)=>{r.d(t,{Z:()=>s});let s=(0,r(61278).Z)("briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]])},26435:(e,t,r)=>{r.d(t,{Z:()=>s});let s=(0,r(61278).Z)("droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]])},68053:(e,t,r)=>{r.d(t,{Z:()=>s});let s=(0,r(61278).Z)("flask-conical",[["path",{d:"M14 2v6a2 2 0 0 0 .245.96l5.51 10.08A2 2 0 0 1 18 22H6a2 2 0 0 1-1.755-2.96l5.51-10.08A2 2 0 0 0 10 8V2",key:"18mbvz"}],["path",{d:"M6.453 15h11.094",key:"3shlmq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}]])},77395:(e,t,r)=>{r.d(t,{Z:()=>s});let s=(0,r(61278).Z)("pickaxe",[["path",{d:"m14 13-8.381 8.38a1 1 0 0 1-3.001-3L11 9.999",key:"1lw9ds"}],["path",{d:"M15.973 4.027A13 13 0 0 0 5.902 2.373c-1.398.342-1.092 2.158.277 2.601a19.9 19.9 0 0 1 5.822 3.024",key:"ffj4ej"}],["path",{d:"M16.001 11.999a19.9 19.9 0 0 1 3.024 5.824c.444 1.369 2.26 1.676 2.603.278A13 13 0 0 0 20 8.069",key:"8tj4zw"}],["path",{d:"M18.352 3.352a1.205 1.205 0 0 0-1.704 0l-5.296 5.296a1.205 1.205 0 0 0 0 1.704l2.296 2.296a1.205 1.205 0 0 0 1.704 0l5.296-5.296a1.205 1.205 0 0 0 0-1.704z",key:"hh6h97"}]])},37067:(e,t,r)=>{r.d(t,{Z:()=>s});let s=(0,r(61278).Z)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},99993:(e,t,r)=>{r.d(t,{Z:()=>s});let s=(0,r(61278).Z)("store",[["path",{d:"M15 21v-5a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v5",key:"slp6dd"}],["path",{d:"M17.774 10.31a1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.451 0 1.12 1.12 0 0 0-1.548 0 2.5 2.5 0 0 1-3.452 0 1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.77-3.248l2.889-4.184A2 2 0 0 1 7 2h10a2 2 0 0 1 1.653.873l2.895 4.192a2.5 2.5 0 0 1-3.774 3.244",key:"o0xfot"}],["path",{d:"M4 10.95V19a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8.05",key:"wn3emo"}]])},94672:(e,t,r)=>{r.d(t,{Z:()=>s});let s=(0,r(61278).Z)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},87167:(e,t,r)=>{r.d(t,{Z:()=>s});let s=(0,r(61278).Z)("trees",[["path",{d:"M10 10v.2A3 3 0 0 1 8.9 16H5a3 3 0 0 1-1-5.8V10a3 3 0 0 1 6 0Z",key:"1l6gj6"}],["path",{d:"M7 16v6",key:"1a82de"}],["path",{d:"M13 19v3",key:"13sx9i"}],["path",{d:"M12 19h8.3a1 1 0 0 0 .7-1.7L18 14h.3a1 1 0 0 0 .7-1.7L16 9h.2a1 1 0 0 0 .8-1.7L13 3l-1.4 1.5",key:"1sj9kv"}]])}};